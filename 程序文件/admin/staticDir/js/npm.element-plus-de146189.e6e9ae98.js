"use strict";(self.webpackChunknote_star_cn=self.webpackChunknote_star_cn||[]).push([[3822],{12093:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(99601),d=n(8752),r=n(54596);const a=o.defineComponent({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=r.useNamespace("tree"),n=o.inject("NodeInstance"),d=o.inject("RootTree");return()=>{const r=e.node,{data:a,store:s}=r;return e.renderContent?e.renderContent(o.h,{_self:n,node:r,data:a,store:s}):o.renderSlot(d.ctx.slots,"default",{node:r,data:a},(()=>[o.h("span",{class:t.be("node","label")},[r.label])]))}}});var s=d.default(a,[["__file","tree-node-content.vue"]]);t.default=s},18758:function(e,t,n){n(44114),n(18111),n(7588),n(61701),n(13579),Object.defineProperty(t,"__esModule",{value:!0});var o=n(99601),d=n(26754),r=n(24232),a=n(9370);const s=e=>{let t=!0,n=!0,o=!0;for(let d=0,r=e.length;d<r;d++){const r=e[d];(!0!==r.checked||r.indeterminate)&&(t=!1,r.disabled||(o=!1)),(!1!==r.checked||r.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:o,half:!t&&!n}},i=function(e){if(0===e.childNodes.length||e.loading)return;const{all:t,none:n,half:o}=s(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):o?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const d=e.parent;d&&0!==d.level&&(e.store.checkStrictly||i(d))},l=function(e,t){const n=e.store.props,o=e.data||{},d=n[t];if(r.isFunction(d))return d(o,e);if(r.isString(d))return o[d];if(a.isUndefined(d)){const e=o[t];return void 0===e?"":e}};let c=0;class h{constructor(e){this.id=c++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)r.hasOwn(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&void 0!==t.isLeaf){const e=l(this,"isLeaf");a.isBoolean(e)&&(this.isLeafByUser=e)}if(!0!==e.lazy&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&!this.isLeafByUser&&this.expand(),r.isArray(this.data)||d.markNodeData(this,this.data),!this.data)return;const n=e.defaultExpandedKeys,o=e.key;o&&n&&n.includes(this.key)&&this.expand(null,e.autoExpandParent),o&&void 0!==e.currentNodeKey&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),!this.parent||1!==this.level&&!0!==this.parent.expanded||(this.canFocus=!0)}setData(e){let t;r.isArray(e)||d.markNodeData(this,e),this.data=e,this.childNodes=[],t=0===this.level&&r.isArray(this.data)?this.data:l(this,"children")||[];for(let e=0,n=t.length;e<n;e++)this.insertChild({data:t[e]})}get label(){return l(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return l(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some((n=>n===e||t&&n.contains(e)))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,n){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof h)){if(!n){const n=this.getChildren(!0);n.includes(e.data)||(a.isUndefined(t)||t<0?n.push(e.data):n.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),(e=o.reactive(new h(e)))instanceof h&&e.initialize()}e.level=this.level+1,a.isUndefined(t)||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let n;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)}insertAfter(e,t){let n;t&&(n=this.childNodes.indexOf(t),-1!==n&&(n+=1)),this.insertChild(e,n)}removeChild(e){const t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);const o=this.childNodes.indexOf(e);o>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===e){t=this.childNodes[n];break}t&&this.removeChild(t)}expand(e,t){const n=()=>{if(t){let e=this.parent;for(;e.level>0;)e.expanded=!0,e=e.parent}this.expanded=!0,e&&e(),this.childNodes.forEach((e=>{e.canFocus=!0}))};this.shouldLoadData()?this.loadData((e=>{r.isArray(e)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||i(this),n())})):n()}doCreateChildren(e,t={}){e.forEach((e=>{this.insertChild(Object.assign({data:e},t),void 0,!0)}))}collapse(){this.expanded=!1,this.childNodes.forEach((e=>{e.canFocus=!1}))}shouldLoadData(){return!0===this.store.lazy&&this.store.load&&!this.loaded}updateLeafState(){if(!0===this.store.lazy&&!0!==this.loaded&&void 0!==this.isLeafByUser)return void(this.isLeaf=this.isLeafByUser);const e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}setChecked(e,t,n,o){if(this.indeterminate="half"===e,this.checked=!0===e,this.store.checkStrictly)return;if(!this.shouldLoadData()||this.store.checkDescendants){const{all:n,allWithoutDisable:d}=s(this.childNodes);this.isLeaf||n||!d||(this.checked=!1,e=!1);const r=()=>{if(t){const n=this.childNodes;for(let d=0,r=n.length;d<r;d++){const r=n[d];o=o||!1!==e;const a=r.disabled?r.checked:o;r.setChecked(a,t,!0,o)}const{half:d,all:r}=s(n);r||(this.checked=r,this.indeterminate=d)}};if(this.shouldLoadData())return void this.loadData((()=>{r(),i(this)}),{checked:!1!==e});r()}const d=this.parent;d&&0!==d.level&&(n||i(d))}getChildren(e=!1){if(0===this.level)return this.data;const t=this.data;if(!t)return null;const n=this.store.props;let o="children";return n&&(o=n.children||"children"),void 0===t[o]&&(t[o]=null),e&&!t[o]&&(t[o]=[]),t[o]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map((e=>e.data)),n={},o=[];e.forEach(((e,r)=>{const a=e[d.NODE_KEY];!!a&&t.findIndex((e=>e[d.NODE_KEY]===a))>=0?n[a]={index:r,data:e}:o.push({index:r,data:e})})),this.store.lazy||t.forEach((e=>{n[e[d.NODE_KEY]]||this.removeChildByData(e)})),o.forEach((({index:e,data:t})=>{this.insertChild({data:t},e)})),this.updateLeafState()}loadData(e,t={}){if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(t).length)e&&e.call(this);else{this.loading=!0;const n=n=>{this.childNodes=[],this.doCreateChildren(n,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,n)},o=()=>{this.loading=!1};this.store.load(this,n,o)}}eachNode(e){const t=[this];for(;t.length;){const n=t.shift();t.unshift(...n.childNodes),e(n)}}reInitChecked(){this.store.checkStrictly||i(this)}}t.default=h,t.getChildState=s},26754:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n="$treeNodeId";t.NODE_KEY=n,t.getNodeKey=function(e,t){return e?t[e]:t[n]},t.handleCurrentChange=(e,t,n)=>{const o=e.value.currentNode;n();const d=e.value.currentNode;o!==d&&t("current-change",d?d.data:null,d)},t.markNodeData=function(e,t){t&&!t[n]&&Object.defineProperty(t,n,{value:e.id,enumerable:!1,configurable:!1,writable:!1})}},46460:function(e,t,n){n(18111),n(7588),Object.defineProperty(t,"__esModule",{value:!0});var o=n(99601),d=n(49614),r=n(54596),a=n(16402);t.useKeydown=function({el$:e},t){const n=r.useNamespace("tree"),s=o.shallowRef([]),i=o.shallowRef([]);o.onMounted((()=>{l()})),o.onUpdated((()=>{s.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),i.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))})),o.watch(i,(e=>{e.forEach((e=>{e.setAttribute("tabindex","-1")}))})),d.useEventListener(e,"keydown",(o=>{const d=o.target;if(!d.className.includes(n.b("node")))return;const r=o.code;s.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const i=s.value.indexOf(d);let l;if([a.EVENT_CODE.up,a.EVENT_CODE.down].includes(r)){if(o.preventDefault(),r===a.EVENT_CODE.up){l=-1===i?0:0!==i?i-1:s.value.length-1;const e=l;for(;!t.value.getNode(s.value[l].dataset.key).canFocus;){if(l--,l===e){l=-1;break}l<0&&(l=s.value.length-1)}}else{l=-1===i?0:i<s.value.length-1?i+1:0;const e=l;for(;!t.value.getNode(s.value[l].dataset.key).canFocus;){if(l++,l===e){l=-1;break}l>=s.value.length&&(l=0)}}-1!==l&&s.value[l].focus()}[a.EVENT_CODE.left,a.EVENT_CODE.right].includes(r)&&(o.preventDefault(),d.click());const c=d.querySelector('[type="checkbox"]');[a.EVENT_CODE.enter,a.EVENT_CODE.numpadEnter,a.EVENT_CODE.space].includes(r)&&c&&(o.preventDefault(),c.click())}));const l=()=>{var t;s.value=Array.from(e.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),i.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const o=e.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);o.length?o[0].setAttribute("tabindex","0"):null==(t=s.value[0])||t.setAttribute("tabindex","0")}}},53746:function(e,t,n){n(44114),n(18111),n(7588),n(61701),n(13579),Object.defineProperty(t,"__esModule",{value:!0});var o=n(18758),d=n(26754),r=n(24232),a=n(9370);t.default=class{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)r.hasOwn(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new o.default({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){(0,this.load)(this.root,(e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()}))}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,n=this.lazy,o=function(d){const r=d.root?d.root.childNodes:d.childNodes;if(r.forEach((n=>{n.visible=t.call(n,e,n.data,n),o(n)})),!d.visible&&r.length){let e=!0;e=!r.some((e=>e.visible)),d.root?d.root.visible=!1===e:d.visible=!1===e}e&&d.visible&&!d.isLeaf&&(n&&!d.loaded||d.expand())};o(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof o.default)return e;const t=r.isObject(e)?d.getNodeKey(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const n=this.getNode(t);n.parent.insertBefore({data:e},n)}insertAfter(e,t){const n=this.getNode(t);n.parent.insertAfter({data:e},n)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const n=a.isPropAbsent(t)?this.root:this.getNode(t);n&&n.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach((e=>{const n=t[e];n&&n.setChecked(!0,!this.checkStrictly)}))}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;if(e&&e.data)if(t){void 0!==e.key&&(this.nodesMap[e.key]=e)}else this.nodesMap[e.id]=e}deregisterNode(e){this.key&&e&&e.data&&(e.childNodes.forEach((e=>{this.deregisterNode(e)})),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const n=[],o=function(d){(d.root?d.root.childNodes:d.childNodes).forEach((d=>{(d.checked||t&&d.indeterminate)&&(!e||e&&d.isLeaf)&&n.push(d.data),o(d)}))};return o(this),n}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map((e=>(e||{})[this.key]))}getHalfCheckedNodes(){const e=[],t=function(n){(n.root?n.root.childNodes:n.childNodes).forEach((n=>{n.indeterminate&&e.push(n.data),t(n)}))};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map((e=>(e||{})[this.key]))}_getAllNodes(){const e=[],t=this.nodesMap;for(const n in t)r.hasOwn(t,n)&&e.push(t[n]);return e}updateChildren(e,t){const n=this.nodesMap[e];if(!n)return;const o=n.childNodes;for(let e=o.length-1;e>=0;e--){const t=o[e];this.remove(t.data)}for(let e=0,o=t.length;e<o;e++){const o=t[e];this.append(o,n.data)}}_setCheckedKeys(e,t=!1,n){const o=this._getAllNodes().sort(((e,t)=>e.level-t.level)),d=Object.create(null),r=Object.keys(n);o.forEach((e=>e.setChecked(!1,!1)));const a=t=>{t.childNodes.forEach((t=>{var n;d[t.data[e]]=!0,(null==(n=t.childNodes)?void 0:n.length)&&a(t)}))};for(let n=0,s=o.length;n<s;n++){const s=o[n],i=s.data[e].toString();if(r.includes(i)){if(s.childNodes.length&&a(s),s.isLeaf||this.checkStrictly)s.setChecked(!0,!1);else if(s.setChecked(!0,!0),t){s.setChecked(!1,!1);const e=function(t){t.childNodes.forEach((t=>{t.isLeaf||t.setChecked(!1,!1),e(t)}))};e(s)}}else s.checked&&!d[i]&&s.setChecked(!1,!1)}}setCheckedNodes(e,t=!1){const n=this.key,o={};e.forEach((e=>{o[(e||{})[n]]=!0})),this._setCheckedKeys(n,t,o)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const n=this.key,o={};e.forEach((e=>{o[e]=!0})),this._setCheckedKeys(n,t,o)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach((e=>{const t=this.getNode(e);t&&t.expand(null,this.autoExpandParent)}))}setChecked(e,t,n){const o=this.getNode(e);o&&o.setChecked(!!t,n)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const n=e[this.key],o=this.nodesMap[n];this.setCurrentNode(o),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(this.currentNodeKey=e,null==e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);const n=this.getNode(e);n&&(this.setCurrentNode(n),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}},56820:function(e,t,n){n(44114),n(18111),n(81148),n(22489),Object.defineProperty(t,"__esModule",{value:!0});var o=n(99601),d=n(77307),r=n(53746),a=n(26754),s=n(84237),i=n(98232),l=n(84002),c=n(46460),h=n(8752),u=n(1951),p=n(46775),f=n(54596),v=n(12413);const C=o.defineComponent({name:"ElTree",components:{ElTreeNode:s.default},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:u.iconPropType}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=p.useLocale(),s=f.useNamespace("tree"),h=o.inject(d.selectKey,null),u=o.ref(new r.default({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));u.value.initialize();const C=o.ref(u.value.root),N=o.ref(null),g=o.ref(null),y=o.ref(null),{broadcastExpanded:k}=i.useNodeExpandEventBroadcast(e),{dragState:m}=l.useDragNodeHandler({props:e,ctx:t,el$:g,dropIndicator$:y,store:u});c.useKeydown({el$:g},u);const x=o.computed((()=>{const{childNodes:e}=C.value,t=!!h&&0!==h.hasFilteredOptions;return(!e||0===e.length||e.every((({visible:e})=>!e)))&&!t}));o.watch((()=>e.currentNodeKey),(e=>{u.value.setCurrentNodeKey(e)})),o.watch((()=>e.defaultCheckedKeys),(e=>{u.value.setDefaultCheckedKey(e)})),o.watch((()=>e.defaultExpandedKeys),(e=>{u.value.setDefaultExpandedKeys(e)})),o.watch((()=>e.data),(e=>{u.value.setData(e)}),{deep:!0}),o.watch((()=>e.checkStrictly),(e=>{u.value.checkStrictly=e}));const E=()=>{const e=u.value.getCurrentNode();return e?e.data:null};return o.provide("RootTree",{ctx:t,props:e,store:u,root:C,currentNode:N,instance:o.getCurrentInstance()}),o.provide(v.formItemContextKey,void 0),{ns:s,store:u,root:C,currentNode:N,dragState:m,el$:g,dropIndicator$:y,isEmpty:x,filter:t=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");u.value.filter(t)},getNodeKey:t=>a.getNodeKey(e.nodeKey,t.data),getNodePath:t=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const n=u.value.getNode(t);if(!n)return[];const o=[n.data];let d=n.parent;for(;d&&d!==C.value;)o.push(d.data),d=d.parent;return o.reverse()},getCheckedNodes:(e,t)=>u.value.getCheckedNodes(e,t),getCheckedKeys:e=>u.value.getCheckedKeys(e),getCurrentNode:E,getCurrentKey:()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const t=E();return t?t[e.nodeKey]:null},setCheckedNodes:(t,n)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");u.value.setCheckedNodes(t,n)},setCheckedKeys:(t,n)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");u.value.setCheckedKeys(t,n)},setChecked:(e,t,n)=>{u.value.setChecked(e,t,n)},getHalfCheckedNodes:()=>u.value.getHalfCheckedNodes(),getHalfCheckedKeys:()=>u.value.getHalfCheckedKeys(),setCurrentNode:(n,o=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");a.handleCurrentChange(u,t.emit,(()=>{k(n),u.value.setUserCurrentNode(n,o)}))},setCurrentKey:(n,o=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");a.handleCurrentChange(u,t.emit,(()=>{k(),u.value.setCurrentNodeKey(n,o)}))},t:n,getNode:e=>u.value.getNode(e),remove:e=>{u.value.remove(e)},append:(e,t)=>{u.value.append(e,t)},insertBefore:(e,t)=>{u.value.insertBefore(e,t)},insertAfter:(e,t)=>{u.value.insertAfter(e,t)},handleNodeExpand:(e,n,o)=>{k(n),t.emit("node-expand",e,n,o)},updateKeyChildren:(t,n)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");u.value.updateChildren(t,n)}}}});var N=h.default(C,[["render",function(e,t,n,d,r,a){const s=o.resolveComponent("el-tree-node");return o.openBlock(),o.createElementBlock("div",{ref:"el$",class:o.normalizeClass([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner","inner"===e.dragState.dropType),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.root.childNodes,(t=>(o.openBlock(),o.createBlock(s,{key:e.getNodeKey(t),node:t,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"])))),128)),e.isEmpty?(o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(e.ns.e("empty-block"))},[o.renderSlot(e.$slots,"empty",{},(()=>{var t;return[o.createElementVNode("span",{class:o.normalizeClass(e.ns.e("empty-text"))},o.toDisplayString(null!=(t=e.emptyText)?t:e.t("el.tree.emptyText")),3)]}))],2)):o.createCommentVNode("v-if",!0),o.withDirectives(o.createElementVNode("div",{ref:"dropIndicator$",class:o.normalizeClass(e.ns.e("drop-indicator"))},null,2),[[o.vShow,e.dragState.showDropIndicator]])],2)}],["__file","tree.vue"]]);t.default=N},63507:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(56820);const d=n(1095).withInstall(o.default);t.ElTree=d,t.default=d},84002:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(99601),d=n(54596),r=n(24232),a=n(78597);const s=Symbol("dragEvents");t.dragEventsKey=s,t.useDragNodeHandler=function({props:e,ctx:t,el$:n,dropIndicator$:i,store:l}){const c=d.useNamespace("tree"),h=o.ref({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return o.provide(s,{treeNodeDragStart:({event:n,treeNode:o})=>{if(r.isFunction(e.allowDrag)&&!e.allowDrag(o.node))return n.preventDefault(),!1;n.dataTransfer.effectAllowed="move";try{n.dataTransfer.setData("text/plain","")}catch(e){}h.value.draggingNode=o,t.emit("node-drag-start",o.node,n)},treeNodeDragOver:({event:o,treeNode:d})=>{const s=d,l=h.value.dropNode;l&&l.node.id!==s.node.id&&a.removeClass(l.$el,c.is("drop-inner"));const u=h.value.draggingNode;if(!u||!s)return;let p=!0,f=!0,v=!0,C=!0;r.isFunction(e.allowDrop)&&(p=e.allowDrop(u.node,s.node,"prev"),C=f=e.allowDrop(u.node,s.node,"inner"),v=e.allowDrop(u.node,s.node,"next")),o.dataTransfer.dropEffect=f||p||v?"move":"none",(p||f||v)&&(null==l?void 0:l.node.id)!==s.node.id&&(l&&t.emit("node-drag-leave",u.node,l.node,o),t.emit("node-drag-enter",u.node,s.node,o)),h.value.dropNode=p||f||v?s:null,s.node.nextSibling===u.node&&(v=!1),s.node.previousSibling===u.node&&(p=!1),s.node.contains(u.node,!1)&&(f=!1),(u.node===s.node||u.node.contains(s.node))&&(p=!1,f=!1,v=!1);const N=s.$el.querySelector(`.${c.be("node","content")}`).getBoundingClientRect(),g=n.value.getBoundingClientRect();let y;const k=p?f?.25:v?.45:1:-1,m=v?f?.75:p?.55:0:1;let x=-9999;const E=o.clientY-N.top;y=E<N.height*k?"before":E>N.height*m?"after":f?"inner":"none";const b=s.$el.querySelector(`.${c.be("node","expand-icon")}`).getBoundingClientRect(),D=i.value;"before"===y?x=b.top-g.top:"after"===y&&(x=b.bottom-g.top),D.style.top=`${x}px`,D.style.left=b.right-g.left+"px","inner"===y?a.addClass(s.$el,c.is("drop-inner")):a.removeClass(s.$el,c.is("drop-inner")),h.value.showDropIndicator="before"===y||"after"===y,h.value.allowDrop=h.value.showDropIndicator||C,h.value.dropType=y,t.emit("node-drag-over",u.node,s.node,o)},treeNodeDragEnd:e=>{const{draggingNode:n,dropType:o,dropNode:d}=h.value;if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),n&&d){const r={data:n.node.data};"none"!==o&&n.node.remove(),"before"===o?d.node.parent.insertBefore(r,d.node):"after"===o?d.node.parent.insertAfter(r,d.node):"inner"===o&&d.node.insertChild(r),"none"!==o&&(l.value.registerNode(r),l.value.key&&n.node.eachNode((e=>{var t;null==(t=l.value.nodesMap[e.data[l.value.key]])||t.setChecked(e.checked,!l.value.checkStrictly)}))),a.removeClass(d.$el,c.is("drop-inner")),t.emit("node-drag-end",n.node,d.node,o,e),"none"!==o&&t.emit("node-drop",n.node,d.node,o,e)}n&&!d&&t.emit("node-drag-end",n.node,null,o,e),h.value.showDropIndicator=!1,h.value.draggingNode=null,h.value.dropNode=null,h.value.allowDrop=!0}}),{dragState:h}}},84237:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(99601),d=n(91608),r=n(64566),a=n(33046),s=n(27003),i=n(12093),l=n(26754),c=n(98232),h=n(84002),u=n(18758),p=n(8752),f=n(54596),v=n(35937),C=n(24232);const N=o.defineComponent({name:"ElTreeNode",components:{ElCollapseTransition:d.ElCollapseTransition,ElCheckbox:r.ElCheckbox,NodeContent:i.default,ElIcon:a.ElIcon,Loading:s.Loading},props:{node:{type:u.default,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const n=f.useNamespace("tree"),{broadcastExpanded:d}=c.useNodeExpandEventBroadcast(e),r=o.inject("RootTree"),a=o.ref(!1),i=o.ref(!1),u=o.ref(null),p=o.ref(null),N=o.ref(null),g=o.inject(h.dragEventsKey),y=o.getCurrentInstance();o.provide("NodeInstance",y),r||v.debugWarn("Tree","Can not find node's tree."),e.node.expanded&&(a.value=!0,i.value=!0);const k=r.props.props.children||"children";o.watch((()=>{const t=e.node.data[k];return t&&[...t]}),(()=>{e.node.updateChildren()})),o.watch((()=>e.node.indeterminate),(t=>{x(e.node.checked,t)})),o.watch((()=>e.node.checked),(t=>{x(t,e.node.indeterminate)})),o.watch((()=>e.node.childNodes.length),(()=>e.node.reInitChecked())),o.watch((()=>e.node.expanded),(e=>{o.nextTick((()=>a.value=e)),e&&(i.value=!0)}));const m=e=>l.getNodeKey(r.props.nodeKey,e.data),x=(t,n)=>{u.value===t&&p.value===n||r.ctx.emit("check-change",e.node.data,t,n),u.value=t,p.value=n},E=()=>{e.node.isLeaf||(a.value?(r.ctx.emit("node-collapse",e.node.data,e.node,y),e.node.collapse()):e.node.expand((()=>{t.emit("node-expand",e.node.data,e.node,y)})))},b=t=>{e.node.setChecked(t,!(null==r?void 0:r.props.checkStrictly)),o.nextTick((()=>{const t=r.store.value;r.ctx.emit("check",e.node.data,{checkedNodes:t.getCheckedNodes(),checkedKeys:t.getCheckedKeys(),halfCheckedNodes:t.getHalfCheckedNodes(),halfCheckedKeys:t.getHalfCheckedKeys()})}))};return{ns:n,node$:N,tree:r,expanded:a,childNodeRendered:i,oldChecked:u,oldIndeterminate:p,getNodeKey:m,getNodeClass:t=>{const n=e.props.class;if(!n)return{};let o;if(C.isFunction(n)){const{data:e}=t;o=n(e,t)}else o=n;return C.isString(o)?{[o]:!0}:o},handleSelectChange:x,handleClick:t=>{l.handleCurrentChange(r.store,r.ctx.emit,(()=>{var t;if(null==(t=null==r?void 0:r.props)?void 0:t.nodeKey){const t=m(e.node);r.store.value.setCurrentNodeKey(t)}else r.store.value.setCurrentNode(e.node)})),r.currentNode.value=e.node,r.props.expandOnClickNode&&E(),r.props.checkOnClickNode&&!e.node.disabled&&b(!e.node.checked),r.ctx.emit("node-click",e.node.data,e.node,y,t)},handleContextMenu:t=>{r.instance.vnode.props.onNodeContextmenu&&(t.stopPropagation(),t.preventDefault()),r.ctx.emit("node-contextmenu",t,e.node.data,e.node,y)},handleExpandIconClick:E,handleCheckChange:b,handleChildNodeExpand:(e,t,n)=>{d(t),r.ctx.emit("node-expand",e,t,n)},handleDragStart:t=>{r.props.draggable&&g.treeNodeDragStart({event:t,treeNode:e})},handleDragOver:t=>{t.preventDefault(),r.props.draggable&&g.treeNodeDragOver({event:t,treeNode:{$el:N.value,node:e.node}})},handleDrop:e=>{e.preventDefault()},handleDragEnd:e=>{r.props.draggable&&g.treeNodeDragEnd(e)},CaretRight:s.CaretRight}}});var g=p.default(N,[["render",function(e,t,n,d,r,a){const s=o.resolveComponent("el-icon"),i=o.resolveComponent("el-checkbox"),l=o.resolveComponent("loading"),c=o.resolveComponent("node-content"),h=o.resolveComponent("el-tree-node"),u=o.resolveComponent("el-collapse-transition");return o.withDirectives((o.openBlock(),o.createElementBlock("div",{ref:"node$",class:o.normalizeClass([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:o.withModifiers(e.handleClick,["stop"]),onContextmenu:e.handleContextMenu,onDragstart:o.withModifiers(e.handleDragStart,["stop"]),onDragover:o.withModifiers(e.handleDragOver,["stop"]),onDragend:o.withModifiers(e.handleDragEnd,["stop"]),onDrop:o.withModifiers(e.handleDrop,["stop"])},[o.createElementVNode("div",{class:o.normalizeClass(e.ns.be("node","content")),style:o.normalizeStyle({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(o.openBlock(),o.createBlock(s,{key:0,class:o.normalizeClass([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:o.withModifiers(e.handleExpandIconClick,["stop"])},{default:o.withCtx((()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.tree.props.icon||e.CaretRight)))])),_:1},8,["class","onClick"])):o.createCommentVNode("v-if",!0),e.showCheckbox?(o.openBlock(),o.createBlock(i,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:o.withModifiers((()=>{}),["stop"]),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):o.createCommentVNode("v-if",!0),e.node.loading?(o.openBlock(),o.createBlock(s,{key:2,class:o.normalizeClass([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:o.withCtx((()=>[o.createVNode(l)])),_:1},8,["class"])):o.createCommentVNode("v-if",!0),o.createVNode(c,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),o.createVNode(u,null,{default:o.withCtx((()=>[!e.renderAfterExpand||e.childNodeRendered?o.withDirectives((o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.node.childNodes,(t=>(o.openBlock(),o.createBlock(h,{key:e.getNodeKey(t),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:t,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"])))),128))],10,["aria-expanded"])),[[o.vShow,e.expanded]]):o.createCommentVNode("v-if",!0)])),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[o.vShow,e.node.visible]])}],["__file","tree-node.vue"]]);t.default=g},98232:function(e,t,n){n(44114),Object.defineProperty(t,"__esModule",{value:!0});var o=n(99601);t.useNodeExpandEventBroadcast=function(e){const t=o.inject("TreeNodeMap",null),n={treeNodeExpand:t=>{e.node!==t&&e.node.collapse()},children:[]};return t&&t.children.push(n),o.provide("TreeNodeMap",n),{broadcastExpanded:t=>{if(e.accordion)for(const e of n.children)e.treeNodeExpand(t)}}}}}]);