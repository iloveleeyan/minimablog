"use strict";(self.webpackChunknote_star_cn=self.webpackChunknote_star_cn||[]).push([[67],{1740:function(e,t,o){o.a(e,(async function(e,a){try{o.d(t,{A:function(){return i.A}});var i=o(95729),n=e([i]);i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}}))},4652:function(e,t,o){o.d(t,{X:function(){return u}});var a=o(99601);const i={class:"dialog-large"},n={key:0,class:"content-album-image-list"},l={class:"form-image-list-select"},r=["onClick"],s=["onClick"],c={class:"dialog-footer"},d={class:"content-album-image-list"},m={key:0,class:"content-album-image-list"};function u(e,t,o,u,h,p){const C=(0,a.resolveComponent)("el-alert"),f=(0,a.resolveComponent)("el-input"),g=(0,a.resolveComponent)("el-form-item"),V=(0,a.resolveComponent)("el-image"),k=(0,a.resolveComponent)("el-form"),w=(0,a.resolveComponent)("el-button"),v=(0,a.resolveComponent)("el-dialog");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createVNode)(v,{modelValue:h.dialogVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>h.dialogVisible=e),title:"填写友链列表"},{footer:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",c,[(0,a.createVNode)(w,{onClick:t[2]||(t[2]=e=>h.dialogVisible=!1),size:"small"},{default:(0,a.withCtx)((()=>t[7]||(t[7]=[(0,a.createTextVNode)("关闭")]))),_:1}),(0,a.createVNode)(w,{type:"primary",onClick:t[3]||(t[3]=e=>p.insertCode()),disabled:0===h.notUseFileList.length||0===h.imageList.length},{default:(0,a.withCtx)((()=>t[8]||(t[8]=[(0,a.createTextVNode)(" 插入相册代码到正文 ")]))),_:1},8,["disabled"])]),(0,a.createElementVNode)("div",d,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(h.notUseFileList,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t,class:(0,a.normalizeClass)("content-album-one-image"+(e.isUse?" hide":""))},[(0,a.createVNode)(V,{src:e.url,fit:"cover",onClick:t=>p.clickImage(e.name,e.url)},null,8,["src","onClick"])],2)))),128))]),0===h.notUseFileList.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",m,[(0,a.createVNode)(C,{title:"没有未使用的图片可以插入了，先上传一些再试吧，或者从正文中删除一些图片代码",type:"warning",closable:!1})])):(0,a.createCommentVNode)("",!0)])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{model:h.form,"label-width":80},{default:(0,a.withCtx)((()=>[0===h.imageList.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(C,{title:"在下面图片列表中选择图片",type:"warning",closable:!1})])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(g,{label:"邻居标题",class:"mb-20"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{modelValue:h.title,"onUpdate:modelValue":t[0]||(t[0]=e=>h.title=e),type:"text",class:"width-300 mr-15",maxlength:"20"},null,8,["modelValue"])])),_:1}),(0,a.createVNode)(g,{label:"邻居描述",class:"mb-20"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{modelValue:h.desc,"onUpdate:modelValue":t[1]||(t[1]=e=>h.desc=e),type:"text",class:"width-600 mr-15",maxlength:"50"},null,8,["modelValue"])])),_:1}),(0,a.createElementVNode)("div",l,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(h.imageList,((e,o)=>((0,a.openBlock)(),(0,a.createBlock)(g,{label:"邻居 #"+(o+1),key:o,class:"mb-20"},{default:(0,a.withCtx)((()=>[e.url?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,class:"content-album-one-preview","preview-src-list":[e.url],src:e.url,fit:"cover"},null,8,["preview-src-list","src"])):(0,a.createCommentVNode)("",!0),(0,a.withDirectives)((0,a.createVNode)(f,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,type:"text",class:"width-300 mr-15",readonly:"readonly"},null,8,["modelValue","onUpdate:modelValue"]),[[a.vShow,!1]]),(0,a.createVNode)(f,{modelValue:e.title,"onUpdate:modelValue":t=>e.title=t,placeholder:"博客名称",type:"text",maxlength:"20",class:"width-200 ml-15"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createVNode)(f,{modelValue:e.href,"onUpdate:modelValue":t=>e.href=t,placeholder:"博客网址",type:"text",maxlength:"30",class:"width-200 ml-15"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createVNode)(f,{modelValue:e.desc,"onUpdate:modelValue":t=>e.desc=t,placeholder:"博客简介",type:"text",maxlength:"40",class:"width-200 ml-15"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createElementVNode)("span",{class:"tag-block tag-white ml-10 bottom-2 cursor-pointer",onClick:t=>p.moveUpImage(e.name)},t[5]||(t[5]=[(0,a.createElementVNode)("i",{class:"fa fa-arrow-up"},null,-1)]),8,r),(0,a.createElementVNode)("span",{class:"tag-block tag-red ml-10 bottom-2 cursor-pointer",onClick:t=>p.removeImage(e.name)},t[6]||(t[6]=[(0,a.createElementVNode)("i",{class:"fa fa-remove"},null,-1)]),8,s)])),_:2},1032,["label"])))),128))])])),_:1},8,["model"])])),_:1},8,["modelValue"])])}},6322:function(e,t,o){o.d(t,{A:function(){return k}});var a=o(99601);const i={class:"upload-container"},n={class:"upload-list"},l={class:"upload-one-image"},r={class:"upload-one-option"},s=["onClick","innerHTML"],c=["onClick"],d=["onClick"],m=["onClick"],u={class:"upload-tips"},h={class:"el-upload__tip"};o(18111),o(22489),o(7588);var p=o(29236),C=o(78947),f=o(164),g=o(36798),V={components:{UploadFilled:o(57477).m8m},props:["uploadUrl","limit","fileList","content","fileType","fileSize","cover"],data(){return{commonConstant:C.A,imageList:[],coverCopy:"",isCoverMode:!1}},created(){},mounted(){let e=this;setTimeout((function(){e.cover&&(e.coverCopy=e.cover.replace(C.A.ARTICLE_LOGO_PREFIX,""))}),300)},watch:{fileList(){this.isImageUse()},content(){this.isImageUse()}},setup(e,t){return{emitOnError:(e,o,a)=>{t.emit("emitOnError",e,o,a)},emitOnSuccess:(e,o,a)=>{t.emit("emitOnSuccess",e,o,a)},emitOnRemove:e=>{t.emit("emitOnRemove",e)},emitOnAdd:e=>{t.emit("emitOnAdd",e)},emitSetLogo:e=>{t.emit("emitSetLogo",e)}}},methods:{getHeader(){let e={};return e[C.A.SESSION_TOKEN]=(0,p.KA)({name:C.A.SESSION_TOKEN}),e},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)},handleExceed(e,t){(0,g.R8)(`当前限制选择 n 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},beforeRemove(e,t){return console.log(e,t),(0,f.s)(`确定移除 ${e.name}？`)},onSuccess(e,t,o){e.code>0?this.emitOnError(e.data.msg,t,o):this.emitOnSuccess(e,t,o)},onError(e,t,o){this.emitOnError(e,t,o)},remove(e){f.s.confirm("确定删除图片"+e+"？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.emitOnRemove(e)})).catch((()=>{}))},setCover(e){e.toLowerCase().indexOf(".gif")>-1?(0,g.R8)("不能使用gif格式的图片作为封面图"):(this.coverCopy=e,this.emitSetLogo(e))},removeCover(){this.coverCopy?f.s.confirm("确定删除封面图么？这会直接删除该文件？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e=this.imageList.filter((e=>e.name===this.coverCopy));if(0===e.length)return;const t=e[0];let o=t.name;t.isLogo&&(o=C.A.ARTICLE_LOGO_PREFIX+t.name),this.emitOnRemove(o),this.coverCopy="",(0,g.kX)("已移除封面图"),this.isCoverMode=!1})).catch((()=>{})):(0,g.R8)("没有设置封面图")},add(e,t){t?(0,g.R8)("此图片已添加过"):this.emitOnAdd(this.getImageTag(e)+"\n\n")},getImageTag(e){return C.A.IMAGE_OPEN+e+C.A.IMAGE_CLOSE},isImageUse(){this.fileList.forEach((e=>{e.isUse=!1,-1!==this.content.indexOf(e.name)&&(e.isUse=!0)})),this.imageList=[...this.fileList]}}};var k=(0,o(71241).A)(V,[["render",function(e,t,o,p,C,f){const g=(0,a.resolveComponent)("el-image"),V=(0,a.resolveComponent)("el-button"),k=(0,a.resolveComponent)("upload-filled"),w=(0,a.resolveComponent)("el-icon"),v=(0,a.resolveComponent)("el-upload");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",n,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(C.imageList,((e,o)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"upload-one",key:o},[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(g,{src:e.url,fit:"cover","preview-src-list":[e.url]},{default:(0,a.withCtx)((()=>t[2]||(t[2]=[(0,a.createElementVNode)("div",{slot:"placeholder",class:"image-slot"},[(0,a.createElementVNode)("i",{class:"el-icon-loading"}),(0,a.createTextVNode)(" 加载中... ")],-1)]))),_:2},1032,["src","preview-src-list"])]),(0,a.createElementVNode)("div",r,[C.isCoverMode||e.isLogo?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:0,class:(0,a.normalizeClass)((e.isUse?"cursor-pointer mr-5 is-use":"cursor-pointer mr-5")+" upload-one-option-span exceed-dot"),onClick:t=>f.add(e.name,e.isUse),innerHTML:e.isUse?e.name:"<i class='fa fa-plus fa-fw'></i></span>插入到正文"},null,10,s)),C.isCoverMode||e.isLogo?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:1,class:"cursor-pointer upload-one-option-span",onClick:t=>f.remove(e.name)},t[3]||(t[3]=[(0,a.createElementVNode)("i",{class:"fa fa-trash-o bottom-1"},null,-1)]),8,c)),C.isCoverMode&&C.coverCopy!==e.name&&!e.isLogo?((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:2,class:"cursor-pointer upload-one-option-span upload-cover-button",onClick:t=>f.setCover(e.name)},t[4]||(t[4]=[(0,a.createElementVNode)("i",{class:"fa fa-image bottom-1"},null,-1),(0,a.createTextVNode)(" 设置封面 ")]),8,d)):(0,a.createCommentVNode)("",!0),C.isCoverMode&&C.coverCopy===e.name?((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:3,class:"cursor-pointer upload-one-option-span upload-cover-button upload-cover-button-use",onClick:t=>f.setCover(e.name)},t[5]||(t[5]=[(0,a.createElementVNode)("i",{class:"fa fa-check bottom-1"},null,-1),(0,a.createTextVNode)(" 封面使用中 ")]),8,m)):(0,a.createCommentVNode)("",!0)])])))),128))]),(0,a.createElementVNode)("div",u,[C.imageList.length>0?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,class:"upload-tips-cover",type:"info",size:"small",onClick:t[0]||(t[0]=e=>C.isCoverMode=!C.isCoverMode)},{default:(0,a.withCtx)((()=>t[6]||(t[6]=[(0,a.createElementVNode)("i",{class:"fa fa-image bottom-1"},null,-1),(0,a.createTextVNode)(" 设置封面 ")]))),_:1})):(0,a.createCommentVNode)("",!0),C.imageList.length>0?((0,a.openBlock)(),(0,a.createBlock)(V,{key:1,class:"upload-tips-cover",type:"info",size:"small",onClick:t[1]||(t[1]=e=>f.removeCover())},{default:(0,a.withCtx)((()=>t[7]||(t[7]=[(0,a.createElementVNode)("i",{class:"fa fa-remove bottom-1"},null,-1),(0,a.createTextVNode)(" 移除封面 ")]))),_:1})):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(v,{class:"form-upload",drag:"",action:o.uploadUrl,multiple:"",headers:f.getHeader(),limit:o.limit,"on-preview":f.handlePreview,"on-remove":f.handleRemove,"before-remove":f.beforeRemove,"on-success":f.onSuccess,"on-error":f.onError},{tip:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",h," 只能上传"+(0,a.toDisplayString)(o.fileType)+"文件，大小不超过"+(0,a.toDisplayString)(o.fileSize)+"，最多"+(0,a.toDisplayString)(o.limit)+"张 ",1)])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{class:"el-icon--upload"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k)])),_:1}),t[8]||(t[8]=(0,a.createElementVNode)("div",{class:"el-upload__text"},[(0,a.createTextVNode)(" 拖动到这里，或者 "),(0,a.createElementVNode)("em",null,"点这里上传")],-1))])),_:1},8,["action","headers","limit","on-preview","on-remove","before-remove","on-success","on-error"])])}]])},10732:function(e,t,o){o.a(e,(async function(e,a){try{o(44114),o(18111),o(22489),o(7588);var i=o(78947),n=o(36798),l=o(52004),r=e([l]);l=(r.then?(await r)():r)[0],t.A={props:["fileList"],data(){return{dialogVisible:!1,imageList:[],form:[],notUseFileList:[],title:"",desc:"",config:{},isFreeVersion:!1}},setup(e,t){return{emitInsertCode:e=>{t.emit("emitInsertCode",e)}}},mounted(){this.requestUserConfig()},methods:{openDialog(e){this.isFreeVersion?(0,n.R8)(i.A.ERROR_FREE_VERSION):(this.dialogVisible=e,this.notUseFileList=this.fileList.filter((e=>!e.isUse)),this.imageList=[],this.imageList.forEach((e=>{e.name="",e.href="",e.title="",e.desc=""})))},requestUserConfig(){(0,l.U3)().then((e=>{this.config=e.data.data,this.isFreeVersion=this.config.isFreeVersion}))},clickImage(e,t){this.imageList.push({name:e,title:"",desc:"",url:t}),this.notUseFileList.forEach((t=>{t.name===e&&(t.isUse=!0)}))},insertCode(){let e="";e+="\n"+i.A.FRIEND_OPEN+"\n",e+="title="+this.title+" desc="+this.desc+"\n",this.imageList.forEach((t=>{t.name&&(e+="["+t.title+"]("+t.href+")"+this.installImageTag(t.name)+t.desc+"\n")})),e+=i.A.FRIEND_CLOSE+"\n",this.dialogVisible=!1,(0,n.kX)("已插入代码"),this.emitInsertCode(e)},installImageTag(e){return i.A.IMAGE_OPEN+e+i.A.IMAGE_CLOSE},removeImage(e){const t=this.imageList.filter((t=>t.name===e))[0];this.imageList=this.imageList.filter((t=>t.name!==e)),this.notUseFileList.push({name:t.name,url:t.url,title:t.title,isUse:!1})},moveUpImage(e){this.imageList.forEach(((t,o)=>{if(t.name===e){const e=this.imageList[o-1];this.imageList[o-1]=this.imageList[o],this.imageList[o]=e}}))}}},a()}catch(e){a(e)}}))},15042:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(4652),n=o(28687),l=o(71241),r=e([n]);n=(r.then?(await r)():r)[0];const s=(0,l.A)(n.A,[["render",i.X]]);t.A=s,a()}catch(e){a(e)}}))},19565:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(59106),n=o(1740),l=o(71241),r=e([n]);n=(r.then?(await r)():r)[0];const s=(0,l.A)(n.A,[["render",i.X]]);t.A=s,a()}catch(e){a(e)}}))},28687:function(e,t,o){o.a(e,(async function(e,a){try{o.d(t,{A:function(){return i.A}});var i=o(10732),n=e([i]);i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}}))},31983:function(e,t,o){o.a(e,(async function(e,a){try{o(44114),o(18111),o(22489),o(7588);var i=o(78947),n=o(36798),l=o(52004),r=e([l]);l=(r.then?(await r)():r)[0],t.A={props:["fileList"],data(){return{dialogVisible:!1,imageList:[],form:[],title:"",notUseFileList:[],config:{},isFreeVersion:!1}},setup(e,t){return{emitInsertCode:e=>{t.emit("emitInsertCode",e)}}},mounted(){this.requestUserConfig()},methods:{openDialog(e){this.isFreeVersion?(0,n.R8)(i.A.ERROR_FREE_VERSION):(this.dialogVisible=e,this.notUseFileList=this.fileList.filter((e=>!e.isUse)),this.imageList=[],this.imageList.forEach((e=>{e.name="",e.url="",e.desc=""})))},requestUserConfig(){(0,l.U3)().then((e=>{this.config=e.data.data,this.isFreeVersion=this.config.isFreeVersion}))},clickImage(e,t){this.imageList.push({name:e,desc:"",url:t}),this.notUseFileList.forEach((t=>{t.name===e&&(t.isUse=!0)}))},insertCode(){let e="";e+="\n"+i.A.ALBUM_OPEN+"\n",e+="title="+this.title+"\n",this.imageList.forEach((t=>{t.name&&(e+=t.desc+this.installImageTag(t.name)+"\n")})),e+=i.A.ALBUM_CLOSE+"\n",this.dialogVisible=!1,this.emitInsertCode(e),(0,n.kX)("已插入代码")},installImageTag(e){return i.A.IMAGE_OPEN+e+i.A.IMAGE_CLOSE},removeImage(e){const t=this.imageList.filter((t=>t.name===e))[0];this.imageList=this.imageList.filter((t=>t.name!==e)),this.notUseFileList.push({name:t.name,url:t.url,isUse:!1})},moveUpImage(e){this.imageList.forEach(((t,o)=>{if(t.name===e){const e=this.imageList[o-1];this.imageList[o-1]=this.imageList[o],this.imageList[o]=e}}))}}},a()}catch(e){a(e)}}))},41383:function(e,t,o){o.a(e,(async function(e,a){try{o.d(t,{A:function(){return i.A}});var i=o(74952),n=e([i]);i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}}))},44893:function(e,t,o){o.a(e,(async function(e,a){try{o.d(t,{A:function(){return i.A}});var i=o(65584),n=e([i]);i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}}))},49207:function(e,t,o){o.d(t,{X:function(){return l}});var a=o(99601);const i={class:"lee-editor"},n={class:"lee-editor-header"};function l(e,t,o,l,r,s){const c=(0,a.resolveComponent)("el-menu-item"),d=(0,a.resolveComponent)("el-tooltip"),m=(0,a.resolveComponent)("el-dropdown-item"),u=(0,a.resolveComponent)("el-dropdown-menu"),h=(0,a.resolveComponent)("el-dropdown"),p=(0,a.resolveComponent)("el-menu"),C=(0,a.resolveComponent)("ContentAlbumView"),f=(0,a.resolveComponent)("ContentFriendView");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",n,[(0,a.createVNode)(p,{mode:"horizontal",onSelect:s.clickMarkdown,class:"lee-editor","text-color":"#999","active-text-color":"#666",ellipsis:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{index:"header",title:"大标题"},{default:(0,a.withCtx)((()=>t[2]||(t[2]=[(0,a.createElementVNode)("i",{class:"fa fa-header"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"bold",title:"粗体"},{default:(0,a.withCtx)((()=>t[3]||(t[3]=[(0,a.createElementVNode)("i",{class:"fa fa-bold"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"italic",title:"斜体"},{default:(0,a.withCtx)((()=>t[4]||(t[4]=[(0,a.createElementVNode)("i",{class:"fa fa-italic"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"tag",title:"标签块"},{default:(0,a.withCtx)((()=>t[5]||(t[5]=[(0,a.createElementVNode)("i",{class:"fa fa-tag"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"line",title:"华丽的分割线"},{default:(0,a.withCtx)((()=>t[6]||(t[6]=[(0,a.createElementVNode)("i",{class:"fa fa-minus"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"link",title:"超链接"},{default:(0,a.withCtx)((()=>t[7]||(t[7]=[(0,a.createElementVNode)("i",{class:"fa fa-link"},null,-1)]))),_:1}),(0,a.createVNode)(d,{effect:"dark",content:"插入 bilibili 视频，试试把B站的带 <iframe> 的视频代码直接粘贴到文本框中，会自动转换为 markdown 标签",placement:"top"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{index:"bili"},{default:(0,a.withCtx)((()=>t[8]||(t[8]=[(0,a.createElementVNode)("i",{class:"fa fa-video-camera"},null,-1)]))),_:1})])),_:1}),(0,a.createVNode)(c,{index:"audio",title:"插入音频播放"},{default:(0,a.withCtx)((()=>t[9]||(t[9]=[(0,a.createElementVNode)("i",{class:"fa fa-music"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"list",title:"列表"},{default:(0,a.withCtx)((()=>t[10]||(t[10]=[(0,a.createElementVNode)("i",{class:"fa fa-list"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"table",title:"表格"},{default:(0,a.withCtx)((()=>t[11]||(t[11]=[(0,a.createElementVNode)("i",{class:"fa fa-table"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"check",title:"复选框（取消）"},{default:(0,a.withCtx)((()=>t[12]||(t[12]=[(0,a.createElementVNode)("i",{class:"fa fa-square-o"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"checked",title:"复选框（选中）"},{default:(0,a.withCtx)((()=>t[13]||(t[13]=[(0,a.createElementVNode)("i",{class:"fa fa-check-square-o"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"area",title:"代码/引用块"},{default:(0,a.withCtx)((()=>t[14]||(t[14]=[(0,a.createElementVNode)("i",{class:"fa fa-code"},null,-1)]))),_:1}),(0,a.createVNode)(c,{index:"preview",title:"预览渲染内容"},{default:(0,a.withCtx)((()=>t[15]||(t[15]=[(0,a.createElementVNode)("i",{class:"fa fa-print"},null,-1)]))),_:1}),(0,a.createVNode)(c,{title:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{effect:"dark",content:"插入更复杂的固定组件",placement:"top"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{trigger:"click"},{dropdown:(0,a.withCtx)((()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{index:"component",onClick:t[0]||(t[0]=e=>l.openAlbumDialog(!0))},{default:(0,a.withCtx)((()=>t[16]||(t[16]=[(0,a.createTextVNode)("插入相册（一行4张）")]))),_:1}),(0,a.createVNode)(m,{index:"component",onClick:t[1]||(t[1]=e=>l.openFriendDialog(!0))},{default:(0,a.withCtx)((()=>t[17]||(t[17]=[(0,a.createTextVNode)("插入友情链接卡片（一行3个）")]))),_:1})])),_:1})])),default:(0,a.withCtx)((()=>[t[18]||(t[18]=(0,a.createElementVNode)("div",{class:"el-dropdown-link"},[(0,a.createElementVNode)("i",{class:"fa fa-fw fa-picture-o mr-5"}),(0,a.createTextVNode)("插入组件 ")],-1))])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(c,{index:"import",title:"从其他博客的日志导入正文，拷贝日志代码，粘贴到这里"},{default:(0,a.withCtx)((()=>t[19]||(t[19]=[(0,a.createElementVNode)("i",{class:"fa fa-paste mr-5"},null,-1),(0,a.createTextVNode)(" 从 html 代码导入")]))),_:1})])),_:1},8,["onSelect"])]),(0,a.createVNode)(C,{ref:"contentAlbumView",fileList:o.fileList,onEmitInsertCode:s.insertAlbumCode},null,8,["fileList","onEmitInsertCode"]),(0,a.createVNode)(f,{ref:"contentFriendView",fileList:o.fileList,onEmitInsertCode:s.insertFriendCode},null,8,["fileList","onEmitInsertCode"])])}},51383:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(64870),n=o(75538),l=o(71241),r=e([n]);n=(r.then?(await r)():r)[0];const s=(0,l.A)(n.A,[["render",i.X]]);t.A=s,a()}catch(e){a(e)}}))},55453:function(e,t,o){o.d(t,{A:function(){return n}});var a=o(99601);var i={props:["keyword","cacheList","width","placeholder"],data(){return{keywordValue:this.keyword}},methods:{search(){this.keywordValue=this.keywordValue.trim(),this.$emit("search",this.keywordValue)},input(e){this.keywordValue=e,this.search()},inputFocus(){this.$refs.refInput.focus()},reset(){this.keywordValue="",this.$emit("search",this.keywordValue)}}};var n=(0,o(71241).A)(i,[["render",function(e,t,o,i,n,l){const r=(0,a.resolveComponent)("el-input"),s=(0,a.resolveComponent)("el-dropdown-item"),c=(0,a.resolveComponent)("el-dropdown-menu"),d=(0,a.resolveComponent)("el-dropdown");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(d,{placement:"bottom-start",trigger:"click",onVisibleChange:t[2]||(t[2]=e=>l.inputFocus())},{dropdown:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{slot:"dropdown",class:(0,a.normalizeClass)("exceed-dot"+(o.cacheList.length>0?"":" hide")),style:(0,a.normalizeStyle)("width: "+o.width+"px;")},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.cacheList,((e,t)=>((0,a.openBlock)(),(0,a.createBlock)(s,{key:t,onClick:t=>l.input(e)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(r,{ref:"refInput",placeholder:o.placeholder,modelValue:n.keywordValue,"onUpdate:modelValue":t[0]||(t[0]=e=>n.keywordValue=e),style:(0,a.normalizeStyle)("width: "+o.width+"px"),class:"el-dropdown-link",onChange:t[1]||(t[1]=e=>l.search()),clearable:""},null,8,["placeholder","modelValue","style"])])),_:1})])}]])},57742:function(e,t,o){o.d(t,{X:function(){return c}});var a=o(99601);const i={class:"overflow-hidden"},n={class:"main-navigator"},l={class:"search-bar"},r=["innerHTML"],s=["innerHTML"];function c(e,t,o,c,d,m){const u=(0,a.resolveComponent)("el-menu-item"),h=(0,a.resolveComponent)("el-menu"),p=(0,a.resolveComponent)("el-button"),C=(0,a.resolveComponent)("el-input"),f=(0,a.resolveComponent)("el-checkbox-button"),g=(0,a.resolveComponent)("el-checkbox-group"),V=(0,a.resolveComponent)("el-table-column"),k=(0,a.resolveComponent)("el-tooltip"),w=(0,a.resolveComponent)("el-link"),v=(0,a.resolveComponent)("el-table"),N=(0,a.resolveComponent)("el-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",n,[(0,a.createVNode)(h,{"default-active":d.path,mode:"horizontal",onSelect:m.selectTab},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{index:"/comment"},{default:(0,a.withCtx)((()=>t[3]||(t[3]=[(0,a.createTextVNode)("评论")]))),_:1})])),_:1},8,["default-active","onSelect"])]),(0,a.createElementVNode)("div",l,[(0,a.createVNode)(p,{round:"",class:"search-bar-input top-1",onClick:m.changeKeyword},{default:(0,a.withCtx)((()=>t[4]||(t[4]=[(0,a.createTextVNode)("搜索")]))),_:1},8,["onClick"]),(0,a.createVNode)(C,{modelValue:d.params.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>d.params.keyword=e),placeholder:"搜索关键字…",class:"search-bar-input width-150",onChange:m.changeKeyword},null,8,["modelValue","onChange"]),(0,a.createVNode)(g,{modelValue:d.mode,"onUpdate:modelValue":t[1]||(t[1]=e=>d.mode=e),class:"search-bar-input top-1",onChange:t[2]||(t[2]=e=>m.changeModeList())},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(),(0,a.createBlock)(f,{key:1,label:1},{default:(0,a.withCtx)((()=>t[5]||(t[5]=[(0,a.createTextVNode)("未读")]))),_:1})),((0,a.openBlock)(),(0,a.createBlock)(f,{key:2,label:2},{default:(0,a.withCtx)((()=>t[6]||(t[6]=[(0,a.createTextVNode)("仅游客")]))),_:1})),((0,a.openBlock)(),(0,a.createBlock)(f,{key:3,label:3},{default:(0,a.withCtx)((()=>t[7]||(t[7]=[(0,a.createTextVNode)("禁用的")]))),_:1}))])),_:1},8,["modelValue"])]),t[10]||(t[10]=(0,a.createElementVNode)("div",{class:"clear"},null,-1)),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(v,{data:d.commentList,style:{width:"100%"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{prop:"commentId",label:"id",width:"60",align:"center"}),(0,a.createVNode)(V,{label:"昵称",width:"100"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(k,{effect:"dark",content:e.row.email,placement:"top"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",{innerHTML:e.row.name},null,8,r)])),_:2},1032,["content"])])),_:1}),(0,a.createVNode)(V,{label:"评论内容",width:"400"},{default:(0,a.withCtx)((e=>[(0,a.createElementVNode)("span",{innerHTML:m.removeATagsKeepText(e.row.comment)},null,8,s)])),_:1}),(0,a.createVNode)(V,{prop:"url",label:"url",width:"200"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(w,{type:"default",href:"javascript:;","data-clipboard-text":e.row.url,class:(0,a.normalizeClass)(["class-"+e.row.commentId,"cursor-pointer"]),underline:!1,onClick:t=>m.copyClipboard("class-"+e.row.commentId,e.row.url)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.row.url),1)])),_:2},1032,["data-clipboard-text","class","onClick"])])),_:1}),(0,a.createVNode)(V,{label:"所在日志",width:"80"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(w,{type:"primary",target:"_blank",onClick:t=>{m.setCommentUrl(e.row.article.fullUrl,e.row.article.articleId,e.row.commentId),m.gotoRead(e.row.commentId)}},{default:(0,a.withCtx)((()=>t[8]||(t[8]=[(0,a.createTextVNode)(" 查看 "),(0,a.createElementVNode)("i",{class:"fa ml-5 fa-arrow-right"},null,-1)]))),_:2},1032,["onClick"])])),_:1}),(0,a.createVNode)(V,{prop:"createAtBefore",label:"日期",width:"100"}),(0,a.createVNode)(V,{label:"操作",width:"200"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(p,{class:(0,a.normalizeClass)(1===e.row.isRead?"tag-radius tag-white":"tag-radius tag-blue"),onClick:t=>m.gotoRead(e.row.commentId)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(1===e.row.isRead?"已读":"未读"),1)])),_:2},1032,["class","onClick"]),(0,a.createVNode)(p,{class:(0,a.normalizeClass)(0===e.row.isDisable?"tag-radius tag-green":"tag-radius tag-orange"),onClick:t=>m.gotoDisable(e.row.commentId)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(0===e.row.isDisable?"已启用":"已禁用"),1)])),_:2},1032,["class","onClick"]),(0,a.createVNode)(p,{class:"tag-radius tag-red",onClick:t=>m.gotoDelete(e.row.commentId,e.row.name,e.row.comment)},{default:(0,a.withCtx)((()=>t[9]||(t[9]=[(0,a.createTextVNode)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,a.createVNode)(N,{onSizeChange:m.changeSize,onCurrentChange:m.changeCurrent,"current-page":d.params.page,"page-sizes":[12,24,100],"page-size":d.params.size,layout:"total, prev, next, pager,jumper,sizes",total:d.params.total,class:"table mt-20"},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])}},59106:function(e,t,o){o.d(t,{X:function(){return d}});var a=o(99601);const i={class:"lee-editor-textarea"},n=["onClick"],l=["onClick","src"],r={class:"dialog-common"},s=["innerHTML"],c={slot:"footer",class:"dialog-footer"};function d(e,t,o,d,m,u){const h=(0,a.resolveComponent)("el-image"),p=(0,a.resolveComponent)("ComponentLeeEditor"),C=(0,a.resolveComponent)("el-input"),f=(0,a.resolveComponent)("el-tab-pane"),g=(0,a.resolveComponent)("el-tabs"),V=(0,a.resolveComponent)("el-button"),k=(0,a.resolveComponent)("el-dialog"),w=(0,a.resolveComponent)("ComponentLeeEditorImport");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[m.previewImage?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0,src:m.previewImage,class:"dialog-image","preview-src-list":[m.previewImage]},null,8,["src","preview-src-list"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{onEmitClickMarkdown:u.clickMarkdown,onEmitClickPreviewHtml:u.previewHtml,onEmitClickImport:u.visibleImport,onEmitInsertAlbumCode:u.insertAlbumCode,onEmitInsertFriendCode:u.insertFriendCode,fileList:o.fileList},null,8,["onEmitClickMarkdown","onEmitClickPreviewHtml","onEmitClickImport","onEmitInsertAlbumCode","onEmitInsertFriendCode","fileList"]),(0,a.createVNode)(C,{type:"textarea",id:o.className,modelValue:m.contentValue,"onUpdate:modelValue":t[0]||(t[0]=e=>m.contentValue=e),maxlength:o.maxChar,rows:m.textareaRows,class:(0,a.normalizeClass)(o.className),placeholder:"请输入正文，### 支持markdown语法！",ref:"content","show-word-limit":"",onBlur:u.recordPosition,onKeyup:u.recordPosition,onFocus:u.removePaste,onPaste:u.textareaPaste},null,8,["id","modelValue","maxlength","rows","class","onBlur","onKeyup","onFocus","onPaste"]),(0,a.createVNode)(g,{modelValue:m.activeTab,"onUpdate:modelValue":t[2]||(t[2]=e=>m.activeTab=e),class:"comment-tabs mb-20",onTabClick:u.clickTab},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{label:"默认",name:"default",class:"tab-emotion"}),(0,a.createVNode)(f,{label:"●ω●",name:"emotion",class:"tab-emotion"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(m.emotion,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:e,class:"tab-emotion-one",onClick:t=>u.insertEmotion(e)},(0,a.toDisplayString)(e),9,n)))),128))])),_:1}),(0,a.createVNode)(f,{label:"阿鲁",name:"alu",class:"tab-emotion"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(m.alu,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("img",{key:e[0],class:"tab-alu-one",onClick:t=>u.insertAlu(e[0]),src:e[1],alt:""},null,8,l)))),128))])),_:1}),o.isPaste?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,label:"粘贴",name:"paste",class:"tab-emotion"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:"form-paste-area",id:"form-comment-item-paste",onClick:t[1]||(t[1]=e=>u.readyPaste())},(0,a.toDisplayString)(m.status.isUploading?"正在上传，请稍后…":"点击在这里 ctrl + v 粘贴截图"),1)])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1},8,["modelValue","onTabClick"]),(0,a.createElementVNode)("div",r,[(0,a.createVNode)(k,{title:"页面预览",modelValue:m.dialogPreviewVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>m.dialogPreviewVisible=e)},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:"dialog-markdown markdown-css",innerHTML:m.markdownContent},null,8,s),(0,a.createElementVNode)("span",c,[(0,a.createVNode)(V,{onClick:t[3]||(t[3]=e=>m.dialogPreviewVisible=!1)},{default:(0,a.withCtx)((()=>t[5]||(t[5]=[(0,a.createTextVNode)("关闭")]))),_:1})])])),_:1},8,["modelValue"])]),(0,a.createVNode)(w,{ref:"componentLeeEditorImport",onEmitInsertCode:u.importCode,visible:u.visibleImport},null,8,["onEmitInsertCode","visible"])])}},64870:function(e,t,o){o.d(t,{X:function(){return u}});var a=o(99601);const i={class:"dialog-large"},n={key:0,class:"content-album-image-list"},l={class:"form-image-list-select"},r=["onClick"],s=["onClick"],c={class:"dialog-footer"},d={class:"content-album-image-list"},m={key:0,class:"content-album-image-list"};function u(e,t,o,u,h,p){const C=(0,a.resolveComponent)("el-input"),f=(0,a.resolveComponent)("el-form-item"),g=(0,a.resolveComponent)("el-alert"),V=(0,a.resolveComponent)("el-image"),k=(0,a.resolveComponent)("el-form"),w=(0,a.resolveComponent)("el-button"),v=(0,a.resolveComponent)("el-dialog");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createVNode)(v,{modelValue:h.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>h.dialogVisible=e),title:"填写相册内容"},{footer:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",c,[(0,a.createVNode)(w,{onClick:t[1]||(t[1]=e=>h.dialogVisible=!1),size:"small"},{default:(0,a.withCtx)((()=>t[6]||(t[6]=[(0,a.createTextVNode)("关闭")]))),_:1}),(0,a.createVNode)(w,{type:"primary",onClick:t[2]||(t[2]=e=>p.insertCode()),disabled:0===h.notUseFileList.length||0===h.imageList.length},{default:(0,a.withCtx)((()=>t[7]||(t[7]=[(0,a.createTextVNode)(" 插入相册代码到正文 ")]))),_:1},8,["disabled"])]),(0,a.createElementVNode)("div",d,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(h.notUseFileList,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t,class:(0,a.normalizeClass)("content-album-one-image"+(e.isUse?" hide":""))},[(0,a.createVNode)(V,{src:e.url,fit:"cover",onClick:t=>p.clickImage(e.name,e.url)},null,8,["src","onClick"])],2)))),128))]),0===h.notUseFileList.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",m,[(0,a.createVNode)(g,{title:"没有未使用的图片可以插入了，先上传一些再试吧，或者从正文中删除一些图片代码",type:"warning",closable:!1})])):(0,a.createCommentVNode)("",!0)])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{model:h.form,"label-width":80},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{label:"相册标题",class:"mb-20"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{modelValue:h.title,"onUpdate:modelValue":t[0]||(t[0]=e=>h.title=e),type:"text",class:"width-300 mr-15",maxlength:"30"},null,8,["modelValue"])])),_:1}),0===h.imageList.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(g,{title:"在下面照片列表中选择照片",type:"warning",closable:!1})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",l,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(h.imageList,((e,o)=>((0,a.openBlock)(),(0,a.createBlock)(f,{label:"照片 #"+(o+1),key:o,class:"mb-20"},{default:(0,a.withCtx)((()=>[e.url?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,class:"content-album-one-preview","preview-src-list":[e.url],src:e.url,fit:"cover"},null,8,["preview-src-list","src"])):(0,a.createCommentVNode)("",!0),(0,a.withDirectives)((0,a.createVNode)(C,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t,type:"text",class:"width-300 mr-15",readonly:"readonly"},null,8,["modelValue","onUpdate:modelValue"]),[[a.vShow,!1]]),(0,a.createVNode)(C,{modelValue:e.desc,"onUpdate:modelValue":t=>e.desc=t,placeholder:"图片描述",type:"text",maxlength:"50",class:"width-600 ml-15"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createElementVNode)("span",{class:"tag-block tag-white ml-10 bottom-2 cursor-pointer",onClick:t=>p.moveUpImage(e.name)},t[4]||(t[4]=[(0,a.createElementVNode)("i",{class:"fa fa-arrow-up"},null,-1)]),8,r),(0,a.createElementVNode)("span",{class:"tag-block tag-red ml-10 bottom-2 cursor-pointer",onClick:t=>p.removeImage(e.name)},t[5]||(t[5]=[(0,a.createElementVNode)("i",{class:"fa fa-remove"},null,-1)]),8,s)])),_:2},1032,["label"])))),128))])])),_:1},8,["model"])])),_:1},8,["modelValue"])])}},65584:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(78947),n=o(3379),l=o(36798),r=e([n]);n=(r.then?(await r)():r)[0],t.A={components:{},props:[],data(){return{commonConstant:i.A,dialogImportVisible:!1,importTextareaValue:"",parseTextareaValue:"",fileList:[],loading:!1}},created(){},mounted(){},setup(e,t){return{emitInsertCode:(e,o)=>{t.emit("emitInsertCode",e,o)}}},methods:{requestImportParseContent(){this.loading=!0,(0,n.gw)(this.importTextareaValue).then((e=>{const t=e.data.data;this.parseTextareaValue=t.content,this.fileList=t.fileList,this.loading=!1}))},insertImportCode(){this.parseTextareaValue?(this.dialogImportVisible=!1,this.emitInsertCode(this.parseTextareaValue,this.fileList)):(0,l.R8)("你还没粘贴并导入内容")}},destroyed(){}},a()}catch(e){a(e)}}))},67752:function(e,t,o){o.a(e,(async function(e,a){try{o(44114);var i=o(81387),n=o(99601),l=o(52827),r=o(78947),s=o(43723),c=o.n(s),d=o(164),m=o(1009),u=o(37741),h=o(36798),p=o(93893),C=o(52004),f=e([m,u,C]);[m,u,C]=f.then?(await f)():f,t.A={name:"CommentView",data(){return{commonConstant:r.A,path:"",commentList:[],mode:(0,n.ref)([]),params:{articleId:this.$route.query.articleId?parseInt(this.$route.query.articleId):0,page:this.$route.query.page?parseInt(this.$route.query.page):1,size:12,keyword:this.$route.query.keyword?this.$route.query.keyword:"",modeList:""},config:{},pageUrl:"",pageNum:0}},created(){""!==(0,l.P)("keyword")&&(this.params.keyword=(0,l.P)("keyword")),""!==(0,l.P)("page")&&(this.params.page=parseInt((0,l.P)("page"))),""!==(0,l.P)("size")&&(this.params.size=parseInt((0,l.P)("size"))),""!==(0,l.P)("modeList")&&(this.params.modeList=(0,l.P)("modeList"));const e=(0,i.rd)();(0,n.watch)((()=>e.currentRoute.value.path),(()=>{this.path=e.currentRoute.value.path,this.init()}),{immediate:!0,deep:!0})},mounted(){},methods:{init(){this.requestUserConfig(),"/comment"===this.path&&this.requestList()},requestUserConfig(){(0,C.U3)().then((e=>{this.config=e.data.data}))},selectTab(e){this.path=e,this.$router.push({path:e})},requestList(){this.params.modeList=this.mode.join(","),(0,m.mk)(this.params).then((e=>{this.commentList=e.data.data.records,this.params.page=e.data.data.current,this.params.size=e.data.data.size,this.params.total=e.data.data.total}))},async setCommentUrl(e,t,o){await this.requestCommentPage(t);const a="#pageNum="+this.pageNum+"&commentId="+o;this.pageUrl=this.config.url+e+a,(0,p.C)()?window.open(this.pageUrl):location.href=this.pageUrl},removeATagsKeepText(e){return(0,u.N1)(e)},changeSize(e){this.params.size=e,(0,l.i)("size",this.params.size)},changeCurrent(e){this.params.page=e,(0,l.i)("page",this.params.page)},changeModeList(){(0,l.i)("modeList",this.params.modeList)},changeKeyword(){(0,l.i)("keyword",this.params.keyword)},resetParams(){this.params.keyword="",this.params.size=12,this.params.page=1,this.params.modeList="",this.mode=(0,n.ref)([]),window.location.hash=""},gotoDisable(e){(0,m.ag)(e).then((e=>{(0,h.kX)(e.data.msg),this.requestList()}))},async requestCommentPage(e){await(0,m.zS)(e).then((e=>{this.pageNum=e.data.data}))},gotoRead(e){(0,m.KC)(e).then((e=>{!1===e.data.data&&(0,h.kX)(e.data.msg),this.requestList()}))},gotoDelete(e,t,o){d.s.confirm("确定删除 ["+t+"] 的评论：“"+o+"”？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,m.tD)(e).then((e=>{(0,h.kX)(e.data.msg),this.requestList()}))})).catch((()=>{}))},copyClipboard(e,t){const o=new(c())("."+e);o.on("success",(()=>{(0,h.kX)("复制网址成功："+t),o.destroy()})),o.on("error",(()=>{(0,h.z3)("复制失败"),o.destroy()}))}}},a()}catch(e){a(e)}}))},72922:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(49207),n=o(41383),l=o(71241),r=e([n]);n=(r.then?(await r)():r)[0];const s=(0,l.A)(n.A,[["render",i.X]]);t.A=s,a()}catch(e){a(e)}}))},74952:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(51383),n=o(15042),l=o(99601),r=o(52004),s=e([i,n,r]);[i,n,r]=s.then?(await s)():s,t.A={props:["fileList"],components:{ContentAlbumView:i.A,ContentFriendView:n.A},data(){return{config:{},isFreeVersion:!1}},mounted(){this.requestUserConfig()},setup(e,t){const o=(0,l.ref)(null),a=(0,l.ref)(null);return{emitClickMarkdown:e=>{t.emit("emitClickMarkdown",e)},emitClickPreviewHtml:e=>{t.emit("emitClickPreviewHtml",e)},emitClickImport:e=>{t.emit("emitClickImport",e)},contentAlbumView:o,contentFriendView:a,openAlbumDialog:e=>{o.value.openDialog(e)},openFriendDialog:e=>{a.value.openDialog(e)},emitInsertFriendCode:e=>{t.emit("emitInsertFriendCode",e)},emitInsertAlbumCode:e=>{t.emit("emitInsertAlbumCode",e)}}},methods:{clickMarkdown(e){const t="[---{1}---]";switch(e){case"header":this.emitClickMarkdown("### "+t+" ###");break;case"bold":this.emitClickMarkdown("**"+t+"**");break;case"italic":this.emitClickMarkdown("***"+t+"***");break;case"strikethrough":this.emitClickMarkdown("~~");break;case"tag":this.emitClickMarkdown("`"+t+"`");break;case"line":this.emitClickMarkdown("---\n");break;case"image":this.emitClickMarkdown("![超链接名]("+t+")\n");break;case"link":this.emitClickMarkdown("[图片名]("+t+")\n");break;case"bili":this.emitClickMarkdown("[bili "+t+" /bili]\n");break;case"audio":this.emitClickMarkdown("[audio "+t+" /audio]\n");break;case"list":this.emitClickMarkdown("1. \n2. \n3. \n");break;case"table":this.emitClickMarkdown("表头|表头|表头\n---|:--:|---:\n内容|内容|内容\n内容|内容|内容");break;case"checked":this.emitClickMarkdown("- [x] "+t);break;case"check":this.emitClickMarkdown("- [ ] "+t);break;case"area":this.emitClickMarkdown("```\n"+t+"\n```\n");break;case"html":this.emitClickMarkdown("[html]\n"+t+"\n[/html]");break;case"preview":this.emitClickPreviewHtml();break;case"import":this.emitClickImport()}},insertFriendCode(e){this.emitInsertFriendCode(e)},insertAlbumCode(e){this.emitInsertAlbumCode(e)},requestUserConfig(){(0,r.U3)().then((e=>{this.config=e.data.data,this.isFreeVersion=this.config.isFreeVersion}))}}},a()}catch(e){a(e)}}))},75538:function(e,t,o){o.a(e,(async function(e,a){try{o.d(t,{A:function(){return i.A}});var i=o(31983),n=e([i]);i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}}))},77652:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(94149),n=o(44893),l=o(71241),r=e([n]);n=(r.then?(await r)():r)[0];const s=(0,l.A)(n.A,[["render",i.X]]);t.A=s,a()}catch(e){a(e)}}))},83006:function(e,t,o){o.a(e,(async function(e,a){try{var i=o(57742),n=o(98459),l=o(71241),r=e([n]);n=(r.then?(await r)():r)[0];const s=(0,l.A)(n.A,[["render",i.X]]);t.A=s,a()}catch(e){a(e)}}))},94149:function(e,t,o){o.d(t,{X:function(){return l}});var a=o(99601);const i={class:"dialog-common"},n={class:"dialog-footer"};function l(e,t,o,l,r,s){const c=(0,a.resolveComponent)("el-input"),d=(0,a.resolveComponent)("el-button"),m=(0,a.resolveComponent)("el-dialog"),u=(0,a.resolveDirective)("loading");return(0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createVNode)(m,{modelValue:r.dialogImportVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>r.dialogImportVisible=e),title:"导入粘贴区"},{footer:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",n,[(0,a.createVNode)(d,{onClick:t[1]||(t[1]=e=>r.dialogImportVisible=!1),size:"small"},{default:(0,a.withCtx)((()=>t[6]||(t[6]=[(0,a.createTextVNode)("关闭")]))),_:1}),(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(d,{type:"primary",onClick:t[2]||(t[2]=e=>s.requestImportParseContent())},{default:(0,a.withCtx)((()=>t[7]||(t[7]=[(0,a.createTextVNode)(" 解析文本 ")]))),_:1})),[[u,r.loading]]),(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(d,{type:"primary",class:"ml-20",onClick:t[3]||(t[3]=e=>s.insertImportCode()),disabled:!r.parseTextareaValue},{default:(0,a.withCtx)((()=>t[8]||(t[8]=[(0,a.createTextVNode)(" 导入并返回 ")]))),_:1},8,["disabled"])),[[u,r.loading]]),r.parseTextareaValue?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,type:"textarea",id:"importTextarea",modelValue:r.parseTextareaValue,"onUpdate:modelValue":t[4]||(t[4]=e=>r.parseTextareaValue=e),maxlength:3e4,rows:20,class:(0,a.normalizeClass)("article-form-content mt-20"),placeholder:"格式化后的正文内容","show-word-limit":""},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0)])])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{type:"textarea",id:"importTextarea",modelValue:r.importTextareaValue,"onUpdate:modelValue":t[0]||(t[0]=e=>r.importTextareaValue=e),maxlength:3e4,rows:20,class:(0,a.normalizeClass)("article-form-content"),placeholder:"请输在这里粘贴正文，ctrl + v 粘贴",ref:"importTextarea","show-word-limit":""},null,8,["modelValue"])])),_:1},8,["modelValue"])])}},95729:function(e,t,o){o.a(e,(async function(e,a){try{o(18111),o(22489);var i=o(72922),n=o(52004),l=o(7121),r=o(37490),s=o(44528),c=o(78947),d=o(99601),m=o(29236),u=o(93893),h=o(67636),p=o(36798),C=o(77652),f=e([i,n,C]);[i,n,C]=f.then?(await f)():f,t.A={components:{ComponentLeeEditorImport:C.A,ComponentLeeEditor:i.A},props:["content","fileList","maxChar","rows","isPaste","uploadUrl","className","contentType"],model:{prop:"value",event:"updateContent"},data(){return{commonConstant:c.A,activeTab:"default",markdownContent:"",status:{isUploading:!1},dialogPreviewVisible:!1,emotion:[],alu:[],inputIndex:0,contentValue:"",textareaRows:this.rows,itId:0,previewImage:"",dialogImportVisible:!1}},setup(e,t){const o=(0,d.ref)(null);return{emitGetImageList:()=>{t.emit("emitGetImageList")},emitUpdateContent:e=>{t.emit("emitUpdateContent",e)},emitSetFileList:e=>{t.emit("emitSetFileList",e)},componentLeeEditorImport:o,openImportDialog:e=>{o.value.dialogImportVisible=e}}},created(){(0,d.watch)((()=>this.contentValue),(e=>{this.emitUpdateContent(e)}),{immediate:!0,deep:!0}),(0,d.watch)((()=>this.content),(()=>{this.contentValue=this.content}),{immediate:!0,deep:!0}),(0,d.watch)((()=>this.fileList),(()=>{h.A.emit(c.A.BUS_INPUT_IMAGE)}),{immediate:!0,deep:!0})},mounted(){this.isPcWidth()||(this.textareaRows=13);let e=this;h.A.on(c.A.BUS_INPUT_IMAGE,(function(t){if(t){const o=e.fileList.filter((e=>e.name===t));o[0]&&(e.previewImage=o[0].url)}else e.previewImage=""})),this.$nextTick((()=>{(0,l.Lh)(this.className,c.A.BUS_INPUT_IMAGE)})),r.X.getInstance(this.status,"isUploading"),this.itId=setInterval((function(){e.contentValue&&e.contentValue.trim().length>0&&(0,m.k3)({name:e.contentType,content:e.contentValue})}),5e3),window.addEventListener("keydown",(function(t){"s"!==t.key&&"S"!==t.key||!(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)||(t.preventDefault(),(0,m.k3)({name:e.contentType,content:e.contentValue}),(0,p.kX)("已保存本地"))}),!1),this.clearExpireStore()},methods:{clickTab(){switch(this.activeTab){case"paste":this.readyPaste(),this.emitGetImageList();break;case"emotion":this.requestEmotionText();break;case"alu":this.requestEmotionAlu()}},recordPosition(e){this.inputIndex=e.srcElement.selectionStart,(0,l.aH)()},removePaste(){r.X.getInstance().sharePasteInstance.removeListener()},insertInput(e){const t="[---{1}---]";let o=this.getSelectTextIndex(),a=o[1],i=o[0],n=o[2];if(this.contentValue)if(a)e=e.replace(t,a),this.contentValue=this.contentValue.slice(0,i)+""+e+this.contentValue.slice(n);else{let o=this.inputIndex;e=e.replaceAll(t,""),this.contentValue=this.contentValue.slice(0,o)+""+e+this.contentValue.slice(o)}else e=e.replaceAll(t,""),this.contentValue=e;this.setFocusIndex(e,i)},getSelectTextIndex(){const e=document.getElementById(this.className);return window.getSelection?void 0!==e.selectionStart&&void 0!==e.selectionEnd?[e.selectionStart,e.value.substring(e.selectionStart,e.selectionEnd),e.selectionEnd]:[e.selectionStart,"",e.selectionEnd]:[e.selectionStart,document.selection.createRange().text,e.selectionEnd]},setFocusIndex(e,t){const o=document.getElementById(this.className);o.focus(),this.$nextTick((()=>{o.setSelectionRange(t+e.length,t+e.length)}))},previewHtml(){this.markdownContent=(0,s.w)(this.contentValue),this.markdownContent=(0,l.dE)(this.markdownContent,this.fileList,"name","url"),this.markdownContent=(0,l.OZ)(this.markdownContent),this.markdownContent=(0,l.hS)(this.markdownContent,this.alu),this.dialogPreviewVisible=!0},importCode(e,t){this.contentValue=e,this.emitSetFileList(t)},visibleImport(){this.openImportDialog(!0)},requestEmotionText(){(0,n.ns)().then((e=>{this.emotion=e.data.data.emotion}))},requestEmotionAlu(){(0,n.AR)().then((e=>{this.alu=e.data.data.alu}))},insertEmotion(e){this.insertInput(e)},insertAlu(e){this.insertInput(e)},insertAlbumCode(e){this.insertInput(e)},insertFriendCode(e){this.insertInput(e)},readyPaste(){const e=this.uploadUrl,t={};t[c.A.SESSION_TOKEN]=(0,m.KA)({name:c.A.SESSION_TOKEN});let o=this;r.X.getInstance().sharePasteInstance.init("form-paste-area","file",e,t,(function(){0===r.X.getInstance().code?(o.emitGetImageList(),o.readyPaste()):(0,p.R8)("上传截图失败")}))},clickMarkdown(e){this.insertInput(e)},isPcWidth(){return(0,u.C)()},clearExpireStore(){setTimeout((function(){(0,m.eP)(c.A.STORE_CONTENT_NOTE,86400),(0,m.eP)(c.A.STORE_CONTENT_ARTICLE,86400)}),1e3)},clearClipboard(){console.log("清空剪切板"),navigator.clipboard.writeText("")},textareaPaste(e){this.recordPosition(e);const t=e.clipboardData.getData("text/plain");if(-1!==t.indexOf("player.bilibili.com/player.html")){e.preventDefault();let o=(0,l.d5)(t);this.insertInput(o)}}},destroyed(){clearInterval(this.itId),r.X.getInstance().sharePasteInstance.removeListener()}},a()}catch(e){a(e)}}))},98459:function(e,t,o){o.a(e,(async function(e,a){try{o.d(t,{A:function(){return i.A}});var i=o(67752),n=e([i]);i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}}))}}]);