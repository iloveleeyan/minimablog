"use strict";(self.webpackChunknote_star_cn=self.webpackChunknote_star_cn||[]).push([[1744],{14381:function(e,t,a){a.a(e,(async function(e,o){try{var l=a(67612),r=a(62796),i=a(71241),s=e([r]);r=(s.then?(await s)():s)[0];const n=(0,i.A)(r.A,[["render",l.X]]);t.A=n,o()}catch(e){o(e)}}))},15855:function(e,t,a){a.a(e,(async function(e,o){try{a.d(t,{A:function(){return l.A}});var l=a(29498),r=e([l]);l=(r.then?(await r)():r)[0],o()}catch(e){o(e)}}))},27351:function(e,t,a){a.d(t,{X:function(){return u}});var o=a(99601);const l={class:"main-config"},r={class:"form-intro"},i={class:"user-avatar-list"},s={class:"dialog-common"},n={class:"dialog-footer"},d={class:"dialog-common"},c={class:"dialog-footer"};function u(e,t,a,u,m,p){const g=(0,o.resolveComponent)("ConfigHeaderView"),h=(0,o.resolveComponent)("el-divider"),f=(0,o.resolveComponent)("el-input"),V=(0,o.resolveComponent)("el-form-item"),N=(0,o.resolveComponent)("el-option"),w=(0,o.resolveComponent)("el-select"),v=(0,o.resolveComponent)("el-link"),C=(0,o.resolveComponent)("el-upload"),x=(0,o.resolveComponent)("el-image"),k=(0,o.resolveComponent)("el-switch"),b=(0,o.resolveComponent)("el-button"),_=(0,o.resolveComponent)("el-form"),E=(0,o.resolveComponent)("el-dialog"),A=(0,o.resolveComponent)("el-checkbox"),y=(0,o.resolveDirective)("loading");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(g,{title:m.title},null,8,["title"]),(0,o.createElementVNode)("div",l,[(0,o.createVNode)(_,{model:m.config,"label-width":100},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{"content-position":"left",class:"mt-10"},{default:(0,o.withCtx)((()=>t[41]||(t[41]=[(0,o.createTextVNode)("主要设置")]))),_:1}),(0,o.createVNode)(V,{label:"站名",prop:"name",error:m.error.site},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.site,"onUpdate:modelValue":t[0]||(t[0]=e=>m.config.site=e),class:"input-tag width-200"},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"网站域名",prop:"name",error:m.error.domain},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.domain,"onUpdate:modelValue":t[1]||(t[1]=e=>m.config.domain=e),class:"input-tag width-200",placeholder:"例如 baidu.com",readonly:"readonly",onKeyup:t[2]||(t[2]=e=>p.trimDomain())},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"网站LOGO",class:"flex-row"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.homeIcon,"onUpdate:modelValue":t[3]||(t[3]=e=>m.config.homeIcon=e),class:(0,o.normalizeClass)("input-tag "+(p.isPcWidth()?"width-150":"width-100"))},null,8,["modelValue","class"]),(0,o.createVNode)(w,{modelValue:m.homeIcon,"onUpdate:modelValue":t[4]||(t[4]=e=>m.homeIcon=e),class:(0,o.normalizeClass)((p.isPcWidth()?"width-150":"width-100")+" ml-15"),placeholder:"选一个",onChange:t[5]||(t[5]=e=>m.config.homeIcon=m.homeIcon)},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(m.iconList,(e=>((0,o.openBlock)(),(0,o.createBlock)(N,{class:"config-icon-height",key:e,label:e,value:e},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("i",{class:(0,o.normalizeClass)("fa fa-3x "+e)},null,2)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue","class"]),(0,o.createVNode)(v,{type:"primary",class:"ml-10",href:"https://fontawesome.com.cn/v4/icons",target:"_blank"},{default:(0,o.withCtx)((()=>t[42]||(t[42]=[(0,o.createTextVNode)("fa图标库")]))),_:1})])),_:1}),(0,o.createVNode)(V,{label:"座右铭",prop:"motto",error:m.error.motto},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.motto,"onUpdate:modelValue":t[6]||(t[6]=e=>m.config.motto=e),class:"input-tag width-600"},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"网站副标题",prop:"auxTitle",error:m.error.auxTitle},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.auxTitle,"onUpdate:modelValue":t[7]||(t[7]=e=>m.config.auxTitle=e),class:"input-tag width-400"},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"站长名字",prop:"name",error:m.error.name},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.name,"onUpdate:modelValue":t[8]||(t[8]=e=>m.config.name=e),class:"input-tag width-200"},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"头像说的话",prop:"intro",error:m.error.intro},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.intro,"onUpdate:modelValue":t[9]||(t[9]=e=>m.config.intro=e),class:"input-tag width-600"},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"邮箱",prop:"email",error:m.error.email},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.email,"onUpdate:modelValue":t[10]||(t[10]=e=>m.config.email=e),class:"input-tag width-400"},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"LOGO图"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{class:"square-uploader mt-0",action:m.avatarLogoUrl,headers:p.getHeader(),accept:"image/*","show-file-list":!1,"on-success":p.uploadLogoSuccess,"on-error":p.uploadLogoError},{default:(0,o.withCtx)((()=>t[43]||(t[43]=[(0,o.createElementVNode)("i",{class:"fa fa-upload square-uploader-icon"},null,-1)]))),_:1},8,["action","headers","on-success","on-error"]),m.config.logoUrl?((0,o.openBlock)(),(0,o.createBlock)(x,{key:0,src:m.config.logoUrl,class:(0,o.normalizeClass)("ml-20 "+(p.isPcWidth()?"":"max-width-100"))},null,8,["src","class"])):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createVNode)(V,{label:"使用LOGO图"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{modelValue:m.config.isLogoUseImage,"onUpdate:modelValue":t[11]||(t[11]=e=>m.config.isLogoUseImage=e),"active-text":"顶部使用LOGO图","inactive-text":"顶部使用文字LOGO","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{class:"tag-block-large tag-green",onClick:t[12]||(t[12]=e=>p.requestUpdate())},{default:(0,o.withCtx)((()=>t[44]||(t[44]=[(0,o.createElementVNode)("i",{class:"fa fa-save"},null,-1),(0,o.createTextVNode)(" 保存修改")]))),_:1})])),_:1}),(0,o.createVNode)(h,{"content-position":"left",class:"mt-60"},{default:(0,o.withCtx)((()=>t[45]||(t[45]=[(0,o.createTextVNode)("其他设置")]))),_:1}),(0,o.createVNode)(V,{label:"字符表情",prop:"emotionList",error:m.error.emotionList},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.emotionList,"onUpdate:modelValue":t[13]||(t[13]=e=>m.config.emotionList=e),type:"textarea",rows:"8",class:"input-tag width-200"},null,8,["modelValue"])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"备案代码",prop:"recordNumber",error:m.error.recordNumber},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.recordNumber,"onUpdate:modelValue":t[14]||(t[14]=e=>m.config.recordNumber=e),type:"textarea",rows:"4",class:"input-tag width-600",placeholder:"支持html代码",maxlength:"8000","show-word-limit":!0},null,8,["modelValue"]),(0,o.createElementVNode)("span",r,[(0,o.createElementVNode)("a",{onClick:t[15]||(t[15]=e=>p.loadRecordNumber())},"加载模板")])])),_:1},8,["error"]),(0,o.createVNode)(V,{label:"百度联盟广告"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{modelValue:m.config.isBaiduAdvertisement,"onUpdate:modelValue":t[16]||(t[16]=e=>m.config.isBaiduAdvertisement=e),"active-text":"开启百度联盟广告","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"百度联盟id"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.baiduAdvertisementCode,"onUpdate:modelValue":t[17]||(t[17]=e=>m.config.baiduAdvertisementCode=e),class:"input-tag width-200",placeholder:"如：u700xxxx"},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"谷歌广告"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{modelValue:m.config.isGoogleAdvertisement,"onUpdate:modelValue":t[18]||(t[18]=e=>m.config.isGoogleAdvertisement=e),"active-text":"开启谷歌广告","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"谷歌广告代码"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.googleAdvertisementCode,"onUpdate:modelValue":t[19]||(t[19]=e=>m.config.googleAdvertisementCode=e),type:"textarea",rows:"4",class:"input-tag width-600",placeholder:m.isFreeVersion?"免费版不支持谷歌广告功能":"<script async src='https://pagead2.googlesyndication.com/pagead ...",maxlength:"300",readonly:m.isFreeVersion},null,8,["modelValue","placeholder","readonly"])])),_:1}),(0,o.createVNode)(V,{label:"评论验证码"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{modelValue:m.config.isCommentCaptcha,"onUpdate:modelValue":t[20]||(t[20]=e=>m.config.isCommentCaptcha=e),"active-text":"发表评论要验证码","inactive-text":"关闭评论验证码","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"备案模式"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{modelValue:m.config.isRegistrationMode,"onUpdate:modelValue":t[21]||(t[21]=e=>m.config.isRegistrationMode=e),"active-text":"开启备案模式","inactive-text":"关闭","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"导出页面"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{modelValue:m.config.isDownloadSite,"onUpdate:modelValue":t[22]||(t[22]=e=>m.config.isDownloadSite=e),"active-text":"打开首页顶部导出整站页面按钮","inactive-text":"关闭顶部导出按钮","active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"个站网站id"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.config.storeWebSiteId,"onUpdate:modelValue":t[23]||(t[23]=e=>m.config.storeWebSiteId=e),class:"input-tag width-100",type:"number",onKeyup:t[24]||(t[24]=e=>m.config.storeWebSiteId=m.config.storeWebSiteId?m.config.storeWebSiteId.replace(/[^0-9]/g,""):"")},null,8,["modelValue"]),t[46]||(t[46]=(0,o.createElementVNode)("span",{class:"form-intro"},[(0,o.createTextVNode)("你在 "),(0,o.createElementVNode)("a",{href:"https://storeweb.cn",target:"_blank"},"个站商店"),(0,o.createTextVNode)(" 上的网站id，用于友链页面")],-1))])),_:1}),(0,o.createCommentVNode)("",!0),(0,o.createVNode)(V,{label:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{class:"tag-block-large tag-green mb-10",onClick:t[26]||(t[26]=e=>p.requestUpdate())},{default:(0,o.withCtx)((()=>t[47]||(t[47]=[(0,o.createElementVNode)("i",{class:"fa fa-save"},null,-1),(0,o.createTextVNode)(" 保存修改")]))),_:1}),(0,o.createVNode)(b,{class:"tag-block-large tag-white mb-10 ml-20",onClick:t[27]||(t[27]=e=>m.dialogPassword=!0)},{default:(0,o.withCtx)((()=>t[48]||(t[48]=[(0,o.createElementVNode)("i",{class:"fa fa-key"},null,-1),(0,o.createTextVNode)(" 修改密码")]))),_:1}),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(b,{class:"tag-block-large tag-white mb-10 ml-20",onClick:t[28]||(t[28]=e=>p.showExport())},{default:(0,o.withCtx)((()=>t[49]||(t[49]=[(0,o.createElementVNode)("i",{class:"fa fa-file-excel-o"},null,-1),(0,o.createTextVNode)(" 一键导出数据")]))),_:1})),[[y,m.loadingExport]])])),_:1}),(0,o.createVNode)(h,{"content-position":"left",class:"mt-60"},{default:(0,o.withCtx)((()=>t[50]||(t[50]=[(0,o.createTextVNode)("图片设置")]))),_:1}),(0,o.createVNode)(V,{label:"头像管理",class:"mt-40"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C,{class:"square-uploader",action:m.avatarUploadUrl,headers:p.getHeader(),accept:"image/*","show-file-list":!1,"on-success":p.uploadAvatarSuccess,"on-error":p.uploadAvatarError},{default:(0,o.withCtx)((()=>t[51]||(t[51]=[(0,o.createElementVNode)("i",{class:"fa fa-upload square-uploader-icon"},null,-1)]))),_:1},8,["action","headers","on-success","on-error"])])),_:1}),(0,o.createVNode)(V,{label:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{class:"tag-block-large tag-green",onClick:t[29]||(t[29]=e=>m.useAvatarMode=!m.useAvatarMode)},{default:(0,o.withCtx)((()=>t[52]||(t[52]=[(0,o.createElementVNode)("i",{class:"fa fa-key"},null,-1),(0,o.createTextVNode)(" 设置使用 ")]))),_:1})])),_:1}),(0,o.createVNode)(V,{label:""},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",i,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(m.avatarList,((e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:a,class:"user-avatar-one"},[(0,o.createVNode)(x,{src:e.url,fit:"cover","preview-src-list":[e.url]},null,8,["src","preview-src-list"]),m.deleteAvatarMode?((0,o.openBlock)(),(0,o.createBlock)(b,{key:0,class:"user-avatar-one-delete tag-block tag-red",onClick:t=>p.requestDeleteAvatar(e.image)},{default:(0,o.withCtx)((()=>t[53]||(t[53]=[(0,o.createTextVNode)(" 删除 ")]))),_:2},1032,["onClick"])):(0,o.createCommentVNode)("",!0),m.useAvatarMode?((0,o.openBlock)(),(0,o.createBlock)(b,{key:1,class:"user-avatar-one-delete tag-block tag-orange",onClick:t=>p.requestSetDefaultAvatar(e.image)},{default:(0,o.withCtx)((()=>t[54]||(t[54]=[(0,o.createTextVNode)(" 使用 ")]))),_:2},1032,["onClick"])):(0,o.createCommentVNode)("",!0),e.isUse?((0,o.openBlock)(),(0,o.createBlock)(b,{key:2,class:"user-avatar-one-delete tag-block tag-green"},{default:(0,o.withCtx)((()=>t[55]||(t[55]=[(0,o.createTextVNode)(" 使用中 ")]))),_:1})):(0,o.createCommentVNode)("",!0)])))),128))])])),_:1}),(0,o.createVNode)(V,{label:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{class:"tag-block-large tag-red",onClick:t[30]||(t[30]=e=>m.deleteAvatarMode=!m.deleteAvatarMode)},{default:(0,o.withCtx)((()=>t[56]||(t[56]=[(0,o.createElementVNode)("i",{class:"fa fa-remove"},null,-1),(0,o.createTextVNode)(" 删除头像 ")]))),_:1})])),_:1})])),_:1},8,["model"]),(0,o.createElementVNode)("div",s,[(0,o.createVNode)(E,{modelValue:m.dialogPassword,"onUpdate:modelValue":t[35]||(t[35]=e=>m.dialogPassword=e),title:"修改密码"},{footer:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",n,[(0,o.createVNode)(b,{onClick:t[34]||(t[34]=e=>m.dialogPassword=!1)},{default:(0,o.withCtx)((()=>t[57]||(t[57]=[(0,o.createTextVNode)("关闭")]))),_:1}),(0,o.createVNode)(b,{type:"primary",onClick:p.requestUpdatePassword},{default:(0,o.withCtx)((()=>t[58]||(t[58]=[(0,o.createTextVNode)(" 确定修改 ")]))),_:1},8,["onClick"])])])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(_,{model:m.pass,"label-width":60},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(V,{label:"旧密码",prop:"password"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.pass.password,"onUpdate:modelValue":t[31]||(t[31]=e=>m.pass.password=e),type:"password",class:"input-tag width-200"},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"新密码",prop:"name"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.pass.passwordNew,"onUpdate:modelValue":t[32]||(t[32]=e=>m.pass.passwordNew=e),type:"password",class:"input-tag width-200"},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(V,{label:"新密码",prop:"name"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{modelValue:m.pass.passwordNewAgain,"onUpdate:modelValue":t[33]||(t[33]=e=>m.pass.passwordNewAgain=e),type:"password",class:"input-tag width-200"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])]),(0,o.createElementVNode)("div",d,[(0,o.createVNode)(E,{modelValue:m.dialogExport,"onUpdate:modelValue":t[40]||(t[40]=e=>m.dialogExport=e),title:"选择导出选项"},{footer:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",c,[(0,o.createVNode)(b,{onClick:t[38]||(t[38]=e=>m.dialogExport=!1),size:"small"},{default:(0,o.withCtx)((()=>t[59]||(t[59]=[(0,o.createTextVNode)("关闭")]))),_:1}),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(b,{type:"primary",onClick:t[39]||(t[39]=e=>p.requestExport())},{default:(0,o.withCtx)((()=>t[60]||(t[60]=[(0,o.createTextVNode)(" 导出 ")]))),_:1})),[[y,m.loadingExport]])])])),default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",null,[(0,o.createVNode)(A,{modelValue:m.exportParams.isImage,"onUpdate:modelValue":t[36]||(t[36]=e=>m.exportParams.isImage=e),label:"导出所有图片（图片可能很多）",size:"large"},null,8,["modelValue"]),(0,o.createVNode)(A,{modelValue:m.exportParams.isStatistic,"onUpdate:modelValue":t[37]||(t[37]=e=>m.exportParams.isStatistic=e),label:"导出所有访客记录（数据文件较大）",size:"large"},null,8,["modelValue"])])])),_:1},8,["modelValue"])])])])}},29498:function(e,t,a){a.a(e,(async function(e,o){try{var l=a(440),r=a(81387),i=a(99601),s=a(82133),n=a(52004),d=a(78947),c=a(29236),u=a(36798),m=a(61317),p=a(93893),g=a(164),h=a(23008),f=a(10788),V=e([n,h]);[n,h]=V.then?(await V)():V,t.A={name:"ConfigView",components:{ConfigHeaderView:l.A},data(){return{commonConstant:d.A,path:"",title:"站长设置",config:{},pass:{password:"",passwordNew:"",passwordNewAgain:""},visibleCreateSkin:!1,visibleDeleteSkin:!1,iconList:["fa-star","fa-coffee","fa-photo","fa-tags","fa-calendar","fa-envelope-square","fa-gift","fa-heart","fa-laptop","fa-pencil-square-o"],homeIcon:"",error:{},avatarList:[],rules:{site:[{required:!0,message:"请输入网站名字",trigger:"blur"}],domain:[{required:!0,message:"请输入网站域名",trigger:"blur"}],name:[{required:!0,message:"请输入站长名字",trigger:"blur"}],intro:[{required:!0,message:"请输入简介/职业",trigger:"blur"}],motto:[{required:!0,message:"请输入座右铭",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}]},avatarUploadUrl:n.aV,avatarLogoUrl:n.ao,selectFile:{},deleteAvatarMode:!1,useAvatarMode:!1,dialogPassword:!1,dialogExport:!1,exportParams:{isImage:!0,isStatistic:!1},feedUrl:"",loadingExport:!1,isFreeVersion:!1}},created(){const e=(0,r.rd)();(0,i.watch)((()=>e.currentRoute.value.path),(()=>{this.path=e.currentRoute.value.path,this.init()}),{immediate:!0,deep:!0})},mounted(){},methods:{init(){this.requestUserConfig(),this.requestFeedUrl(),this.requestAvatarList()},trimDomain(){this.config.domain=this.config.domain.replaceAll("https://",""),this.config.domain=this.config.domain.replaceAll("http://",""),this.config.domain=this.config.domain.replaceAll("/",""),this.config.domain=this.config.domain.trim()},requestUserConfig(){(0,n.U3)().then((e=>{this.config=e.data.data,this.homeIcon=this.config.homeIcon,this.isFreeVersion=this.config.isFreeVersion,this.config.logoUrl&&(this.config.logoUrl+="?"+Math.random())}))},requestFeedUrl(){(0,n.qs)().then((e=>{this.feedUrl=e.data.data}))},requestExport(){this.loadingExport=!0;const e="导出「"+this.config.site+"」的整站Excel数据.zip";(0,h.o)(this.exportParams).then((t=>{(0,u.kX)("导出整站数据成功"),(0,f.saveAs)(t.data,e),this.loadingExport=!1,this.dialogExport=!1}))},requestUpdate(){(0,i.reactive)(new s.default(this.rules)).validate(this.config,{firstFields:!0}).then((()=>{(0,n.Wc)(this.config).then((e=>{let t=e.data;if(0===t.code)(0,u.kX)(e.data.msg);else if(t.data){let e=t.data.form;for(const t in e)this.error[e[t][0]]=e[t][1]}this.requestUserConfig()}))})).catch((({errors:e})=>{if(e.length>0)for(let t in e)this.error[e[t].field]=e[t].message}))},showExport(){(0,h.u)().then((e=>{const t=e.data.data;0!==t?g.s.confirm("今天你还能导出 "+t+" 次，确定导出？","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.dialogExport=!0})).catch((()=>{this.loadingExport=!1})):(0,u.R8)("你今天没有导出数据的次数了，明天再来吧")}))},getHeader(){let e={};return e[d.A.SESSION_TOKEN]=(0,c.KA)({name:d.A.SESSION_TOKEN}),e},uploadAvatarSuccess(e){0===e.code?((0,u.kX)(e.msg),this.requestAvatarList()):(0,u.R8)(e.msg)},uploadAvatarError(e){let t=JSON.stringify(e);(0,u.z3)(t)},uploadLogoSuccess(e){0===e.code?((0,u.kX)(e.msg),this.requestUserConfig()):(0,u.R8)(e.msg)},uploadLogoError(e){let t=JSON.stringify(e);(0,u.z3)(t)},requestAvatarList(){(0,n.I6)().then((e=>{this.avatarList=e.data.data,this.useAvatarMode=!1,this.deleteAvatarMode=!1}))},requestDeleteAvatar(e){(0,n.pC)(e).then((e=>{0===e.data.code?((0,u.kX)(e.data.msg),this.requestAvatarList()):(0,u.z3)(e.data.msg)}))},requestSetDefaultAvatar(e){(0,n.zA)(e).then((e=>{(0,u.kX)(e.data.msg),this.requestAvatarList()}))},requestUpdatePassword(){const e={password:m.H.encrypt(this.pass.password),passwordNew:m.H.encrypt(this.pass.passwordNew),passwordNewAgain:m.H.encrypt(this.pass.passwordNewAgain)};(0,n.Ft)(e).then((e=>{0===e.data.code?((0,u.kX)(e.data.msg),this.dialogPassword=!1,this.pass.password="",this.pass.passwordNew="",this.pass.passwordNewAgain=""):(0,u.z3)(e.data.msg)}))},loadRecordNumber(){this.config.recordNumber=d.A.TEMPLATE_RECORD_NUMBER},isPcWidth(){return(0,p.C)()}}},o()}catch(e){o(e)}}))},62796:function(e,t,a){a.a(e,(async function(e,o){try{a.d(t,{A:function(){return l.A}});var l=a(91003),r=e([l]);l=(r.then?(await r)():r)[0],o()}catch(e){o(e)}}))},67612:function(e,t,a){a.d(t,{X:function(){return h}});var o=a(99601);const l={class:"main-navigator"},r={class:"statistic-list"},i={class:"statistic"},s={class:"statistic"},n={class:"statistic"},d={class:"statistic"},c={class:"statistic"},u={key:0,class:"center-article-intro"},m={key:1,class:"center-article-list"},p={class:"center-article-date"},g={class:"center-article-title"};function h(e,t,a,h,f,V){const N=(0,o.resolveComponent)("el-menu-item"),w=(0,o.resolveComponent)("el-menu"),v=(0,o.resolveComponent)("el-link"),C=(0,o.resolveComponent)("el-button");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(w,{"default-active":"/",mode:"horizontal"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(N,{index:"/"},{default:(0,o.withCtx)((()=>t[1]||(t[1]=[(0,o.createTextVNode)("首页")]))),_:1})])),_:1})]),t[4]||(t[4]=(0,o.createElementVNode)("div",{class:"clear"},null,-1)),(0,o.createElementVNode)("div",r,[(0,o.createElementVNode)("div",i," 日志数："+(0,o.toDisplayString)(f.data.article),1),(0,o.createElementVNode)("div",s," 评论数："+(0,o.toDisplayString)(f.data.comment),1),(0,o.createElementVNode)("div",n," 访问数："+(0,o.toDisplayString)(f.data.visit),1),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)("statistic cursor-pointer"+(f.data.commentUnread>0?" statistic-orange":"")),onClick:t[0]||(t[0]=(...e)=>V.gotoCommentRoute&&V.gotoCommentRoute(...e))}," 未读评论数："+(0,o.toDisplayString)(f.data.commentUnread),3),(0,o.createElementVNode)("div",d," 今天访问数："+(0,o.toDisplayString)(f.data.visitToday),1),(0,o.createElementVNode)("div",c," 昨天访问数："+(0,o.toDisplayString)(f.data.visitYesterday),1)]),t[5]||(t[5]=(0,o.createElementVNode)("div",{class:"clear"},null,-1)),V.isPcWidth()?((0,o.openBlock)(),(0,o.createElementBlock)("div",u,[(0,o.createVNode)(v,{type:"primary",underline:!1,href:f.commonConstant.OFFICIAL_URL,target:"_blank"},{default:(0,o.withCtx)((()=>t[2]||(t[2]=[(0,o.createTextVNode)("《简笔记》官网最新日志")]))),_:1},8,["href"])])):(0,o.createCommentVNode)("",!0),V.isPcWidth()?((0,o.openBlock)(),(0,o.createElementBlock)("div",m,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(f.articleList,((e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"center-article",key:a},[(0,o.createElementVNode)("div",p,(0,o.toDisplayString)(e.createAt),1),(0,o.createElementVNode)("div",g,[e.isNewArticle?((0,o.openBlock)(),(0,o.createBlock)(C,{key:0,class:"tag-radius tag-orange mr-15 center-article-tag"},{default:(0,o.withCtx)((()=>t[3]||(t[3]=[(0,o.createElementVNode)("i",{class:"fa fa-fire top-1"},null,-1),(0,o.createTextVNode)(" new! ")]))),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(v,{type:"primary",underline:!1,onClick:t=>V.gotoWebArticle(e.officialFullUrl),target:"_blank"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.title),1)])),_:2},1032,["onClick"])])])))),128))])):(0,o.createCommentVNode)("",!0)])}},76850:function(e,t,a){a.a(e,(async function(e,o){try{var l=a(27351),r=a(15855),i=a(71241),s=e([r]);r=(s.then?(await s)():s)[0];const n=(0,i.A)(r.A,[["render",l.X]]);t.A=n,o()}catch(e){o(e)}}))},91003:function(e,t,a){a.a(e,(async function(e,o){try{a(44114);var l=a(81774),r=a(29236),i=a(78947),s=a(90891),n=a(93893),d=a(52004),c=e([l,s,d]);[l,s,d]=c.then?(await c)():c,t.A={name:"IndexView",data(){return{commonConstant:i.A,data:{},config:{},token:this.$route.query.token,articleList:[]}},created(){this.token&&(0,r.k3)({name:i.A.SESSION_TOKEN,content:this.token}),this.requestUserConfig(),this.requestStatistic(),this.isPcWidth()&&this.requestCenterArticleList()},mounted(){},methods:{requestStatistic(){(0,l.P_)().then((e=>{e&&(this.data=e.data.data)}))},requestCenterArticleList(){(0,s.U)(6).then((e=>{e.data.data&&(this.articleList=e.data.data.records)}))},requestUserConfig(){(0,d.U3)().then((e=>{this.config=e.data.data}))},gotoWebArticle(e){(0,n.C)()?window.open(e):location.href=e},gotoCommentRoute(){this.$router.push({path:"/comment"})},isPcWidth(){return(0,n.C)()}}},o()}catch(e){o(e)}}))}}]);