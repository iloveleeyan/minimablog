"use strict";(self.webpackChunknote_star_cn=self.webpackChunknote_star_cn||[]).push([[1349],{7121:function(e,t,n){n.d(t,{Lh:function(){return l},OZ:function(){return i},aH:function(){return s},d5:function(){return m},dE:function(){return o},hS:function(){return r}});n(44114);var a=n(67636);function o(e,t,n,a){const o=e.match(/\[image\s(.*?)\s\/image\]/g);let i=[],r=[];if(null==o)return e;for(let e=0;e<o.length;e++)i.push(o[e]),r.push(o[e].replace("[image ","").replace(" /image]",""));for(let c=0;c<o.length;c++)for(let o=0;o<t.length;o++)t[o][n]===r[c]&&(e=e.replace(i[c],'<img src="'+t[o][a]+'" style="max-width: 100%" />'));return e}function i(e){const t=e.match(/\[bili\s(.*?)\s\/bili\]/g);let n=[],a=[];if(null==t)return e;for(let e=0;e<t.length;e++)n.push(t[e]),a.push(t[e].replace("[bili ","").replace(" /bili]",""));for(let a=0;a<t.length;a++)e=e.replace(n[a],'<iframe class="article-bili" style="aspect-ratio: 16/9;" src="//www.bilibili.com/blackboard/html5mobileplayer.html?isOutside=true&'+t[a]+'&p=1" style="width: 100%; aspect-ratio: 16/9;" frameborder="no" scrolling="no" allowfullscreen="allowfullscreen"></iframe>');return e}function r(e,t){const n=e.match(/\[emo\s(.*?)\s\/emo\]/g);if(null==n)return e;let a=[],o=[];for(let e=0;e<n.length;e++)a.push(n[e]),o.push(n[e].replace("[emo ","").replace(" /emo]","").split(":")[1]);for(let i=0;i<n.length;i++)for(let n=0;n<t.length;n++)t[n][0]===o[i]&&(e=e.replace(a[i],'<img src="'+t[n][1]+'" />'));return e}let c;function l(e,t){c=document.getElementById(e),null!==c&&c.addEventListener("click",(function(){console.log("添加了监听：点代码显示图片预览");let e=!1;const n=c.value,o=/\[image\s+([^\]]+)\s*\/image\]/g;let i,r=function(e){let t=0;if(e.selectionStart||"0"===e.selectionStart)t=e.selectionStart;else if(document.selection){e.focus();const n=document.selection.createRange(),a=e.createTextRange();a.collapse(!0),a.setEndPoint("EndToStart",n),t=a.text.length}return t}(c);for(o.lastIndex=0;null!==(i=o.exec(n));){const o=i[0];let c=i[1];const l=n.indexOf(o),s=l+o.length;r>=l&&r<s&&(c=c.trim(),console.log("光标选中了图片："+c),e=!0,a.A.emit(t,c))}e||(console.log("光标没选中"),a.A.emit(t))}))}function s(){c&&c.removeEventListener("click",(function(e){console.log("移除了监听：",e)}),!1)}function m(e){return"[bili "+(e=e.replace('<iframe src="//player.bilibili.com/player.html?isOutside=true&',"").replace('&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>',""))+" /bili]"}},7979:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(58212),i=n(78947),r=n(29236),c=n(36798);const{ElMessage:l}=n(91625),s=await fetch("/config.json"),m=await s.json();o.A.defaults.baseURL=m.API_BASE_URL+"/back";let u=o.A.create({timeout:5e3,baseURL:o.A.defaults.baseURL,transformRequest:[function(e,t){t[i.A.SESSION_TOKEN]=(0,r.KA)({name:i.A.SESSION_TOKEN});const n=(0,r.KA)({name:i.A.SESSION_ADMIN_TOKEN});return n&&(t[i.A.SESSION_ADMIN_TOKEN]=n),t["Content-Type"]="application/json;charset=UTF-8",JSON.stringify(e)}]});function p(e,t){void 0!==e.headers[t]&&null!==e.headers[t]&&(0,r.k3)({name:t,content:e.headers[t]})}u.interceptors.request.use((e=>e),(e=>Promise.reject(e))),u.interceptors.response.use((e=>1999===e.data.code?(l({type:"error",message:e.data.msg,center:!0}),(0,r.aZ)({name:i.A.SESSION_TOKEN}),void setTimeout((function(){location.href="/login"}),1e3)):2999===e.data.code?(l({type:"error",message:e.data.msg,center:!0}),(0,r.aZ)({name:i.A.SESSION_ADMIN_TOKEN}),void setTimeout((function(){location.href="/admin/login"}),1e3)):(void 0!==e.data.code&&0!==e.data.code&&(0,c.R8)(e.data.msg),p(e,i.A.SESSION_TOKEN),p(e,i.A.SESSION_ADMIN_TOKEN),e)),(e=>Promise.reject(e))),t.Ay=u,a()}catch(h){a(h)}}),1)},29236:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{KA:function(){return getStore},aZ:function(){return removeStore},eP:function(){return clearExpireStore},k3:function(){return setStore}});var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(44114),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),_utils_validate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(45279);const keyName="",setStore=(e={})=>{let{name:t,content:n,type:a}=e;t=keyName+t;const o={dataType:typeof n,content:n,type:a,datetime:(new Date).getTime()};a?window.sessionStorage.setItem(t,JSON.stringify(o)):window.localStorage.setItem(t,JSON.stringify(o))},getStore=(params={})=>{let{name:name,debug:debug}=params;name=keyName+name;let obj={},content;if(obj=window.sessionStorage.getItem(name),(0,_utils_validate__WEBPACK_IMPORTED_MODULE_1__.S1)(obj)&&(obj=window.localStorage.getItem(name)),!(0,_utils_validate__WEBPACK_IMPORTED_MODULE_1__.S1)(obj)){try{obj=JSON.parse(obj)}catch(e){return obj}return debug?obj:("string"===obj.dataType?content=obj.content:"number"===obj.dataType?content=Number(obj.content):"boolean"===obj.dataType?content=eval(obj.content):"object"===obj.dataType&&(content=obj.content),content)}},removeStore=(e={})=>{let{name:t,type:n}=e;t=keyName+t,n?window.sessionStorage.removeItem(t):window.localStorage.removeItem(t)},getAllStore=(e={})=>{const t=[],{type:n}=e;if(n)for(let e=0;e<=window.sessionStorage.length;e++)t.push({name:window.sessionStorage.key(e),content:getStore({name:window.sessionStorage.key(e),type:"session"})});else for(let e=0;e<=window.localStorage.length;e++)t.push({name:window.localStorage.key(e),content:getStore({name:window.localStorage.key(e)})});return t},clearStore=(e={})=>{const{type:t}=e;t?window.sessionStorage.clear():window.localStorage.clear()},clearExpireStore=(e,t)=>{let n=(new Date).getTime(),a=getAllStore();for(let o=0;o<=a.length;o++)if(a[o]){let i=a[o].name;if(i&&i.indexOf(e)>=0){let e=window.localStorage.getItem(i);n-JSON.parse(e).datetime>1e3*t&&(console.log("找到已过期的localStorage项，删除："+i),window.localStorage.removeItem(i))}}}},36798:function(e,t,n){n.d(t,{R8:function(){return c},kX:function(){return i},pq:function(){return r},z3:function(){return l}});var a=n(51219);const o=window.screen.height/2-150,i=e=>{(0,a.nk)({type:"success",message:e,offset:o})},r=e=>{(0,a.nk)({type:"info",message:e,offset:o})},c=e=>{(0,a.nk)({type:"warning",message:e,offset:o})},l=e=>{(0,a.nk)({type:"error",message:e,offset:o})}},37490:function(e,t,n){n.d(t,{X:function(){return a}});let a=(()=>{let e=null;function t(){this.sharePasteInstance=Object.create(o),this.code=0}return{getInstance:(n,a)=>(e||(e=new t,e.status=n,e.key=a),n||console.log("初始化粘贴图类",e),e)}})(),o={ctrlVPasteId:"",ctrlVPasteInputName:"paste",urlUpload:"",param:"",callback:"",header:{},init:function(e,t,n,a,o){this.ctrlVPasteId=e,this.ctrlVPasteInputName=t,this.urlUpload=n,this.header=a,this.callback=o,this.addListener()},addListener:function(){return console.log("addListener paste"),document.addEventListener("paste",r),!0},removeListener:function(){return console.log("removeListener paste"),document.removeEventListener("paste",r),!0}};function i(e,t){let n=new FormData,o=a.getInstance(),i=o.status,r=o.key;n.append(a.getInstance().sharePasteInstance.ctrlVPasteInputName,e),n.append("submission-type",t),i[r]=!0;let c=new XMLHttpRequest;c.open("POST",a.getInstance().sharePasteInstance.urlUpload);const l=a.getInstance().sharePasteInstance.header;for(let e in l)c.setRequestHeader(e,l[e]);c.onload=function(){if(4===c.readyState&&200===c.status){let e=JSON.parse(c.responseText);return"function"==typeof a.getInstance().sharePasteInstance.callback&&a.getInstance().sharePasteInstance.callback(e,a.getInstance().sharePasteInstance.param),i[r]=!1,!0}i[r]=!1},c.onerror=function(e){i[r]=!1,console.log(e)},c.send(n)}function r(e){let t=!1;if(e.clipboardData||e.originalEvent){let n=e.clipboardData||e.originalEvent.clipboardData;if(n.items){let a=n.items,o=a.length,r=null;t=!0,e.preventDefault();for(let e=0;e<o;e++)-1!==a[e].type.indexOf("image")&&(r=a[e].getAsFile(),i(r,"paste"))}else setTimeout((function(){let e,t=document.querySelectorAll("#"+a.getInstance().sharePasteInstance.ctrlVPasteId+" img"),n=t.length,o="";for(e=0;e<n;e++)"my_img"!==t[e].className&&(o=t[e].src);i(o,"paste")}),1)}else setTimeout((function(){let e,t=document.querySelectorAll("#"+a.getInstance().sharePasteInstance.ctrlVPasteId+" img"),n=t.length,o="";for(e=0;e<n;e++)"my_img"!==t[e].className&&(o=t[e].src);i(o,"paste")}),1);e.preventDefault()}},37741:function(e,t,n){n.a(e,(async function(e,a){try{n.d(t,{N1:function(){return r}});n(44114),n(18111),n(7588),n(14603),n(47566),n(98721),n(45279);var o=n(7979),i=e([o]);o=(i.then?(await i)():i)[0];function r(e){return e.replace(/<a\b[^>]*>(.*?)<\/a>/gi,"$1")}a()}catch(c){a(c)}}))},40874:function(e,t,n){function a(e){let t="",n="abcdefghijklmnopqrstuvwxyz0123456789";for(let a=1;a<=e;a++){let e=Math.floor(36*Math.random());t+=n.charAt(e)}return t}n.d(t,{l9:function(){return a}})},44528:function(e,t,n){n.d(t,{w:function(){return o}});var a=n(36824);function o(e){const t=n(12750),o=new a.xI.Renderer;o.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'readonly="" type="checkbox" class="checkbox"/> '},a.xI.setOptions({renderer:o,gfm:!0,pedantic:!1,sanitize:!1,tables:!0,breaks:!1,smartLists:!0,smartypants:!1,highlight:function(e){return t.highlightAuto(e).value}});const i=o.link;return o.link=(e,t,n)=>i.call(o,e,t,n).replace(/^<a /,'<a target="_blank" '),(0,a.xI)(e)}},45279:function(e,t,n){n.d(t,{S1:function(){return a}});n(44114);function a(e){if("boolean"==typeof e)return!1;if("number"==typeof e)return!1;if(e instanceof Array){if(0===e.length)return!0}else{if(!(e instanceof Object))return"null"===e||null==e||"undefined"===e||void 0===e||""===e;if("{}"===JSON.stringify(e))return!0}return!1}},49220:function(e,t,n){n.a(e,(async function(e,t){try{var a=n(99601),o=n(89955),i=n(81459),r=n(69227),c=(n(4188),n(27209),n(78947)),l=n(29236),s=n(67636),m=n(78694),u=e([i]);i=(u.then?(await u)():u)[0];const p=(0,a.createApp)(o.A);(0,m.A)(p),p.use(r.A,{}).use(i.A).use(s.A).mount("#app");const h=(0,a.inject)("siteName");i.A.beforeEach(((e,t,n)=>{e.meta.title&&(document.title=h+" | "+e.meta.title);let a=(0,l.KA)({name:c.A.SESSION_TOKEN}),o=(0,l.KA)({name:c.A.SESSION_ADMIN_TOKEN}),i=(0,l.KA)({name:c.A.STORE_SWITCH_ADMIN});"Logout"!==e.name?(o&&i&&("AdminLogin"!==e.name&&"Index"!==e.name||n({path:"/admin"})),a&&"Login"===e.name&&n({path:"/"}),"AdminLogin"===e.name||o?("AdminLogin"!==e.name?o?n():n({path:"/admin/login"}):n(),o&&"AdminLogin"===e.name&&n({path:"/admin"})):("Login"!==e.name?a?n():n({path:"/login"}):n(),a&&"Login"===e.name&&n({path:"/"}))):n()})),t()}catch(e){t(e)}}))},52827:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function addUrlParam(arg,val){let url=window.location.hash,pattern=arg+"=([^&]*)",replaceText=arg+"="+val,fullUrl="";if(url.match(pattern)){let tmp="/("+arg+"=)([^&]*)/gi";tmp=url.replace(eval(tmp),replaceText),fullUrl=tmp}else fullUrl=-1!==window.location.href.indexOf("#")?url+"&"+replaceText:url+"#"+replaceText;window.location.hash=fullUrl}function getUrlParam(e,t){let n=window.location.hash;n=n.substr(1);let a=n.split("&");for(let t=0;t<a.length;t++){let n=a[t].split("=");if(n[0]===e){let e=decodeURI(n[1]);return"undefined"!==e?e:""}}let o=decodeURI(t);return"undefined"!==o?o:""}__webpack_require__.d(__webpack_exports__,{P:function(){return getUrlParam},i:function(){return addUrlParam}})},61317:function(e,t,n){n.d(t,{H:function(){return i}});var a=n(32855),o=n(78947);const i={encrypt(e){const t=new a.A;return t.setPublicKey(o.A.PUB_KEY),t.encrypt(e)},decrypt(e){const t=new a.A;return t.setPublicKey(o.A.PUB_KEY),t.decrypt(e)}}},63382:function(e,t,n){n.d(t,{q:function(){return i}});var a=n(78947),o=n(29236);function i(){return!!(0,o.KA)({name:a.A.SESSION_ADMIN_TOKEN})}},78694:function(e,t,n){var a=n(69227),o=(n(4188),n(55186));t.A=e=>{e.use(a.A,{locale:o.A})}},81459:function(e,t,n){n.a(e,(async function(e,a){try{var o=n(81387),i=n(63),r=n(1378),c=n(38659),l=n(53476),s=e([i,r,l]);[i,r,l]=s.then?(await s)():s;const m=await fetch("/config.json"),u=(await m.json()).SITE_NAME,p=[{path:"/login",name:"Login",component:r.A,meta:{title:"登录 | "+u,pathView:"PathLogin"}},{path:"/logout",name:"Logout",component:c.A,meta:{title:"退出登录 | "+u,pathView:"PathLogout"}},{path:"/exit",name:"Logout",component:c.A,meta:{title:"退出登录 | "+u,pathView:"PathLogout"}},{path:"/quit",name:"Logout",component:c.A,meta:{title:"退出登录 | "+u,pathView:"PathLogout"}},{path:"/",name:"Index",component:i.A,meta:{title:u,pathView:"PathIndex"}},{path:"/article",name:"Article",component:i.A,meta:{title:"日志 | "+u,pathView:"PathArticle"}},{path:"/article-create",name:"ArticleCreate",component:i.A,meta:{title:"写日志 | "+u,pathView:"PathArticleCreate"}},{path:"/article-create/:articleId",name:"ArticleEdit",component:i.A,meta:{title:"编辑日志 | "+u,pathView:"PathArticleCreate"}},{path:"/comment",name:"Comment",component:i.A,meta:{title:"评论 | "+u,pathView:"PathComment"}},{path:"/note-list",name:"NoteList",component:i.A,meta:{title:"记事 | "+u,pathView:"PathNoteList"}},{path:"/note/:noteId",name:"Note",component:i.A,meta:{title:"查看记事 | "+u,pathView:"PathNoteList"}},{path:"/note-create",name:"NoteCreate",component:i.A,meta:{title:"创建记事 | "+u,pathView:"PathNoteCreate"}},{path:"/note-create/:noteId",name:"NoteEdit",component:i.A,meta:{title:"编辑记事 | "+u,pathView:"PathNoteCreate"}},{path:"/statistic",name:"Statistic",component:i.A,meta:{title:"访问记录 | "+u,pathView:"PathStatistic"}},{path:"/statistic-chart",name:"StatisticChart",component:i.A,meta:{title:"统计图表 | "+u,pathView:"PathStatisticChart"}},{path:"/config-page",name:"ConfigPage",component:i.A,meta:{title:"设置独立页面 | "+u,pathView:"PathConfigPage"}},{path:"/config-page/:pageId",name:"ConfigPageContent",component:i.A,meta:{title:"设置独立页面 | "+u,pathView:"PathConfigPageContent"}},{path:"/config-user",name:"ConfigUser",component:i.A,meta:{title:"站长设置 | "+u,pathView:"PathConfigUser"}},{path:"/config-skin",name:"ConfigSkin",component:i.A,meta:{title:"外观设置 | "+u,pathView:"PathConfigSkin"}},{path:"/config-mail",name:"ConfigMail",component:i.A,meta:{title:"查看邮件记录 | "+u,pathView:"PathConfigMail"}},{path:"/config-tag",name:"ConfigNote",component:i.A,meta:{title:"设置标签 | "+u,pathView:"PathConfigNote"}},{path:"/config-book",name:"ConfigBook",component:i.A,meta:{title:"设置书籍 | "+u,pathView:"PathConfigBook"}},{path:"/admin/login",name:"AdminLogin",component:l.A,meta:{title:"租户管理端登录 | "+u,pathView:"PathAdminLogin"}},{path:"/admin",name:"AdminIndex",component:i.A,meta:{title:"租户管理端 | "+u,pathView:"PathAdminIndex"}},{path:"/admin/user",name:"AdminUser",component:i.A,meta:{title:"租户管理 | "+u,pathView:"PathAdminUser"}},{path:"/admin/user-create",name:"AdminUserCreate",component:i.A,meta:{title:"创建租户 | "+u,pathView:"PathAdminUserCreate"}},{path:"/admin/user-apply",name:"AdminUserApply",component:i.A,meta:{title:"审核租户 | "+u,pathView:"PathAdminUserApply"}},{path:"/admin/user-create/:tenantId",name:"AdminUserEdit",component:i.A,meta:{title:"编辑租户 | "+u,pathView:"PathAdminUserCreate"}},{path:"/admin/user-nginx/:tenantId",name:"AdminUserNginx",component:i.A,meta:{title:"编辑nginx配置 | "+u,pathView:"PathAdminUserNginx"}},{path:"/admin/config",name:"AdminConfig",component:i.A,meta:{title:"管理设置 | "+u,pathView:"PathAdminConfig"}},{path:"/admin/config-log",name:"AdminLog",component:i.A,meta:{title:"管理日志 | "+u,pathView:"PathConfigLog"}},{path:"/admin/config-site",name:"AdminSite",component:i.A,meta:{title:"通用设置 | "+u,pathView:"PathConfig"}},{path:"/admin/skin",name:"AdminSkin",component:i.A,meta:{title:"主题管理 | "+u,pathView:"SkinConfig"}},{path:"/admin/official",name:"AdminOfficial",component:i.A,meta:{title:"官网中心统计 | "+u,pathView:"AdminOfficial"}}],h=(0,o.aE)({history:(0,o.LA)("/"),routes:p});h.afterEach((e=>{e.meta.title&&(document.title=e.meta.title),window.scrollTo(0,0)})),t.A=h,a()}catch(e){a(e)}}),1)},93893:function(e,t,n){function a(){return document.body.clientWidth>500}n.d(t,{C:function(){return a}})}}]);