"use strict";(self.webpackChunknote_star_cn=self.webpackChunknote_star_cn||[]).push([[204],{2274:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const l=Symbol("ElSelectV2Injection");t.selectV2InjectionKey=l},18478:function(e,t,l){Object.defineProperty(t,"__esModule",{value:!0});var o=l(65987),a=l(2274);const n=l(1095).withInstall(o.default);t.selectV2InjectionKey=a.selectV2InjectionKey,t.ElSelectV2=n,t.default=n},25625:function(e,t,l){Object.defineProperty(t,"__esModule",{value:!0});var o=l(98760),a=l(27003),n=l(65072),i=l(10005),s=l(1951),r=l(81466),u=l(28680),c=l(65840),d=l(9370),p=l(20239),m=l(24892),f=l(4987);const v=i.buildProps({allowCreate:Boolean,autocomplete:{type:i.definePropType(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:s.iconPropType,default:a.CircleClose},effect:{type:i.definePropType(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:i.definePropType([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:i.definePropType(Array),required:!0},placeholder:{type:String},teleported:r.useTooltipContentProps.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:i.definePropType(Object),default:()=>({})},remote:Boolean,size:u.useSizeProp,props:{type:i.definePropType(Object),default:()=>n.defaultProps},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:i.definePropType(String),values:o.placements,default:"bottom-start"},fallbackPlacements:{type:i.definePropType(Array),default:["bottom-start","top-start","right","left"]},tagType:{...c.tagProps.type,default:"info"},tagEffect:{...c.tagProps.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:String,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return d.isBoolean(e)||d.isNumber(e)}},...p.useEmptyValuesProps,...m.useAriaProps(["ariaLabel"])}),h=i.buildProps({data:Array,disabled:Boolean,hovering:Boolean,item:{type:i.definePropType(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),g={[f.UPDATE_MODEL_EVENT]:e=>!0,[f.CHANGE_EVENT]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},b={hover:e=>d.isNumber(e),select:(e,t)=>!0};t.OptionProps=h,t.SelectProps=v,t.optionEmits=b,t.selectEmits=g},28309:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.useOption=function(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}},45317:function(e,t,l){l(18111),l(13579),Object.defineProperty(t,"__esModule",{value:!0});var o=l(99601),a=l(74084),n=l(89926),i=l(68276),s=l(65072),r=l(2274),u=l(36998),c=l(18721),d=l(54596),p=l(9370),m=l(16402),f=l(24232);const v={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var h=o.defineComponent({name:"ElSelectDropdown",props:v,setup(e,{slots:t,expose:l}){const v=o.inject(r.selectV2InjectionKey),h=d.useNamespace("select"),{getLabel:g,getValue:b,getDisabled:y}=s.useProps(v.props),V=o.ref([]),S=o.ref(),C=o.computed((()=>e.data.length));o.watch((()=>C.value),(()=>{var e,t;null==(t=(e=v.tooltipRef.value).updatePopper)||t.call(e)}));const w=o.computed((()=>p.isUndefined(v.props.estimatedOptionHeight))),x=o.computed((()=>w.value?{itemSize:v.props.itemHeight}:{estimatedSize:v.props.estimatedOptionHeight,itemSize:e=>V.value[e]})),O=(e,t)=>v.props.multiple?((e=[],t)=>{const{props:{valueKey:l}}=v;return f.isObject(t)?e&&e.some((e=>o.toRaw(a.get(e,l))===a.get(t,l))):e.includes(t)})(e,b(t)):((e,t)=>{if(f.isObject(t)){const{valueKey:l}=v.props;return a.get(e,l)===a.get(t,l)}return e===t})(e,b(t)),E=(e,t)=>{const{disabled:l,multiple:o,multipleLimit:a}=v.props;return l||!t&&!!o&&a>0&&e.length>=a},k=t=>e.hoveringIndex===t,T={listRef:S,isSized:w,isItemDisabled:E,isItemHovering:k,isItemSelected:O,scrollToItem:e=>{const t=S.value;t&&t.scrollToItem(e)},resetScrollTop:()=>{const e=S.value;e&&e.resetScrollTop()}};l(T);const N=e=>{const{index:l,data:a,style:s}=e,r=o.unref(w),{itemSize:u,estimatedSize:c}=o.unref(x),{modelValue:d}=v.props,{onSelect:p,onHover:m}=v,f=a[l];if("Group"===f.type)return o.createVNode(n.default,{item:f,style:s,height:r?u:c},null);const h=O(d,f),b=E(d,h),V=k(l);return o.createVNode(i.default,o.mergeProps(e,{selected:h,disabled:y(f)||b,created:!!f.created,hovering:V,item:f,onSelect:p,onHover:m}),{default:e=>{var l;return(null==(l=t.default)?void 0:l.call(t,e))||o.createVNode("span",null,[g(f)])}})},{onKeyboardNavigate:I,onKeyboardSelect:B}=v,z=e=>{const{code:t}=e,{tab:l,esc:o,down:a,up:n,enter:i,numpadEnter:s}=m.EVENT_CODE;switch(t!==l&&(e.preventDefault(),e.stopPropagation()),t){case l:case o:break;case a:I("forward");break;case n:I("backward");break;case i:case s:B()}};return()=>{var l,a,n,i;const{data:s,width:r}=e,{height:d,multiple:p,scrollbarAlwaysOn:m}=v.props,f=o.unref(w)?u.default:c.default;return o.createVNode("div",{class:[h.b("dropdown"),h.is("multiple",p)],style:{width:`${r}px`}},[null==(l=t.header)?void 0:l.call(t),(null==(a=t.loading)?void 0:a.call(t))||(null==(n=t.empty)?void 0:n.call(t))||o.createVNode(f,o.mergeProps({ref:S},o.unref(x),{className:h.be("dropdown","list"),scrollbarAlwaysOn:m,data:s,height:d,width:r,total:s.length,onKeydown:z}),{default:e=>o.createVNode(N,e,null)}),null==(i=t.footer)?void 0:i.call(t)])}}});t.default=h},65072:function(e,t,l){Object.defineProperty(t,"__esModule",{value:!0});var o=l(99601),a=l(74084);const n={label:"label",value:"value",disabled:"disabled",options:"options"};t.defaultProps=n,t.useProps=function(e){const t=o.computed((()=>({...n,...e.props})));return{aliasProps:t,getLabel:e=>a.get(e,t.value.label),getValue:e=>a.get(e,t.value.value),getDisabled:e=>a.get(e,t.value.disabled),getOptions:e=>a.get(e,t.value.options)}}},65987:function(e,t,l){l(18111),l(61701),Object.defineProperty(t,"__esModule",{value:!0});var o=l(99601),a=l(75814),n=l(91273),i=l(33046),s=l(45317),r=l(99124),u=l(25625),c=l(2274),d=l(8752),p=l(28957),m=l(24232),f=l(46076);const v=o.defineComponent({name:"ElSelectV2",components:{ElSelectMenu:s.default,ElTag:n.ElTag,ElTooltip:a.ElTooltip,ElIcon:i.ElIcon},directives:{ClickOutside:p.default},props:u.SelectProps,emits:u.selectEmits,setup(e,{emit:t}){const l=o.computed((()=>{const{modelValue:t,multiple:l}=e,o=l?[]:void 0;return m.isArray(t)?l?t:o:l?o:t})),a=r.default(o.reactive({...o.toRefs(e),modelValue:l}),t),{calculatorRef:n,inputStyle:i}=f.useCalcInputWidth();o.provide(c.selectV2InjectionKey,{props:o.reactive({...o.toRefs(e),height:a.popupHeight,modelValue:l}),expanded:a.expanded,tooltipRef:a.tooltipRef,onSelect:a.onSelect,onHover:a.onHover,onKeyboardNavigate:a.onKeyboardNavigate,onKeyboardSelect:a.onKeyboardSelect});const s=o.computed((()=>e.multiple?a.states.cachedOptions.map((e=>e.label)):a.states.selectedLabel));return{...a,modelValue:l,selectedLabel:s,calculatorRef:n,inputStyle:i}}});var h=d.default(v,[["render",function(e,t,l,a,n,i){const s=o.resolveComponent("el-tag"),r=o.resolveComponent("el-tooltip"),u=o.resolveComponent("el-icon"),c=o.resolveComponent("el-select-menu"),d=o.resolveDirective("click-outside");return o.withDirectives((o.openBlock(),o.createElementBlock("div",{ref:"selectRef",class:o.normalizeClass([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:t=>e.states.inputHovering=!0,onMouseleave:t=>e.states.inputHovering=!1},[o.createVNode(r,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:t=>e.states.isBeforeHide=!1},{default:o.withCtx((()=>[o.createElementVNode("div",{ref:"wrapperRef",class:o.normalizeClass([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:o.withModifiers(e.toggleMenu,["prevent"])},[e.$slots.prefix?(o.openBlock(),o.createElementBlock("div",{key:0,ref:"prefixRef",class:o.normalizeClass(e.nsSelect.e("prefix"))},[o.renderSlot(e.$slots,"prefix")],2)):o.createCommentVNode("v-if",!0),o.createElementVNode("div",{ref:"selectionRef",class:o.normalizeClass([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?o.renderSlot(e.$slots,"tag",{key:0},(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.showTagList,(t=>(o.openBlock(),o.createElementBlock("div",{key:e.getValueKey(e.getValue(t)),class:o.normalizeClass(e.nsSelect.e("selected-item"))},[o.createVNode(s,{closable:!e.selectDisabled&&!e.getDisabled(t),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:o.normalizeStyle(e.tagStyle),onClose:l=>e.deleteTag(l,t)},{default:o.withCtx((()=>[o.createElementVNode("span",{class:o.normalizeClass(e.nsSelect.e("tags-text"))},[o.renderSlot(e.$slots,"label",{label:e.getLabel(t),value:e.getValue(t)},(()=>[o.createTextVNode(o.toDisplayString(e.getLabel(t)),1)]))],2)])),_:2},1032,["closable","size","type","effect","style","onClose"])],2)))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(o.openBlock(),o.createBlock(r,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:o.withCtx((()=>[o.createElementVNode("div",{ref:"collapseItemRef",class:o.normalizeClass(e.nsSelect.e("selected-item"))},[o.createVNode(s,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:o.normalizeStyle(e.collapseTagStyle),"disable-transitions":""},{default:o.withCtx((()=>[o.createElementVNode("span",{class:o.normalizeClass(e.nsSelect.e("tags-text"))}," + "+o.toDisplayString(e.modelValue.length-e.maxCollapseTags),3)])),_:1},8,["size","type","effect","style"])],2)])),content:o.withCtx((()=>[o.createElementVNode("div",{ref:"tagMenuRef",class:o.normalizeClass(e.nsSelect.e("selection"))},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(e.collapseTagList,(t=>(o.openBlock(),o.createElementBlock("div",{key:e.getValueKey(e.getValue(t)),class:o.normalizeClass(e.nsSelect.e("selected-item"))},[o.createVNode(s,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(t),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:l=>e.deleteTag(l,t)},{default:o.withCtx((()=>[o.createElementVNode("span",{class:o.normalizeClass(e.nsSelect.e("tags-text"))},[o.renderSlot(e.$slots,"label",{label:e.getLabel(t),value:e.getValue(t)},(()=>[o.createTextVNode(o.toDisplayString(e.getLabel(t)),1)]))],2)])),_:2},1032,["closable","size","type","effect","onClose"])],2)))),128))],2)])),_:3},8,["disabled","effect","teleported"])):o.createCommentVNode("v-if",!0)])):o.createCommentVNode("v-if",!0),o.createElementVNode("div",{class:o.normalizeClass([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[o.withDirectives(o.createElementVNode("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":t=>e.states.inputValue=t,style:o.normalizeStyle(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:o.normalizeClass([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[o.withKeys(o.withModifiers((t=>e.onKeyboardNavigate("backward")),["stop","prevent"]),["up"]),o.withKeys(o.withModifiers((t=>e.onKeyboardNavigate("forward")),["stop","prevent"]),["down"]),o.withKeys(o.withModifiers(e.onKeyboardSelect,["stop","prevent"]),["enter"]),o.withKeys(o.withModifiers(e.handleEsc,["stop","prevent"]),["esc"]),o.withKeys(o.withModifiers(e.handleDel,["stop"]),["delete"])],onClick:o.withModifiers(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[o.vModelText,e.states.inputValue]]),e.filterable?(o.openBlock(),o.createElementBlock("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:o.normalizeClass(e.nsSelect.e("input-calculator")),textContent:o.toDisplayString(e.states.inputValue)},null,10,["textContent"])):o.createCommentVNode("v-if",!0)],2),e.shouldShowPlaceholder?(o.openBlock(),o.createElementBlock("div",{key:1,class:o.normalizeClass([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?o.renderSlot(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},(()=>[o.createElementVNode("span",null,o.toDisplayString(e.currentPlaceholder),1)])):(o.openBlock(),o.createElementBlock("span",{key:1},o.toDisplayString(e.currentPlaceholder),1))],2)):o.createCommentVNode("v-if",!0)],2),o.createElementVNode("div",{ref:"suffixRef",class:o.normalizeClass(e.nsSelect.e("suffix"))},[e.iconComponent?o.withDirectives((o.openBlock(),o.createBlock(u,{key:0,class:o.normalizeClass([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:o.withCtx((()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.iconComponent)))])),_:1},8,["class"])),[[o.vShow,!e.showClearBtn]]):o.createCommentVNode("v-if",!0),e.showClearBtn&&e.clearIcon?(o.openBlock(),o.createBlock(u,{key:1,class:o.normalizeClass([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:o.withModifiers(e.handleClear,["prevent","stop"])},{default:o.withCtx((()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.clearIcon)))])),_:1},8,["class","onClick"])):o.createCommentVNode("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(o.openBlock(),o.createBlock(u,{key:2,class:o.normalizeClass([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading","validating"===e.validateState)])},{default:o.withCtx((()=>[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(e.validateIcon)))])),_:1},8,["class"])):o.createCommentVNode("v-if",!0)],2)],10,["onClick"])])),content:o.withCtx((()=>[o.createVNode(c,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},o.createSlots({default:o.withCtx((t=>[o.renderSlot(e.$slots,"default",o.normalizeProps(o.guardReactiveProps(t)))])),_:2},[e.$slots.header?{name:"header",fn:o.withCtx((()=>[o.createElementVNode("div",{class:o.normalizeClass(e.nsSelect.be("dropdown","header"))},[o.renderSlot(e.$slots,"header")],2)]))}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:o.withCtx((()=>[o.createElementVNode("div",{class:o.normalizeClass(e.nsSelect.be("dropdown","loading"))},[o.renderSlot(e.$slots,"loading")],2)]))}:e.loading||0===e.filteredOptions.length?{name:"empty",fn:o.withCtx((()=>[o.createElementVNode("div",{class:o.normalizeClass(e.nsSelect.be("dropdown","empty"))},[o.renderSlot(e.$slots,"empty",{},(()=>[o.createElementVNode("span",null,o.toDisplayString(e.emptyText),1)]))],2)]))}:void 0,e.$slots.footer?{name:"footer",fn:o.withCtx((()=>[o.createElementVNode("div",{class:o.normalizeClass(e.nsSelect.be("dropdown","footer"))},[o.renderSlot(e.$slots,"footer")],2)]))}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])])),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[d,e.handleClickOutside,e.popperRef]])}],["__file","select.vue"]]);t.default=h},68276:function(e,t,l){Object.defineProperty(t,"__esModule",{value:!0});var o=l(99601),a=l(28309),n=l(65072),i=l(25625),s=l(2274),r=l(8752),u=l(54596);const c=o.defineComponent({props:i.OptionProps,emits:i.optionEmits,setup(e,{emit:t}){const l=o.inject(s.selectV2InjectionKey),i=u.useNamespace("select"),{hoverItem:r,selectOptionClick:c}=a.useOption(e,{emit:t}),{getLabel:d}=n.useProps(l.props);return{ns:i,hoverItem:r,selectOptionClick:c,getLabel:d}}});var d=r.default(c,[["render",function(e,t,l,a,n,i){return o.openBlock(),o.createElementBlock("li",{"aria-selected":e.selected,style:o.normalizeStyle(e.style),class:o.normalizeClass([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:e.hoverItem,onClick:o.withModifiers(e.selectOptionClick,["stop"])},[o.renderSlot(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},(()=>[o.createElementVNode("span",null,o.toDisplayString(e.getLabel(e.item)),1)]))],46,["aria-selected","onMousemove","onClick"])}],["__file","option-item.vue"]]);t.default=d},89926:function(e,t,l){Object.defineProperty(t,"__esModule",{value:!0});var o=l(99601),a=l(8752),n=l(54596);const i=o.defineComponent({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:n.useNamespace("select")}}});var s=a.default(i,[["render",function(e,t,l,a,n,i){return o.openBlock(),o.createElementBlock("div",{class:o.normalizeClass(e.ns.be("group","title")),style:o.normalizeStyle({...e.style,lineHeight:`${e.height}px`})},o.toDisplayString(e.item.label),7)}],["__file","group-item.vue"]]);t.default=s},91755:function(e,t,l){l(44114),l(18111),l(13579),Object.defineProperty(t,"__esModule",{value:!0});var o=l(99601),a=l(65072);t.useAllowCreate=function(e,t){const{aliasProps:l,getLabel:n,getValue:i}=a.useProps(e),s=o.ref(0),r=o.ref(),u=o.computed((()=>e.allowCreate&&e.filterable));return{createNewOption:function(o){if(u.value)if(o&&o.length>0){if(function(l){const o=e=>n(e)===l;return e.options&&e.options.some(o)||t.createdOptions.some(o)}(o))return;const a={[l.value.value]:o,[l.value.label]:o,created:!0,[l.value.disabled]:!1};t.createdOptions.length>=s.value?t.createdOptions[s.value]=a:t.createdOptions.push(a)}else if(e.multiple)t.createdOptions.length=s.value;else{const e=r.value;t.createdOptions.length=0,e&&e.created&&t.createdOptions.push(e)}},removeNewOption:function(l){if(!u.value||!l||!l.created||l.created&&e.reserveKeyword&&t.inputValue===n(l))return;const o=t.createdOptions.findIndex((e=>i(e)===i(l)));~o&&(t.createdOptions.splice(o,1),s.value--)},selectNewOption:function(t){u.value&&(e.multiple&&t.created?s.value++:r.value=t)},clearAllNewOption:function(){u.value&&(t.createdOptions.length=0,s.value=0)}}}},99124:function(e,t,l){l(44114),l(18111),l(81148),l(22489),l(20116),l(7588),l(18237),l(13579),Object.defineProperty(t,"__esModule",{value:!0});var o=l(99601),a=l(74084),n=l(49614),i=l(27003),s=l(91755),r=l(65072),u=l(46775),c=l(54596),d=l(84431),p=l(20239),m=l(11949),f=l(35818),v=l(24232),h=l(1951),g=l(54998),b=l(16402),y=l(35937),V=l(9370),S=l(4987),C=l(45425);t.default=(e,t)=>{const{t:l}=u.useLocale(),w=c.useNamespace("select"),x=c.useNamespace("input"),{form:O,formItem:E}=d.useFormItem(),{inputId:k}=d.useFormItemInputId(e,{formItemContext:E}),{aliasProps:T,getLabel:N,getValue:I,getDisabled:B,getOptions:z}=r.useProps(e),{valueOnClear:P,isEmptyValue:M}=p.useEmptyValues(e),R=o.reactive({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),_=o.ref(-1),D=o.ref(),L=o.ref(),K=o.ref(),j=o.ref(),F=o.ref(),H=o.ref(),A=o.ref(),$=o.ref(),W=o.ref(),q=o.ref(),{isComposing:U,handleCompositionStart:G,handleCompositionEnd:Q,handleCompositionUpdate:J}=m.useComposition({afterComposition:e=>Ye(e)}),{wrapperRef:X,isFocused:Y,handleBlur:Z}=f.useFocusController(F,{beforeFocus(){return oe.value},afterFocus(){e.automaticDropdown&&!le.value&&(le.value=!0,R.menuVisibleOnFocus=!0)},beforeBlur(e){var t,l;return(null==(t=K.value)?void 0:t.isFocusInsideContent(e))||(null==(l=j.value)?void 0:l.isFocusInsideContent(e))},afterBlur(){le.value=!1,R.menuVisibleOnFocus=!1}}),ee=o.ref([]),te=o.ref([]),le=o.ref(!1),oe=o.computed((()=>e.disabled||(null==O?void 0:O.disabled))),ae=o.computed((()=>{var e;return null!=(e=null==O?void 0:O.statusIcon)&&e})),ne=o.computed((()=>{const t=te.value.length*e.itemHeight;return t>e.height?e.height:t})),ie=o.computed((()=>e.multiple?v.isArray(e.modelValue)&&e.modelValue.length>0:!M(e.modelValue))),se=o.computed((()=>e.clearable&&!oe.value&&R.inputHovering&&ie.value)),re=o.computed((()=>e.remote&&e.filterable?"":i.ArrowDown)),ue=o.computed((()=>re.value&&w.is("reverse",le.value))),ce=o.computed((()=>(null==E?void 0:E.validateState)||"")),de=o.computed((()=>{if(ce.value)return h.ValidateComponentsMap[ce.value]})),pe=o.computed((()=>e.remote?300:0)),me=o.computed((()=>e.loading?e.loadingText||l("el.select.loading"):!(e.remote&&!R.inputValue&&0===ee.value.length)&&(e.filterable&&R.inputValue&&ee.value.length>0&&0===te.value.length?e.noMatchText||l("el.select.noMatch"):0===ee.value.length?e.noDataText||l("el.select.noData"):null))),fe=t=>{const l=l=>{if(e.filterable&&v.isFunction(e.filterMethod))return!0;if(e.filterable&&e.remote&&v.isFunction(e.remoteMethod))return!0;const o=new RegExp(C.escapeStringRegexp(t),"i");return!t||o.test(N(l)||"")};return e.loading?[]:[...R.createdOptions,...e.options].reduce(((t,o)=>{const a=z(o);if(v.isArray(a)){const e=a.filter(l);e.length>0&&t.push({label:N(o),type:"Group"},...e)}else(e.remote||l(o))&&t.push(o);return t}),[])},ve=()=>{ee.value=fe(""),te.value=fe(R.inputValue)},he=o.computed((()=>{const e=new Map;return ee.value.forEach(((t,l)=>{e.set(Ae(I(t)),{option:t,index:l})})),e})),ge=o.computed((()=>{const e=new Map;return te.value.forEach(((t,l)=>{e.set(Ae(I(t)),{option:t,index:l})})),e})),be=o.computed((()=>te.value.every((e=>B(e))))),ye=g.useFormSize(),Ve=o.computed((()=>"small"===ye.value?"small":"default")),Se=()=>{var t;if(V.isNumber(e.fitInputWidth))return void(_.value=e.fitInputWidth);const l=(null==(t=D.value)?void 0:t.offsetWidth)||200;!e.fitInputWidth&&ee.value.length>0?o.nextTick((()=>{_.value=Math.max(l,Ce())})):_.value=l},Ce=()=>{var e,t;const l=document.createElement("canvas").getContext("2d"),o=w.be("dropdown","item"),a=((null==(t=null==(e=$.value)?void 0:e.listRef)?void 0:t.innerRef)||document).querySelector(`.${o}`);if(null===a||null===l)return 0;const n=getComputedStyle(a),i=Number.parseFloat(n.paddingLeft)+Number.parseFloat(n.paddingRight);l.font=n.font;return te.value.reduce(((e,t)=>{const o=l.measureText(N(t));return Math.max(o.width,e)}),0)+i},we=o.computed((()=>{const t=(()=>{if(!L.value)return 0;const e=window.getComputedStyle(L.value);return Number.parseFloat(e.gap||"6px")})();return{maxWidth:`${q.value&&1===e.maxCollapseTags?R.selectionWidth-R.collapseItemWidth-t:R.selectionWidth}px`}})),xe=o.computed((()=>({maxWidth:`${R.selectionWidth}px`}))),Oe=o.computed((()=>v.isArray(e.modelValue)?0===e.modelValue.length&&!R.inputValue:!e.filterable||!R.inputValue)),Ee=o.computed((()=>{var t;const o=null!=(t=e.placeholder)?t:l("el.select.placeholder");return e.multiple||!ie.value?o:R.selectedLabel})),ke=o.computed((()=>{var e,t;return null==(t=null==(e=K.value)?void 0:e.popperRef)?void 0:t.contentRef})),Te=o.computed((()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&ge.value.has(e.modelValue[t-1])){const{index:l}=ge.value.get(e.modelValue[t-1]);return l}}else if(!M(e.modelValue)&&ge.value.has(e.modelValue)){const{index:t}=ge.value.get(e.modelValue);return t}return-1})),Ne=o.computed({get(){return le.value&&!1!==me.value},set(e){le.value=e}}),Ie=o.computed((()=>e.multiple?e.collapseTags?R.cachedOptions.slice(0,e.maxCollapseTags):R.cachedOptions:[])),Be=o.computed((()=>e.multiple&&e.collapseTags?R.cachedOptions.slice(e.maxCollapseTags):[])),{createNewOption:ze,removeNewOption:Pe,selectNewOption:Me,clearAllNewOption:Re}=s.useAllowCreate(e,R),_e=()=>{oe.value||(R.menuVisibleOnFocus?R.menuVisibleOnFocus=!1:le.value=!le.value)},De=()=>{R.inputValue.length>0&&!le.value&&(le.value=!0),ze(R.inputValue),Ke(R.inputValue)},Le=a.debounce(De,pe.value),Ke=t=>{R.previousQuery===t||U.value||(R.previousQuery=t,e.filterable&&v.isFunction(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&v.isFunction(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&te.value.length?o.nextTick(je):o.nextTick(Xe))},je=()=>{const e=te.value.filter((e=>!e.disabled&&"Group"!==e.type)),t=e.find((e=>e.created)),l=e[0];R.hoveringIndex=He(te.value,t||l)},Fe=l=>{t(S.UPDATE_MODEL_EVENT,l),(l=>{a.isEqual(e.modelValue,l)||t(S.CHANGE_EVENT,l)})(l),R.previousValue=e.multiple?String(l):l},He=(t=[],l)=>{if(!v.isObject(l))return t.indexOf(l);const o=e.valueKey;let n=-1;return t.some(((e,t)=>a.get(e,o)===a.get(l,o)&&(n=t,!0))),n},Ae=t=>v.isObject(t)?a.get(t,e.valueKey):t,$e=()=>{Se()},We=()=>{R.selectionWidth=L.value.getBoundingClientRect().width},qe=()=>{var e,t;null==(t=null==(e=K.value)?void 0:e.updatePopper)||t.call(e)},Ue=()=>{var e,t;null==(t=null==(e=j.value)?void 0:e.updatePopper)||t.call(e)},Ge=t=>{if(e.multiple){let l=e.modelValue.slice();const o=He(l,I(t));o>-1?(l=[...l.slice(0,o),...l.slice(o+1)],R.cachedOptions.splice(o,1),Pe(t)):(e.multipleLimit<=0||l.length<e.multipleLimit)&&(l=[...l,I(t)],R.cachedOptions.push(t),Me(t)),Fe(l),t.created&&Ke(""),e.filterable&&!e.reserveKeyword&&(R.inputValue="")}else R.selectedLabel=N(t),Fe(I(t)),le.value=!1,Me(t),t.created||Re();Qe()},Qe=()=>{var e;null==(e=F.value)||e.focus()},Je=(e,t=void 0)=>{const l=te.value;if(!["forward","backward"].includes(e)||oe.value||l.length<=0||be.value||U.value)return;if(!le.value)return _e();void 0===t&&(t=R.hoveringIndex);let o=-1;"forward"===e?(o=t+1,o>=l.length&&(o=0)):"backward"===e&&(o=t-1,(o<0||o>=l.length)&&(o=l.length-1));const a=l[o];if(B(a)||"Group"===a.type)return Je(e,o);R.hoveringIndex=o,Ze(o)},Xe=()=>{e.multiple?R.hoveringIndex=te.value.findIndex((t=>e.modelValue.some((e=>Ae(e)===Ae(t))))):R.hoveringIndex=te.value.findIndex((t=>Ae(t)===Ae(e.modelValue)))},Ye=t=>{if(R.inputValue=t.target.value,!e.remote)return De();Le()},Ze=e=>{$.value.scrollToItem(e)},et=(e,t)=>{const l=Ae(e);if(he.value.has(l)){const{option:e}=he.value.get(l);return e}if(t&&t.length){const e=t.find((e=>Ae(I(e))===l));if(e)return e}return{[T.value.value]:e,[T.value.label]:e}},tt=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const t=R.cachedOptions.slice();R.cachedOptions.length=0,R.previousValue=e.modelValue.toString();for(const l of e.modelValue){const e=et(l,t);R.cachedOptions.push(e)}}else R.cachedOptions=[],R.previousValue=void 0;else if(ie.value){R.previousValue=e.modelValue;const l=te.value,o=l.findIndex((t=>Ae(I(t))===Ae(e.modelValue)));~o?R.selectedLabel=N(l[o]):R.selectedLabel&&!t||(R.selectedLabel=Ae(e.modelValue))}else R.selectedLabel="",R.previousValue=void 0;Re(),Se()};return o.watch((()=>e.fitInputWidth),(()=>{Se()})),o.watch(le,(l=>{l?(e.persistent||Se(),Ke("")):(R.inputValue="",R.previousQuery=null,R.isBeforeHide=!0,ze("")),t("visible-change",l)})),o.watch((()=>e.modelValue),((t,l)=>{var o;(!t||v.isArray(t)&&0===t.length||e.multiple&&!a.isEqual(t.toString(),R.previousValue)||!e.multiple&&Ae(t)!==Ae(R.previousValue))&&tt(!0),!a.isEqual(t,l)&&e.validateEvent&&(null==(o=null==E?void 0:E.validate)||o.call(E,"change").catch((e=>y.debugWarn(e))))}),{deep:!0}),o.watch((()=>e.options),(()=>{const e=F.value;(!e||e&&document.activeElement!==e)&&tt()}),{deep:!0,flush:"post"}),o.watch((()=>te.value),(()=>(Se(),$.value&&o.nextTick($.value.resetScrollTop)))),o.watchEffect((()=>{R.isBeforeHide||ve()})),o.watchEffect((()=>{const{valueKey:t,options:l}=e,o=new Map;for(const e of l){const l=I(e);let n=l;if(v.isObject(n)&&(n=a.get(l,t)),o.get(n)){y.debugWarn("ElSelectV2","The option values you provided seem to be duplicated, which may cause some problems, please check.");break}o.set(n,!0)}})),o.onMounted((()=>{tt()})),n.useResizeObserver(D,$e),n.useResizeObserver(L,We),n.useResizeObserver($,qe),n.useResizeObserver(X,qe),n.useResizeObserver(W,Ue),n.useResizeObserver(q,(()=>{R.collapseItemWidth=q.value.getBoundingClientRect().width})),{inputId:k,collapseTagSize:Ve,currentPlaceholder:Ee,expanded:le,emptyText:me,popupHeight:ne,debounce:pe,allOptions:ee,filteredOptions:te,iconComponent:re,iconReverse:ue,tagStyle:we,collapseTagStyle:xe,popperSize:_,dropdownMenuVisible:Ne,hasModelValue:ie,shouldShowPlaceholder:Oe,selectDisabled:oe,selectSize:ye,needStatusIcon:ae,showClearBtn:se,states:R,isFocused:Y,nsSelect:w,nsInput:x,inputRef:F,menuRef:$,tagMenuRef:W,tooltipRef:K,tagTooltipRef:j,selectRef:D,wrapperRef:X,selectionRef:L,prefixRef:H,suffixRef:A,collapseItemRef:q,popperRef:ke,validateState:ce,validateIcon:de,showTagList:Ie,collapseTagList:Be,debouncedOnInputChange:Le,deleteTag:(l,o)=>{let a=e.modelValue.slice();const n=He(a,I(o));n>-1&&!oe.value&&(a=[...e.modelValue.slice(0,n),...e.modelValue.slice(n+1)],R.cachedOptions.splice(n,1),Fe(a),t("remove-tag",I(o)),Pe(o)),l.stopPropagation(),Qe()},getLabel:N,getValue:I,getDisabled:B,getValueKey:Ae,handleClear:()=>{let l;l=v.isArray(e.modelValue)?[]:P.value,e.multiple?R.cachedOptions=[]:R.selectedLabel="",le.value=!1,Fe(l),t("clear"),Re(),Qe()},handleClickOutside:e=>{if(le.value=!1,Y.value){const t=new FocusEvent("focus",e);Z(t)}},handleDel:l=>{var o;if(e.multiple&&(l.code!==b.EVENT_CODE.delete&&0===R.inputValue.length)){l.preventDefault();const n=e.modelValue.slice(),i=(o=n,a.findLastIndex(o,(e=>!R.cachedOptions.some((t=>I(t)===e&&B(t))))));if(i<0)return;const s=n[i];n.splice(i,1);const r=R.cachedOptions[i];R.cachedOptions.splice(i,1),Pe(r),Fe(n),t("remove-tag",s)}},handleEsc:()=>{R.inputValue.length>0?R.inputValue="":le.value=!1},focus:Qe,blur:()=>{var e;if(le.value)return le.value=!1,void o.nextTick((()=>{var e;return null==(e=F.value)?void 0:e.blur()}));null==(e=F.value)||e.blur()},handleMenuEnter:()=>(R.isBeforeHide=!1,o.nextTick((()=>{~Te.value&&Ze(R.hoveringIndex)}))),handleResize:$e,resetSelectionWidth:We,updateTooltip:qe,updateTagTooltip:Ue,updateOptions:ve,toggleMenu:_e,scrollTo:Ze,onInput:Ye,onKeyboardNavigate:Je,onKeyboardSelect:()=>{if(!le.value)return _e();~R.hoveringIndex&&te.value[R.hoveringIndex]&&Ge(te.value[R.hoveringIndex])},onSelect:Ge,onHover:e=>{R.hoveringIndex=null!=e?e:-1},handleCompositionStart:G,handleCompositionEnd:Q,handleCompositionUpdate:J}}}}]);