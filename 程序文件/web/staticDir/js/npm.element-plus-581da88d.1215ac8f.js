"use strict";(self.webpackChunknote_star_cn=self.webpackChunknote_star_cn||[]).push([[8801],{1132:function(e,t,o){o.d(t,{Ks:function(){return m}});var n=o(2824),l=o(22974),i=o(76031);function a(e){let t;const o=(0,n.KR)(!1),a=(0,n.Kh)({...e,originalPosition:"",originalOverflow:"",visible:!1});function r(){var e,t;null==(t=null==(e=c.$el)?void 0:e.parentNode)||t.removeChild(c.$el)}function s(){if(!o.value)return;const e=a.parent;o.value=!1,e.vLoadingAddClassList=void 0,function(){const e=a.parent,t=c.ns;if(!e.vLoadingAddClassList){let o=e.getAttribute("loading-number");o=Number.parseInt(o)-1,o?e.setAttribute("loading-number",o.toString()):((0,i.vy)(e,t.bm("parent","relative")),e.removeAttribute("loading-number")),(0,i.vy)(e,t.bm("parent","hidden"))}r(),u.unmount()}()}const d=(0,n.pM)({name:"ElLoading",setup(e,{expose:t}){const{ns:o,zIndex:i}=(0,l.ht)("loading");return t({ns:o,zIndex:i}),()=>{const e=a.spinner||a.svg,t=(0,n.h)("svg",{class:"circular",viewBox:a.svgViewBox?a.svgViewBox:"0 0 50 50",...e?{innerHTML:e}:{}},[(0,n.h)("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),l=a.text?(0,n.h)("p",{class:o.b("text")},[a.text]):void 0;return(0,n.h)(n.eB,{name:o.b("fade"),onAfterLeave:s},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.bF)("div",{style:{backgroundColor:a.background||""},class:[o.b("mask"),a.customClass,a.fullscreen?"is-fullscreen":""]},[(0,n.h)("div",{class:o.b("spinner")},[t,l])]),[[n.aG,a.visible]])]))})}}}),u=(0,n.Ef)(d),c=u.mount(document.createElement("div"));return{...(0,n.QW)(a),setText:function(e){a.text=e},removeElLoadingChild:r,close:function(){var n;e.beforeClose&&!e.beforeClose()||(o.value=!0,clearTimeout(t),t=setTimeout(s,400),a.visible=!1,null==(n=e.closed)||n.call(e))},handleAfterLeave:s,vm:c,get $el(){return c.$el}}}var r=o(52307),s=o(90033);let d;const u=function(e={}){if(!r.oc)return;const t=c(e);if(t.fullscreen&&d)return d;const o=a({...t,closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(d=void 0)}});p(t,t.parent,o),v(t,t.parent,o),t.parent.vLoadingAddClassList=()=>v(t,t.parent,o);let l=t.parent.getAttribute("loading-number");return l=l?`${Number.parseInt(l)+1}`:"1",t.parent.setAttribute("loading-number",l),t.parent.appendChild(o.$el),(0,n.dY)((()=>o.visible.value=t.visible)),t.fullscreen&&(d=o),o},c=e=>{var t,o,n,l;let i;return i=(0,s.Kg)(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:i===document.body||e.body?document.body:i,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:i===document.body&&(null==(o=e.fullscreen)||o),lock:null!=(n=e.lock)&&n,customClass:e.customClass||"",visible:null==(l=e.visible)||l,beforeClose:e.beforeClose,closed:e.closed,target:i}},p=async(e,t,o)=>{const{nextZIndex:l}=o.vm.zIndex||o.vm._.exposed.zIndex,a={};if(e.fullscreen)o.originalPosition.value=(0,i.gd)(document.body,"position"),o.originalOverflow.value=(0,i.gd)(document.body,"overflow"),a.zIndex=l();else if(e.parent===document.body){o.originalPosition.value=(0,i.gd)(document.body,"position"),await(0,n.dY)();for(const t of["top","left"]){const o="top"===t?"scrollTop":"scrollLeft";a[t]=e.target.getBoundingClientRect()[t]+document.body[o]+document.documentElement[o]-Number.parseInt((0,i.gd)(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])a[t]=`${e.target.getBoundingClientRect()[t]}px`}else o.originalPosition.value=(0,i.gd)(t,"position");for(const[e,t]of Object.entries(a))o.$el.style[e]=t},v=(e,t,o)=>{const n=o.vm.ns||o.vm._.exposed.ns;["absolute","fixed","sticky"].includes(o.originalPosition.value)?(0,i.vy)(t,n.bm("parent","relative")):(0,i.iQ)(t,n.bm("parent","relative")),e.fullscreen&&e.lock?(0,i.iQ)(t,n.bm("parent","hidden")):(0,i.vy)(t,n.bm("parent","hidden"))},f=Symbol("ElLoading"),b=(e,t)=>{var o,l,i,a;const r=t.instance,d=e=>(0,s.Gv)(t.value)?t.value[e]:void 0,c=t=>(e=>{const t=(0,s.Kg)(e)&&(null==r?void 0:r[e])||e;return t?(0,n.KR)(t):t})(d(t)||e.getAttribute(`element-loading-${(0,s.Tg)(t)}`)),p=null!=(o=d("fullscreen"))?o:t.modifiers.fullscreen,v={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:p,target:null!=(l=d("target"))?l:p?void 0:e,body:null!=(i=d("body"))?i:t.modifiers.body,lock:null!=(a=d("lock"))?a:t.modifiers.lock};e[f]={options:v,instance:u(v)}},g={mounted(e,t){t.value&&b(e,t)},updated(e,t){const o=e[f];t.oldValue!==t.value&&(t.value&&!t.oldValue?b(e,t):t.value&&t.oldValue?(0,s.Gv)(t.value)&&((e,t)=>{for(const o of Object.keys(t))(0,n.i9)(t[o])&&(t[o].value=e[o])})(t.value,o.options):null==o||o.instance.close())},unmounted(e){var t;null==(t=e[f])||t.instance.close(),e[f]=null}},m={install(e){e.directive("loading",g),e.config.globalProperties.$loading=u},directive:g,service:u}},13840:function(e,t,o){o.d(t,{C4:function(){return f}});var n=o(2824),l=o(91361),i=o(50819),a=o(25343);const r=(0,i.b_)({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:a.Ze}}),s={click:e=>e instanceof MouseEvent};var d=o(78396),u=o(65980);const c=(0,n.pM)({name:"ElLink"}),p=(0,n.pM)({...c,props:r,emits:s,setup(e,{emit:t}){const o=e,i=(0,u.DU)("link"),a=(0,n.EW)((()=>[i.b(),i.m(o.type),i.is("disabled",o.disabled),i.is("underline",o.underline&&!o.disabled)]));function r(e){o.disabled||t("click",e)}return(e,t)=>((0,n.uX)(),(0,n.CE)("a",{class:(0,n.C4)((0,n.R1)(a)),href:e.disabled||!e.href?void 0:e.href,target:e.disabled||!e.href?void 0:e.target,onClick:r},[e.icon?((0,n.uX)(),(0,n.Wv)((0,n.R1)(l.tk),{key:0},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)(e.icon)))])),_:1})):(0,n.Q3)("v-if",!0),e.$slots.default?((0,n.uX)(),(0,n.CE)("span",{key:1,class:(0,n.C4)((0,n.R1)(i).e("inner"))},[(0,n.RG)(e.$slots,"default")],2)):(0,n.Q3)("v-if",!0),e.$slots.icon?(0,n.RG)(e.$slots,"icon",{key:2}):(0,n.Q3)("v-if",!0)],10,["href","target"]))}});var v=(0,d.A)(p,[["__file","link.vue"]]);const f=(0,o(64769).GU)(v)},29477:function(e,t,o){o.d(t,{O7:function(){return A}});var n=o(2824),l=o(54991),i=o(89734),a=o(53889),r=o(67996),s=o(33385);const d=(e,t)=>{const o=e.toLowerCase();return(t.label||t.value).toLowerCase().includes(o)};var u=o(28190),c=o(50819),p=o(90033),v=o(31069);const f=(0,c.b_)({...u.$,options:{type:(0,c.jq)(Array),default:()=>[]},prefix:{type:(0,c.jq)([String,Array]),default:"@",validator:e=>(0,p.Kg)(e)?1===e.length:e.every((e=>(0,p.Kg)(e)&&1===e.length))},split:{type:String,default:" ",validator:e=>1===e.length},filterOption:{type:(0,c.jq)([Boolean,Function]),default:()=>d,validator:e=>!1===e||(0,p.Tn)(e)},placement:{type:(0,c.jq)(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:(0,c.jq)(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:(0,c.jq)(Object),default:()=>({})}}),b={[v.l4]:e=>(0,p.Kg)(e),search:(e,t)=>(0,p.Kg)(e)&&(0,p.Kg)(t),select:(e,t)=>(0,p.Kg)(e.value)&&(0,p.Kg)(t),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent};var g=o(55998);const m=(0,c.b_)({options:{type:(0,c.jq)(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),h={select:e=>(0,p.Kg)(e.value)};var y=o(78396),x=o(65980),R=o(87404),w=o(98261);const k=(0,n.pM)({name:"ElMentionDropdown"}),C=(0,n.pM)({...k,props:m,emits:h,setup(e,{expose:t,emit:o}){const l=e,i=(0,x.DU)("mention"),{t:a}=(0,R.Ym)(),r=(0,n.KR)(-1),s=(0,n.KR)(),d=(0,n.KR)(),u=(0,n.KR)(),c=(e,t)=>[i.be("dropdown","item"),i.is("hovering",r.value===t),i.is("disabled",e.disabled||l.disabled)],p=(0,n.EW)((()=>l.disabled||l.options.every((e=>e.disabled)))),v=(0,n.EW)((()=>l.options[r.value])),f=e=>{const{options:t}=l;if(0===t.length||p.value)return;"next"===e?(r.value++,r.value===t.length&&(r.value=0)):"prev"===e&&(r.value--,r.value<0&&(r.value=t.length-1));const o=t[r.value];o.disabled?f(e):(0,n.dY)((()=>b(o)))},b=e=>{var t,o,n,a;const{options:r}=l,c=r.findIndex((t=>t.value===e.value)),p=null==(t=d.value)?void 0:t[c];if(p){const e=null==(n=null==(o=u.value)?void 0:o.querySelector)?void 0:n.call(o,`.${i.be("dropdown","wrap")}`);e&&(0,w.Rt)(e,p)}null==(a=s.value)||a.handleScroll()};return(0,n.wB)((()=>l.options),(()=>{p.value||0===l.options.length?r.value=-1:r.value=0}),{immediate:!0}),t({hoveringIndex:r,navigateOptions:f,selectHoverOption:()=>{v.value&&o("select",v.value)},hoverOption:v}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",{ref_key:"dropdownRef",ref:u,class:(0,n.C4)((0,n.R1)(i).b("dropdown"))},[e.$slots.header?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,n.C4)((0,n.R1)(i).be("dropdown","header"))},[(0,n.RG)(e.$slots,"header")],2)):(0,n.Q3)("v-if",!0),(0,n.bo)((0,n.bF)((0,n.R1)(g.kA),{id:e.contentId,ref_key:"scrollbarRef",ref:s,tag:"ul","wrap-class":(0,n.R1)(i).be("dropdown","wrap"),"view-class":(0,n.R1)(i).be("dropdown","list"),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.options,((t,i)=>((0,n.uX)(),(0,n.CE)("li",{id:`${e.contentId}-${i}`,ref_for:!0,ref_key:"optionRefs",ref:d,key:i,class:(0,n.C4)(c(t,i)),role:"option","aria-disabled":t.disabled||e.disabled||void 0,"aria-selected":r.value===i,onMousemove:e=>(e=>{r.value=e})(i),onClick:(0,n.D$)((e=>(e=>{e.disabled||l.disabled||o("select",e)})(t)),["stop"])},[(0,n.RG)(e.$slots,"label",{item:t,index:i},(()=>{var e;return[(0,n.Lk)("span",null,(0,n.v_)(null!=(e=t.label)?e:t.value),1)]}))],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])))),128))])),_:3},8,["id","wrap-class","view-class","aria-label"]),[[n.aG,e.options.length>0&&!e.loading]]),e.loading?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,n.C4)((0,n.R1)(i).be("dropdown","loading"))},[(0,n.RG)(e.$slots,"loading",{},(()=>[(0,n.eW)((0,n.v_)((0,n.R1)(a)("el.mention.loading")),1)]))],2)):(0,n.Q3)("v-if",!0),e.$slots.footer?((0,n.uX)(),(0,n.CE)("div",{key:2,class:(0,n.C4)((0,n.R1)(i).be("dropdown","footer"))},[(0,n.RG)(e.$slots,"footer")],2)):(0,n.Q3)("v-if",!0)],2))}});var E=(0,y.A)(C,[["__file","mention-dropdown.vue"]]),I=o(99510),$=o(77010),S=o(53600),_=o(53344);const B=(0,n.pM)({name:"ElMention",inheritAttrs:!1}),W=(0,n.pM)({...B,props:f,emits:b,setup(e,{expose:t,emit:o}){const d=e,c=(0,n.EW)((()=>(0,l.A)(d,Object.keys(u.$)))),f=(0,x.DU)("mention"),b=(0,I.CB)(),g=(0,$.Bi)(),m=(0,n.KR)(),h=(0,n.KR)(),y=(0,n.KR)(),R=(0,n.KR)(!1),w=(0,n.KR)(),k=(0,n.KR)(),C=(0,n.EW)((()=>d.showArrow?d.placement:`${d.placement}-start`)),B=(0,n.EW)((()=>d.showArrow?["bottom","top"]:["bottom-start","top-start"])),W=(0,n.EW)((()=>{const{filterOption:e,options:t}=d;return k.value&&e?t.filter((t=>e(k.value.pattern,t))):t})),K=(0,n.EW)((()=>R.value&&(!!W.value.length||d.loading))),A=(0,n.EW)((()=>{var e;return`${g.value}-${null==(e=y.value)?void 0:e.hoveringIndex}`})),L=e=>{o("update:modelValue",e),G()},N=e=>{var t,l,i,a;if("code"in e&&!(null==(t=m.value)?void 0:t.isComposing))switch(e.code){case _.R.left:case _.R.right:G();break;case _.R.up:case _.R.down:if(!R.value)return;e.preventDefault(),null==(l=y.value)||l.navigateOptions(e.code===_.R.up?"prev":"next");break;case _.R.enter:case _.R.numpadEnter:if(!R.value)return;e.preventDefault(),(null==(i=y.value)?void 0:i.hoverOption)?null==(a=y.value)||a.selectHoverOption():R.value=!1;break;case _.R.esc:if(!R.value)return;e.preventDefault(),R.value=!1;break;case _.R.backspace:if(d.whole&&k.value){const{splitIndex:t,selectionEnd:l,pattern:i,prefixIndex:a,prefix:r}=k.value,s=F();if(!s)return;const u=s.value,c=d.options.find((e=>e.value===i));if(((0,p.Tn)(d.checkIsWhole)?d.checkIsWhole(i,r):c)&&-1!==t&&t+1===l){e.preventDefault();const l=u.slice(0,a)+u.slice(t+1);o(v.l4,l);const i=a;(0,n.dY)((()=>{s.selectionStart=i,s.selectionEnd=i,X()}))}}}},{wrapperRef:T}=(0,S.K)(m,{beforeFocus(){return b.value},afterFocus(){G()},beforeBlur(e){var t;return null==(t=h.value)?void 0:t.isFocusInsideContent(e)},afterBlur(){R.value=!1}}),M=()=>{G()},O=e=>{if(!k.value)return;const t=F();if(!t)return;const l=t.value,{split:i}=d,a=l.slice(k.value.end),r=a.startsWith(i),s=`${e.value}${r?"":i}`,u=l.slice(0,k.value.start)+s+a;o(v.l4,u),o("select",e,k.value.prefix);const c=k.value.start+s.length+(r?1:0);(0,n.dY)((()=>{t.selectionStart=c,t.selectionEnd=c,t.focus(),X()}))},F=()=>{var e,t;return"textarea"===d.type?null==(e=m.value)?void 0:e.textarea:null==(t=m.value)?void 0:t.input},G=()=>{setTimeout((()=>{V(),X(),(0,n.dY)((()=>{var e;return null==(e=h.value)?void 0:e.updatePopper()}))}),0)},V=()=>{const e=F();if(!e)return;const t=((e,t={debug:!1,useSelectionEnd:!1})=>{const o=null!==e.selectionStart?e.selectionStart:0,n=null!==e.selectionEnd?e.selectionEnd:0,l=t.useSelectionEnd?n:o;if(t.debug){const e=document.querySelector("#input-textarea-caret-position-mirror-div");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)}const i=document.createElement("div");i.id="input-textarea-caret-position-mirror-div",document.body.appendChild(i);const a=i.style,r=window.getComputedStyle(e),d="INPUT"===e.nodeName;a.whiteSpace=d?"nowrap":"pre-wrap",d||(a.wordWrap="break-word"),a.position="absolute",t.debug||(a.visibility="hidden"),["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach((e=>{if(d&&"lineHeight"===e)if("border-box"===r.boxSizing){const e=Number.parseInt(r.height),t=Number.parseInt(r.paddingTop)+Number.parseInt(r.paddingBottom)+Number.parseInt(r.borderTopWidth)+Number.parseInt(r.borderBottomWidth),o=t+Number.parseInt(r.lineHeight);a.lineHeight=e>o?e-t+"px":e===o?r.lineHeight:"0"}else a.lineHeight=r.height;else a[e]=r[e]})),(0,s.gm)()?e.scrollHeight>Number.parseInt(r.height)&&(a.overflowY="scroll"):a.overflow="hidden",i.textContent=e.value.slice(0,Math.max(0,l)),d&&i.textContent&&(i.textContent=i.textContent.replace(/\s/g," "));const u=document.createElement("span");u.textContent=e.value.slice(Math.max(0,l))||".",u.style.position="relative",u.style.left=-e.scrollLeft+"px",u.style.top=-e.scrollTop+"px",i.appendChild(u);const c={top:u.offsetTop+Number.parseInt(r.borderTopWidth),left:u.offsetLeft+Number.parseInt(r.borderLeftWidth),height:1.5*Number.parseInt(r.fontSize)};return t.debug?u.style.backgroundColor="#aaa":document.body.removeChild(i),c.left>=e.clientWidth&&(c.left=e.clientWidth),c})(e),o=e.getBoundingClientRect(),n=m.value.$el.getBoundingClientRect();w.value={position:"absolute",width:0,height:`${t.height}px`,left:t.left+o.left-n.left+"px",top:t.top+o.top-n.top+"px"}},X=()=>{const e=F();if(document.activeElement!==e)return void(R.value=!1);const{prefix:t,split:n}=d;if(k.value=((e,t,o)=>{const{selectionEnd:n}=e;if(null===n)return;const l=e.value,i=(0,r.A)(t);let a,s=-1;for(let e=n-1;e>=0;--e){const t=l[e];if(t!==o&&"\n"!==t&&"\r"!==t){if(i.includes(t)){const o=-1===s?n:s;a={pattern:l.slice(e+1,o),start:e+1,end:o,prefix:t,prefixIndex:e,splitIndex:s,selectionEnd:n};break}}else s=e}return a})(e,t,n),k.value&&-1===k.value.splitIndex)return R.value=!0,void o("search",k.value.pattern,k.value.prefix);R.value=!1};return t({input:m,tooltip:h,dropdownVisible:K}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",{ref_key:"wrapperRef",ref:T,class:(0,n.C4)([(0,n.R1)(f).b(),(0,n.R1)(f).is("disabled",(0,n.R1)(b))])},[(0,n.bF)((0,n.R1)(i.WK),(0,n.v6)((0,n.v6)((0,n.R1)(c),e.$attrs),{ref_key:"elInputRef",ref:m,"model-value":e.modelValue,disabled:(0,n.R1)(b),role:(0,n.R1)(K)?"combobox":void 0,"aria-activedescendant":(0,n.R1)(K)?(0,n.R1)(A)||"":void 0,"aria-controls":(0,n.R1)(K)?(0,n.R1)(g):void 0,"aria-expanded":(0,n.R1)(K)||void 0,"aria-label":e.ariaLabel,"aria-autocomplete":(0,n.R1)(K)?"none":void 0,"aria-haspopup":(0,n.R1)(K)?"listbox":void 0,onInput:L,onKeydown:N,onMousedown:M}),(0,n.eX)({_:2},[(0,n.pI)(e.$slots,((t,o)=>({name:o,fn:(0,n.k6)((t=>[(0,n.RG)(e.$slots,o,(0,n._B)((0,n.Ng)(t)))]))})))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),(0,n.bF)((0,n.R1)(a.R7),{ref_key:"tooltipRef",ref:h,visible:(0,n.R1)(K),"popper-class":[(0,n.R1)(f).e("popper"),e.popperClass],"popper-options":e.popperOptions,placement:(0,n.R1)(C),"fallback-placements":(0,n.R1)(B),effect:"light",pure:"",offset:e.offset,"show-arrow":e.showArrow},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{style:(0,n.Tr)(w.value)},null,4)])),content:(0,n.k6)((()=>{var t;return[(0,n.bF)(E,{ref_key:"dropdownRef",ref:y,options:(0,n.R1)(W),disabled:(0,n.R1)(b),loading:e.loading,"content-id":(0,n.R1)(g),"aria-label":e.ariaLabel,onSelect:O,onClick:(0,n.D$)(null==(t=m.value)?void 0:t.focus,["stop"])},(0,n.eX)({_:2},[(0,n.pI)(e.$slots,((t,o)=>({name:o,fn:(0,n.k6)((t=>[(0,n.RG)(e.$slots,o,(0,n._B)((0,n.Ng)(t)))]))})))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]})),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var K=(0,y.A)(W,[["__file","mention.vue"]]);const A=(0,o(64769).GU)(K)}}]);