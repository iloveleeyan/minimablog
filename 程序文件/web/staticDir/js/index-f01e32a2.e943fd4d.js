"use strict";(self.webpackChunknote_star_cn=self.webpackChunknote_star_cn||[]).push([[1400],{5051:function(t,e,i){i.d(e,{A:function(){return p}});var n=i(2824);const a={key:0,class:"content-friend"},o={class:"page-header"},s={class:"links-grid"},l=["href"],r={class:"image-slot"},c={class:"name exceed-dot"},m={class:"desc"};i(18111),i(7588);var d=i(41880),u=i(53889),h={props:["list","title","desc"],components:{ElImage:d.Zq,ElTooltip:u.R7},data(){return{imageList:[]}},computed:{parseList(){let t=decodeURIComponent(this.list);return JSON.parse(t)}},created(){this.imageList=this.parseList,this.imageList.forEach((t=>{t.title=t.title.replace(/<\/?.+?\/?>/g,""),t.desc=t.desc.replace(/<\/?.+?\/?>/g,"")}))},methods:{}};var p=(0,i(66262).A)(h,[["render",function(t,e,i,d,u,h){const p=(0,n.g2)("icon-picture"),g=(0,n.g2)("el-icon"),f=(0,n.g2)("el-image"),k=(0,n.g2)("el-tooltip");return u.imageList&&u.imageList.length>0?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("header",o,[(0,n.Lk)("h1",null,(0,n.v_)(i.title),1),(0,n.Lk)("p",null,(0,n.v_)(i.desc),1)]),(0,n.Lk)("div",s,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.imageList,((t,e)=>((0,n.uX)(),(0,n.Wv)(k,{effect:"dark",content:t.href,placement:"top",key:e},{default:(0,n.k6)((()=>[(0,n.Lk)("a",{class:"link-card card-simple",href:t.href,target:"_blank"},[(0,n.bF)(f,{fit:"cover",src:t.src,class:"logo"},{error:(0,n.k6)((()=>[(0,n.Lk)("div",r,[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(p)])),_:1})])])),_:2},1032,["src"]),(0,n.Lk)("h3",c,(0,n.v_)(t.title),1),(0,n.Lk)("p",m,(0,n.v_)(t.desc),1)],8,l)])),_:2},1032,["content"])))),128))])])):(0,n.Q3)("",!0)}]])},9482:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(85860),o=i(88983),s=i(66262),l=t([o]);o=(l.then?(await l)():l)[0];const r=(0,s.A)(o.A,[["render",a.X]]);e.A=r,n()}catch(t){n(t)}}))},9872:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(90578),o=i(10057),s=i(66262),l=t([o]);o=(l.then?(await l)():l)[0];const r=(0,s.A)(o.A,[["render",a.X]]);e.A=r,n()}catch(t){n(t)}}))},10057:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{A:function(){return a.A}});var a=i(91418),o=t([a]);a=(o.then?(await o)():o)[0],n()}catch(t){n(t)}}))},15020:function(t,e,i){i.d(e,{A:function(){return r}});var n=i(2824);i(44114),i(18111),i(22489),i(61701),i(14603),i(47566),i(98721);var a=i(71710),o=i.n(a),s=i(4213),l={name:"ExportArticleView",components:{},data(){return{redirectUrl:this.$route.query.redirectUrl,paramsExport:{waitListFromDownloadToRedirect:2e3}}},created(){},methods:{getPageContent(){return{htmlContent:document.documentElement.outerHTML,images:Array.from(document.querySelectorAll("img")).filter((t=>t.src.indexOf(window.location.host)>-1)).map((t=>({url:t.src,content:null})))}},replaceArticle(t){return t.replace(/(<a\s+[^>]*?\s+)data-article="([^"]*)"[^>]*>(.*?)<\/a>/g,((t,e,i,n)=>`${e}href="${`./article-list/${i.split("/").pop()}.html`}">${n}</a>`))},replaceImage(t,e){const i=[];return t=t.replace(/<img[^>]+src="([^">]+)"/g,((t,n)=>{if(n.indexOf(window.location.host)>-1){const a=n.split("/").pop(),o=`../image/article/${e}/${a}`;return i.push({originalUrl:n,relativePath:o}),t.replace(n,o)}return t.replace(n,n)}))},addScript(t){return t=t.replace("</body>","\n    <script>\n        document.body.className = 'body-export'\n        // 获取按钮和弹出层元素\n        const dropdownMenu = document.querySelector('.dropdown-menu')\n        const elPopper = document.querySelector('.el-popper')\n\n        // 添加点击事件监听器\n        dropdownMenu.addEventListener('click', function() {\n            // 切换显示和隐藏\n            if (elPopper.style.display === 'none' || elPopper.style.display === '') {\n                elPopper.style.display = 'block'\n            } else {\n                elPopper.style.display = 'none'\n            }\n        })\n\n        const listItems = document.querySelectorAll('li[data-article-id]')\n\n        listItems.forEach(li => {\n          const articleId = li.getAttribute('data-article-id')\n          const currentPath = window.location.pathname\n          let basePath = currentPath.substring(0, currentPath.lastIndexOf('/') + 1)\n          basePath = basePath.replace('/article-list','')\n          const url = `${basePath}${articleId}`\n          li.addEventListener('click', () => {\n              window.location.href = url\n          })\n        })\n    <\/script>\n</body>")},async downloadArticle(){const t=new URL(location.href).pathname.split("/").pop().replace(".html",""),e=new(o()),i=this.getPageContent();let n=i.htmlContent;n=n.replaceAll("/staticDir/css/","../staticDir/css/"),n=n.replace(/\/\d{4}-\d{2}\//,"../article-list/").replace(/\/\d{4}-\d{2}\//,"../article-list/"),n=n.replace(/<a\s+class="article-title-back">(.*?)<\/a>/g,'<a class="article-title-back" onclick="history.go(-1)">$1</a>'),n=n.replace(/<a\s+class="article-next-prev">(.*?)<\/a>/,'<a class="article-next-prev" onclick="history.go(-1)">$1</a>'),n=n.replace(/<a\s+class="article-next-prev mr-10">(.*?)<\/a>/g,""),n=n.replace(/<a\s+class="header-title-text text-black"\s+href="[^"]*"/g,'<a class="header-title-text text-black" href="../index.html"'),n=this.addScript(n),n=this.replaceArticle(n),n=this.replaceImage(n,t);const a=`article-list/${t}.html`;e.file(a,n);const l=e.folder(`image/article/${t}`);for(const t of i.images){const e=await fetch(t.url,{}),i=await e.blob();let n=t.url.split("/").pop();l.file(n,i)}e.generateAsync({type:"blob"}).then((e=>{(0,s.saveAs)(e,`article-list-${t}.zip`)}));let r=this.redirectUrl;setTimeout((function(){const t=r.split(",")[0].replace("...","?");r=r.replace(t+",",""),location.href=t+"?redirectUrl="+r+"&isExporting=true"}),this.paramsExport.waitListFromDownloadToRedirect)}}};var r=(0,i(66262).A)(l,[["render",function(t,e,i,a,o,s){return(0,n.uX)(),(0,n.CE)("div")}]])},18543:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{A:function(){return a.A}});var a=i(45462),o=t([a]);a=(o.then?(await o)():o)[0],n()}catch(t){n(t)}}))},19913:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(55878),o=i(87208),s=i(66262),l=t([o]);o=(l.then?(await l)():l)[0];const r=(0,s.A)(o.A,[["render",a.X]]);e.A=r,n()}catch(t){n(t)}}))},22183:function(t,e,i){i.d(e,{X:function(){return r}});var n=i(2824);const a={class:"widget-side-container"},o={key:1,class:"widget-side-main"},s=["onClick"],l={key:0,class:"article-one"};function r(t,e,i,r,c,m){return(0,n.uX)(),(0,n.CE)("div",a,[c.isDisplayDefault?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,onClick:e[0]||(e[0]=t=>m.switchDisplay())},e[2]||(e[2]=[(0,n.Lk)("div",{class:"widget-side-container-button"},[(0,n.Lk)("i",{class:"fa fa-archive"})],-1)]))),c.isDisplayDefault?((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",{class:(0,n.C4)("widget-side-container-title"+(c.isTwo?" is-default-expand":"")),onClick:e[1]||(e[1]=t=>m.switchDisplay())}," 推荐日志 ",2),e[4]||(e[4]=(0,n.Lk)("div",{class:"mt-20"},null,-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.articleList,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{class:"article-one",key:i},[(0,n.Lk)("a",{onClick:e=>m.gotoArticle(t.fullPath),class:"article-one-title"},[e[3]||(e[3]=(0,n.Lk)("i",{class:"fa fa-fw fa-tag"},null,-1)),(0,n.eW)(" "+(0,n.v_)(t.title),1)],8,s)])))),128)),0===c.articleList.length?((0,n.uX)(),(0,n.CE)("div",l," 暂时没有推荐日志 ... ")):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])}},22650:function(t,e,i){i.d(e,{A:function(){return h}});var n=i(2824);const a={key:0,class:"content-album"},o={class:"page-header"},s={key:0,class:"content-album-image"},l={key:1,class:"content-album-image"},r={class:"content-album-desc max-two-line"};i(18111),i(61701);var c=i(41880),m=i(11277),d=i(53889),u={props:["list","title"],components:{ElImage:c.Zq,ElSkeleton:m.d1,ElSkeletonItem:m.MD,ElTooltip:d.R7},data(){return{imageList:[]}},computed:{parseList(){let t=decodeURIComponent(this.list);return JSON.parse(t)}},created(){this.imageList=this.parseList},methods:{sortImageList(t){let e=[...this.imageList];if(0===t)return e.map((function(t){return t.url}));let i=e.splice(t),n=e.splice(0,t);return i.concat(n).map((function(t){return t.url}))}}};var h=(0,i(66262).A)(u,[["render",function(t,e,i,c,m,d){const u=(0,n.g2)("el-image"),h=(0,n.g2)("el-skeleton-item"),p=(0,n.g2)("el-skeleton"),g=(0,n.g2)("el-tooltip");return m.imageList&&m.imageList.length>0?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("header",o,[(0,n.Lk)("h1",null,(0,n.v_)(i.title),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(m.imageList,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{class:"content-album-one",key:e},[t.url?((0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(u,{fit:"cover",src:t.url,"preview-src-list":d.sortImageList(e),class:"content-album-image-cover"},null,8,["src","preview-src-list"])])):(0,n.Q3)("",!0),t.url?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(p,null,{template:(0,n.k6)((()=>[(0,n.bF)(h,{variant:"image"})])),_:1})])),(0,n.Lk)("div",r,[(0,n.bF)(g,{effect:"dark",content:t.desc,placement:"top"},{default:(0,n.k6)((()=>[(0,n.eW)((0,n.v_)(t.desc),1)])),_:2},1032,["content"])])])))),128))])):(0,n.Q3)("",!0)}]])},36921:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(11924),o=i(9872),s=i(2824),l=t([o]);o=(l.then?(await l)():l)[0],e.A={name:"CommentComponent",components:{ComponentFormComment:o.A},props:["data","anchorPrefix"],data(){return{isShow:!1,commentId:0,isExporting:"true"===this.$route.query.isExporting}},setup(t,e){const i=(0,s.KR)(null);return{ComponentFormComment:i,emitReply:(t,i,n)=>{e.emit("showForm",t,i,n)},emitEdit:(t,i)=>{e.emit("editForm",t,i)},showComment:(t,e,n)=>{i.value.showComment(t,e,n)},showEditForm:(t,e)=>{i.value.editForm(t,e)},emitComment:t=>{e.emit("emitComment",t)},emitUpdate:t=>{e.emit("emitUpdate",t)}}},created(){},mounted(){let t=this;this.data&&this.data.editSecond>0&&setInterval((function(){t.data.editSecond>0&&(t.data.editSecond=t.data.editSecond-1)}),1e3)},methods:{localReply(t,e){this.commentId=e,this.isShow=!this.isShow,this.showComment(this.isShow,"",e)},localEdit(t,e){this.commentId=e,this.isShow=!0,this.showEditForm(t,e)},showForm(t,e,i){this.emitReply(t,e,i)},editForm(t,e){this.emitEdit(t,e)},isExport(){return this.isExporting&&this.url},jumpForm(){const t=document.querySelector("#comment_form");(0,a.A)(t),(0,a.A)(t,{scrollMode:"if-needed",block:"start",inline:"nearest"})}}},n()}catch(t){n(t)}}))},38255:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(59491),o=i(93946),s=i(66262),l=t([o]);o=(l.then?(await l)():l)[0];const r=(0,s.A)(o.A,[["render",a.X]]);e.A=r,n()}catch(t){n(t)}}))},45462:function(t,e,i){i.a(t,(async function(t,n){try{i(44114);var a=i(84494),o=i(2824),s=t([a]);a=(s.then?(await s)():s)[0],e.A={name:"WidgetSideCommentComponent",components:{},props:["isTwoColumn"],data(){return{commentList:[],isDisplayDefault:!1,isTwo:!1}},setup(){},created(){(0,o.wB)((()=>this.isTwoColumn),(()=>{this.isTwo=this.isTwoColumn,this.isDisplayDefault=this.isTwoColumn}),{immediate:!0,deep:!0}),this.requestSideCommentList()},mounted(){},methods:{requestSideCommentList(){(0,a.G)().then((t=>{this.commentList=t.data.data}))},switchDisplay(){this.isTwo||(this.isDisplayDefault=!this.isDisplayDefault)},gotoArticle(t){this.$router.push({path:t})}}},n()}catch(t){n(t)}}))},46605:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(2824),o=i(52004),s=i(29236),l=i(78947),r=i(13751),c=t([o]);o=(c.then?(await c)():c)[0],e.A={name:"WidgetSideBLogComponent",components:{},props:["isTwoColumn"],data(){return{isDisplayDefault:!1,config:{},isTwo:!1,statistic:{},isRegistrationMode:!1}},setup(){},created(){(0,a.wB)((()=>this.isTwoColumn),(()=>{this.isTwo=this.isTwoColumn,this.isDisplayDefault=this.isTwoColumn}),{immediate:!0,deep:!0}),this.requestStatistic(),this.config=(0,s.KA)({name:l.A.STORAGE_CONFIG}),this.isRegistrationMode=this.config.user.isRegistrationMode;let t=this;r.A.on(l.A.BUS_LISTEN_CONFIG,(function(e){t.config=e,t.isRegistrationMode=t.config.user.isRegistrationMode}))},mounted(){},methods:{requestStatistic(){(0,o.P_)().then((t=>{this.statistic=t.data.data}))},switchDisplay(){this.isTwo||(this.isDisplayDefault=!this.isDisplayDefault)}}},n()}catch(t){n(t)}}))},47570:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(81990),o=i(18543),s=i(66262),l=t([o]);o=(l.then?(await l)():l)[0];const r=(0,s.A)(o.A,[["render",a.X]]);e.A=r,n()}catch(t){n(t)}}))},55878:function(t,e,i){i.d(e,{X:function(){return C}});var n=i(2824);const a={class:"comment-one"},o=["id"],s=["href"],l=["src"],r={key:1,class:"comment-left"},c=["src"],m={class:"comment-right"},d=["href"],u={key:1,class:"comment-name"},h={key:2,class:"comment-city"},p=["innerHTML"],g={class:"comment-option"},f={class:"comment-button-reply cursor-pointer"},k={class:"comment-date"},v={key:3,class:"comment-reply-list"};function C(t,e,i,C,y,b){const w=(0,n.g2)("el-tooltip"),A=(0,n.g2)("el-tag"),E=(0,n.g2)("el-link"),L=(0,n.g2)("ComponentFormComment"),S=(0,n.g2)("CommentComponent");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("a",{id:i.anchorPrefix+i.data.commentId},null,8,o),i.data.url?((0,n.uX)(),(0,n.CE)("a",{key:0,class:"comment-left",href:i.data.url,target:"_blank"},[(0,n.bF)(w,{effect:"dark",content:i.data.url,placement:"top"},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:i.data.avatarUrl,onerror:"this.src='/image/gravatar.png'",alt:""},null,8,l)])),_:1},8,["content"])],8,s)):(0,n.Q3)("",!0),i.data.url?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("a",r,[(0,n.Lk)("img",{src:i.data.avatarUrl,onerror:"this.src='/image/gravatar.png'",alt:""},null,8,c)])),(0,n.Lk)("div",m,[i.data.url?((0,n.uX)(),(0,n.CE)("a",{key:0,class:"comment-name",href:i.data.url,target:"_blank"},[(0,n.eW)((0,n.v_)(i.data.name)+" ",1),i.data.isUser?((0,n.uX)(),(0,n.Wv)(A,{key:0,class:"tag-radius tag-skin is-user"},{default:(0,n.k6)((()=>e[3]||(e[3]=[(0,n.Lk)("i",{class:"fa fa-user-o bottom-1"},null,-1),(0,n.eW)(" Admin ")]))),_:1})):(0,n.Q3)("",!0)],8,d)):(0,n.Q3)("",!0),i.data.url?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("a",u,[(0,n.eW)((0,n.v_)(i.data.name)+" ",1),i.data.isUser?((0,n.uX)(),(0,n.Wv)(A,{key:0,class:"tag-radius tag-skin is-user"},{default:(0,n.k6)((()=>e[4]||(e[4]=[(0,n.Lk)("i",{class:"fa fa-user-o bottom-1"},null,-1),(0,n.eW)(" Admin ")]))),_:1})):(0,n.Q3)("",!0)])),i.data.city?((0,n.uX)(),(0,n.CE)("span",h,(0,n.v_)(i.data.city),1)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,n.C4)("comment-content"+(i.data.editSecond>0?" comment-content-edit":""))},[i.data.atOne.name?((0,n.uX)(),(0,n.CE)("span",{key:0,class:"comment-content-at cursor-pointer",onClick:e[0]||(e[0]=t=>{C.emitReply(!0,i.data.comment,i.data.commentId),b.jumpForm()})}," @"+(0,n.v_)(i.data.atOne.name),1)):(0,n.Q3)("",!0),(0,n.Lk)("span",{innerHTML:i.data.commentMarkdown},null,8,p)],2),(0,n.Lk)("div",g,[i.data.editSecond>0?((0,n.uX)(),(0,n.Wv)(E,{key:0,underline:!0,class:"comment-edit-link ml-15",onClick:e[1]||(e[1]=t=>b.localEdit(i.data.comment,i.data.commentId)),href:"javascript:;"},{default:(0,n.k6)((()=>[(0,n.eW)(" 编辑（"+(0,n.v_)(i.data.editSecond)+"秒内） ",1)])),_:1})):(0,n.Q3)("",!0),(0,n.Lk)("div",f,[(0,n.bF)(A,{class:"tag-skin comment-at",onClick:e[2]||(e[2]=t=>b.localReply(i.data.comment,i.data.commentId))},{default:(0,n.k6)((()=>e[5]||(e[5]=[(0,n.Lk)("i",{class:"fa fa-reply top-2"},null,-1),(0,n.eW)(" reply ")]))),_:1})]),(0,n.Lk)("div",k,(0,n.v_)(i.data.createAtDate),1),e[6]||(e[6]=(0,n.Lk)("div",{class:"clear mt-20"},null,-1)),(0,n.bo)((0,n.bF)(L,{class:(0,n.C4)("component-form-comment-reply"+(i.data.isRootDeep?" component-form-comment-reply-short":"")),ref:"ComponentFormComment",onEmitComment:C.emitComment,isCancelButton:!0,defaultPlaceholder:"来说点什么~",onEmitUpdate:C.emitUpdate,isUpload:!1,isPaste:!1},null,8,["class","onEmitComment","onEmitUpdate"]),[[n.aG,y.isShow&&!b.isExport()]])]),null!=i.data.replyList?((0,n.uX)(),(0,n.CE)("div",v,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.data.replyList,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e},[(0,n.bF)(S,{data:t,onShowForm:b.showForm,onEditForm:b.editForm,onEmitComment:C.emitComment,onEmitEdit:C.emitEdit,onEmitUpdate:C.emitUpdate,anchorPrefix:"comment_id_"},null,8,["data","onShowForm","onEditForm","onEmitComment","onEmitEdit","onEmitUpdate"])])))),128))])):(0,n.Q3)("",!0)])])}},59491:function(t,e,i){i.d(e,{X:function(){return c}});var n=i(2824);const a={class:"widget-side-container"},o={key:1,class:"widget-side-main"},s={class:"widget-side-comment-logo"},l={class:"widget-side-comment-statistic"},r={key:0};function c(t,e,i,c,m,d){const u=(0,n.g2)("el-image");return(0,n.uX)(),(0,n.CE)("div",a,[m.isDisplayDefault?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,onClick:e[0]||(e[0]=t=>d.switchDisplay())},e[2]||(e[2]=[(0,n.Lk)("div",{class:"widget-side-container-button"},[(0,n.Lk)("i",{class:"fa fa-home"})],-1)]))),m.isDisplayDefault?((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",{class:(0,n.C4)("widget-side-container-title"+(m.isTwo?" is-default-expand":"")),onClick:e[1]||(e[1]=t=>d.switchDisplay())}," 我的博客 ",2),(0,n.Lk)("div",s,[m.config?((0,n.uX)(),(0,n.Wv)(u,{key:0,fit:"cover",src:m.config.user.headerAvatarUrl?m.config.user.headerAvatarUrl:"/image/bear.png"},null,8,["src"])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",l,[(0,n.Lk)("div",null,[e[3]||(e[3]=(0,n.Lk)("i",{class:"fa fa-fw fa-archive"},null,-1)),(0,n.eW)(" 日志数："+(0,n.v_)(m.statistic.article),1)]),m.isRegistrationMode?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",r,[e[4]||(e[4]=(0,n.Lk)("i",{class:"fa fa-fw fa-comment"},null,-1)),(0,n.eW)(" 评论数："+(0,n.v_)(m.statistic.comment),1)])),(0,n.Lk)("div",null,[e[5]||(e[5]=(0,n.Lk)("i",{class:"fa fa-fw fa-bar-chart"},null,-1)),(0,n.eW)(" 访问数："+(0,n.v_)(m.config.count),1)]),(0,n.Lk)("div",null,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-fw fa-paint-brush"},null,-1)),(0,n.eW)(" 主题："+(0,n.v_)(m.statistic.skinName),1)])])])):(0,n.Q3)("",!0)])}},68307:function(t,e,i){i.a(t,(async function(t,n){try{i(44114);var a=i(2824),o=i(84494),s=t([o]);o=(s.then?(await s)():s)[0],e.A={name:"WidgetSideArticleComponent",components:{},props:["isTwoColumn"],data(){return{articleList:[],isDisplayDefault:!1,config:{},isTwo:!1}},setup(){},created(){(0,a.wB)((()=>this.isTwoColumn),(()=>{this.isTwo=this.isTwoColumn,this.isDisplayDefault=this.isTwoColumn}),{immediate:!0,deep:!0}),this.requestSideArticleList()},mounted(){},methods:{requestSideArticleList(){(0,o.f)().then((t=>{this.articleList=t.data.data}))},switchDisplay(){this.isTwo||(this.isDisplayDefault=!this.isDisplayDefault)},gotoArticle(t){this.$router.push({path:t})}}},n()}catch(t){n(t)}}))},74693:function(t,e,i){i.d(e,{A:function(){return u}});var n=i(2824);i(44114),i(18111),i(7588),i(61701),i(14603),i(47566),i(98721);var a=i(71710),o=i.n(a),s=i(4213),l=i(78947),r=i(36798),c=i(13751),m=i(29236),d={name:"ExportListView",components:{},data(){return{commonConstant:l.A,paramsExport:{waitListFromDownloadToRedirect:2e3}}},created(){let t=this;c.A.on(l.A.BUS_LISTEN_CONFIG,(function(e){t.config=e}))},methods:{getPageContent(){return{htmlContent:document.documentElement.outerHTML,styles:Array.from(document.querySelectorAll('link[rel="stylesheet"]')).map((t=>({url:t.href,content:null}))),scripts:Array.from(document.querySelectorAll("script[src]")).map((t=>({url:t.src,content:null}))),images:Array.from(document.querySelectorAll("img")).map((t=>({url:t.src,content:null})))}},extractFontUrls(t,e){const i=[],n=/url\(['"]?(.*?\.(woff2?|ttf|eot|otf))['"]?\)/gi;let a;for(;a=n.exec(t);){const t=a[1],n=new URL(t,e).href;i.push(n)}return i},replaceImageUrls(t,e){const i=[];return t=t.replace(/<img[^>]+src="([^">]+)"/g,((t,n)=>{const a=n.split("/").pop(),o=`image/page/${e}/${a}`;return i.push({originalUrl:n,relativePath:o}),t.replace(n,o)}))},addScript(t){return t=t.replace("</body>","\n    <script>\n        document.body.className = 'body-export'\n        // 获取按钮和弹出层元素\n        const dropdownMenu = document.querySelector('.dropdown-menu')\n        const elPopper = document.querySelector('.el-popper')\n\n        // 添加点击事件监听器\n        dropdownMenu.addEventListener('click', function() {\n            // 切换显示和隐藏\n            if (elPopper.style.display === 'none' || elPopper.style.display === '') {\n                elPopper.style.display = 'block'\n            } else {\n                elPopper.style.display = 'none'\n            }\n        })\n\n        const listItems = document.querySelectorAll('li[data-article-id]')\n\n        listItems.forEach(li => {\n          const articleId = li.getAttribute('data-article-id')\n          const currentPath = window.location.pathname\n          let basePath = currentPath.substring(0, currentPath.lastIndexOf('/') + 1)\n          basePath = basePath.replace('/article-list','')\n          const url = `${basePath}${articleId}`\n          li.addEventListener('click', () => {\n              window.location.href = url\n          })\n        })\n    <\/script>\n</body>")},openWindow(t){t.forEach((t=>{const e=(0,m.KA)({name:l.A.STORAGE_DOMAIN});window.open(e+t+"?isExporting=true")}))},replaceArticle(t,e){return t.replace(/(<a\s+[^>]*?\s+)data-article="([^"]*)"[^>]*>(.*?)<\/a>/g,((t,i,n,a)=>{const o=`${i}href="${`./article-list/${n.split("/").pop()}.html`}">${a}</a>`;return e.push(n+".html"),o}))},async downloadList(t){const e=new URLSearchParams(window.location.search);let i=e.get("page"),n=e.get("redirectUrl");if(i=i?parseInt(i):1,0!==t&&i>t)return void(0,r.xs)("导出流程已全部完成，请到下载目录解压查看");if(n&&1===i)return void(0,r.xs)("导出流程已全部完成，请到下载目录解压查看");const a=new(o()),l=this.getPageContent();let c=l.htmlContent;c=c.replaceAll("/staticDir","staticDir"),c=c.replace(/href="\?page=(\d+)"/g,((t,e)=>1===e?"index.html":`href="index-${e}.html"`)),c=c.replace(/<a\s+class="header-title-text text-black"\s+href="[^"]*"/g,'<a class="header-title-text text-black" href="index.html"'),c=c.replace(/<div\s+class="el-dropdown mr-15 dropdown-pagination-jump">[\s\S]*?<\/div>/g,""),c=this.addScript(c),c=this.replaceImageUrls(c,i);let m=[];c=this.replaceArticle(c,m);let d=m.join(",");const u=[];c=c.replace(/<img[^>]+src="([^">]+)"/g,((t,e)=>{const n=e.split("/").pop(),a=`image/page/${i}/${n}`;return u.push({originalUrl:e,relativePath:a}),t.replace(e,a)}));const h=1===i?"index.html":`index-${i}.html`;if(a.file(h,c),1===i){const t=a.folder("staticDir/css");for(const e of l.styles)try{const i=await fetch(e.url,{});let n=await i.text();const o=e.url.split("/").pop(),s=this.extractFontUrls(n,e.url),l=a.folder("staticDir/fonts");for(const t of s)try{const e=await fetch(t,{}),i=await e.blob(),a=t.split("/").pop();l.file(a,i),n=n.replace("/staticDir/fonts/","../fonts/")}catch(e){console.error(`Error fetching Font file: ${t}`,e)}t.file(o,n)}catch(t){console.error(`Error fetching CSS file: ${e.url}`,t)}}const p=a.folder(`image/page/${i}`);for(const t of l.images){console.log("开始下载图片："+t.url);const e=await fetch(t.url,{}),i=await e.blob(),n=t.url.split("/").pop();p.file(n,i)}a.generateAsync({type:"blob"}).then((t=>{(0,s.saveAs)(t,`page-${i}.zip`)}));d=d+","+("/...page="+(i+1));setTimeout((function(){const t=d.split(",")[0].replace("...","?");d=d.replace(t+",",""),location.href=t+"?redirectUrl="+d+"&isExporting=true"}),this.paramsExport.waitListFromDownloadToRedirect)}}};var u=(0,i(66262).A)(d,[["render",function(t,e,i,a,o,s){return(0,n.uX)(),(0,n.CE)("div")}]])},81990:function(t,e,i){i.d(e,{X:function(){return f}});var n=i(2824);const a={class:"widget-side-container"},o={key:1,class:"widget-side-main"},s={key:0},l={class:"width-100-pct mb-5"},r={class:"widget-side-comment-avatar",target:"_blank"},c=["src"],m={class:"comment-date widget-side-comment-date"},d={class:"comment-name",target:"_blank"},u={key:0,class:"comment-city"},h=["onClick"],p={key:0,class:"comment-content-at cursor-pointer"},g=["innerHTML"];function f(t,e,i,f,k,v){const C=(0,n.g2)("el-tag"),y=(0,n.g2)("el-tooltip");return(0,n.uX)(),(0,n.CE)("div",a,[k.isDisplayDefault?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,onClick:e[0]||(e[0]=t=>v.switchDisplay())},e[2]||(e[2]=[(0,n.Lk)("div",{class:"widget-side-container-button"},[(0,n.Lk)("i",{class:"fa fa-comment"})],-1)]))),k.isDisplayDefault?((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",{class:(0,n.C4)("widget-side-container-title"+(k.isTwo?" is-default-expand":"")),onClick:e[1]||(e[1]=t=>v.switchDisplay())}," 最新评论 ",2),e[4]||(e[4]=(0,n.Lk)("div",{class:"mt-20"},null,-1)),0===k.commentList.length?((0,n.uX)(),(0,n.CE)("div",s," 暂时没有评论 ... ")):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(k.commentList,((t,i)=>((0,n.uX)(),(0,n.CE)("div",{class:"comment-one widget-side-comment-one",key:i},[(0,n.Lk)("div",l,[(0,n.Lk)("a",r,[(0,n.Lk)("img",{src:t.avatarUrl,onerror:"this.src='/image/gravatar.png'",alt:""},null,8,c)]),(0,n.Lk)("div",m,(0,n.v_)(t.createAtBefore),1),(0,n.Lk)("a",d,[(0,n.eW)((0,n.v_)(t.name)+" ",1),t.isUser?((0,n.uX)(),(0,n.Wv)(C,{key:0,class:"tag-radius tag-skin is-user"},{default:(0,n.k6)((()=>e[3]||(e[3]=[(0,n.Lk)("i",{class:"fa fa-user-o bottom-1"},null,-1),(0,n.eW)(" Admin ")]))),_:1})):(0,n.Q3)("",!0)]),t.city?((0,n.uX)(),(0,n.CE)("span",u,(0,n.v_)(t.city),1)):(0,n.Q3)("",!0)]),(0,n.bF)(y,{effect:"dark",content:"日志：《"+t.title+"》",placement:"left"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,n.C4)("comment-content widget-side-comment-content"+(t.editSecond>0?" comment-content-edit":"")),onClick:e=>v.gotoArticle(t.fullPath)},[t.atOne.name?((0,n.uX)(),(0,n.CE)("span",p," @"+(0,n.v_)(t.atOne.name),1)):(0,n.Q3)("",!0),(0,n.Lk)("span",{class:"exceed-dot-6-line",innerHTML:t.commentMarkdown},null,8,g)],10,h)])),_:2},1032,["content"])])))),128))])):(0,n.Q3)("",!0)])}},83050:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{A:function(){return a.A}});var a=i(68307),o=t([a]);a=(o.then?(await o)():o)[0],n()}catch(t){n(t)}}))},85860:function(t,e,i){i.d(e,{X:function(){return a}});var n=i(2824);function a(t,e,i,a,o,s){const l=(0,n.g2)("WidgetSideBlogComponent"),r=(0,n.g2)("WidgetSideArticleComponent"),c=(0,n.g2)("WidgetSideCommentComponent");return(0,n.uX)(),(0,n.CE)("div",{class:(0,n.C4)("widget-side"+(o.isTwo?"":" widget-side-absolute"))},[o.visibleBlog?((0,n.uX)(),(0,n.Wv)(l,{key:0,class:"mb-20",isTwoColumn:o.isTwo},null,8,["isTwoColumn"])):(0,n.Q3)("",!0),o.visibleArticle?((0,n.uX)(),(0,n.Wv)(r,{key:1,class:"mb-20",isTwoColumn:o.isTwo},null,8,["isTwoColumn"])):(0,n.Q3)("",!0),o.visibleComment&&!o.isRegistrationMode&&i.isList?((0,n.uX)(),(0,n.Wv)(c,{key:2,class:"",isTwoColumn:o.isTwo},null,8,["isTwoColumn"])):(0,n.Q3)("",!0),(0,n.Lk)("div",{onClick:e[0]||(e[0]=t=>s.jumpTop()),class:(0,n.C4)("widget-side-container-button widget-side-container-button-goto-top"+(o.isDisplayGotoTop?"":" widget-side-container-button-goto-top-hide"))},e[1]||(e[1]=[(0,n.Lk)("i",{class:"fa fa-arrow-up"},null,-1)]),2)],2)}},87208:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{A:function(){return a.A}});var a=i(36921),o=t([a]);a=(o.then?(await o)():o)[0],n()}catch(t){n(t)}}))},87626:function(t,e,i){i.a(t,(async function(t,n){try{i(18111),i(7588);var a=i(38255),o=i(47570),s=i(92143),l=i(2824),r=i(13751),c=i(78947),m=i(11924),d=i(29236),u=t([a,o,s]);[a,o,s]=u.then?(await u)():u,e.A={name:"WidgetSideComponent",components:{WidgetSideCommentComponent:o.A,WidgetSideBlogComponent:a.A,WidgetSideArticleComponent:s.A},props:["isTwoColumn","isList"],data(){return{isTwo:this.isTwoColumn,config:{},visibleBlog:!1,visibleArticle:!1,visibleComment:!1,isDisplayGotoTop:!1,isRegistrationMode:!1}},setup(){},created(){(0,l.wB)((()=>this.isTwoColumn),(()=>{this.isTwo=this.isTwoColumn}),{immediate:!0,deep:!0}),this.config=(0,d.KA)({name:c.A.STORAGE_CONFIG}),this.isRegistrationMode=this.config.user.isRegistrationMode;let t=this;r.A.on(c.A.BUS_LISTEN_CONFIG,(function(e){t.config=e,t.isRegistrationMode=t.config.user.isRegistrationMode;t.config.user.widgetList.forEach((e=>{e.id===c.A.WIDGET_LIST_BLOG&&(t.visibleBlog=e.isCheck),e.id===c.A.WIDGET_LIST_ARTICLE&&(t.visibleArticle=e.isCheck),e.id===c.A.WIDGET_LIST_COMMENT&&(t.visibleComment=e.isCheck)}))}))},mounted(){let t=this;window.addEventListener("scroll",(function(){t.isDisplayGotoTop=window.pageYOffset>800}))},methods:{jumpTop(){const t=document.querySelector("#top");(0,m.A)(t),(0,m.A)(t,{scrollMode:"if-needed",block:"start",inline:"nearest"})}}},n()}catch(t){n(t)}}))},88314:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(2824);const a={key:0,class:"baidu-union"};var o={props:["config"],name:"UnionAdView",components:{UnionAd:(0,i(84760).createUnionAdComponent)(n.h)},data(){return{}},mounted(){this.$nextTick((()=>{}))},methods:{getId(){return"iframe"+this.config.user.baiduAdvertisementCode+"_0"}}};var s=(0,i(66262).A)(o,[["render",function(t,e,i,o,s,l){const r=(0,n.g2)("UnionAd");return i.config.user.isBaiduAdvertisement?((0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(r,{id:i.config.user.baiduAdvertisementCode},null,8,["id"])])):(0,n.Q3)("",!0)}]])},88983:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{A:function(){return a.A}});var a=i(87626),o=t([a]);a=(o.then?(await o)():o)[0],n()}catch(t){n(t)}}))},90578:function(t,e,i){i.d(e,{X:function(){return m}});var n=i(2824);const a=["onClick"],o=["onClick","src"],s={class:"form-paste-area",id:"form-comment-item-paste"},l={class:"dialog-small"},r=["src"],c={class:"dialog-footer"};function m(t,e,i,m,d,u){const h=(0,n.g2)("el-input"),p=(0,n.g2)("el-form-item"),g=(0,n.g2)("el-tab-pane"),f=(0,n.g2)("el-button"),k=(0,n.g2)("el-upload"),v=(0,n.g2)("el-tabs"),C=(0,n.g2)("el-image"),y=(0,n.g2)("el-form"),b=(0,n.g2)("el-dialog");return(0,n.uX)(),(0,n.CE)("div",null,[d.formVisible?((0,n.uX)(),(0,n.Wv)(y,{key:0,ref:"form",model:d.formComment,"label-width":"0px",size:"small",class:"form-comment mb-40",onSubmit:e[8]||(e[8]=(0,n.D$)((()=>{}),["prevent"]))},{default:(0,n.k6)((()=>[d.token?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(p,{key:0,size:u.isPcWidth()?"large":"default",prop:"name",class:"form-email",error:d.error.name},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:d.comment.name,"onUpdate:modelValue":e[0]||(e[0]=t=>d.comment.name=t),name:"nick",placeholder:"昵称",disabled:d.token,onBlur:u.storageUserSave},null,8,["modelValue","disabled","onBlur"])])),_:1},8,["size","error"])),d.token?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(p,{key:1,size:u.isPcWidth()?"large":"default",prop:"email",class:"form-email",error:d.error.email},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:d.comment.email,"onUpdate:modelValue":e[1]||(e[1]=t=>d.comment.email=t),name:"email",placeholder:"邮箱",disabled:d.token,onBlur:u.storageUserSave},null,8,["modelValue","disabled","onBlur"])])),_:1},8,["size","error"])),d.token?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(p,{key:2,size:u.isPcWidth()?"large":"default",prop:"url",class:"form-email",error:d.error.url},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:d.comment.url,"onUpdate:modelValue":e[2]||(e[2]=t=>d.comment.url=t),name:"url",placeholder:"网址",disabled:d.token,onBlur:u.storageUserSave},null,8,["modelValue","disabled","onBlur"])])),_:1},8,["size","error"])),(0,n.bF)(p,{size:u.isPcWidth()?"large":"default",label:"",prop:"content",error:d.error.content},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.bF)(h,{type:"textarea",modelValue:d.comment.content,"onUpdate:modelValue":e[3]||(e[3]=t=>d.comment.content=t),rows:"6","show-word-limit":"",maxlength:"500",onBlur:u.recordPosition,placeholder:i.defaultPlaceholder,onInput:u.changeContent,class:"textarea-comment",id:u.getId()},null,8,["modelValue","onBlur","placeholder","onInput","id"]),[[n.aG,!1===i.isUpload||!1===i.isPaste||!1===d.contentDisable]]),(0,n.bF)(v,{modelValue:d.activeTab,"onUpdate:modelValue":e[4]||(e[4]=t=>d.activeTab=t),class:(0,n.C4)("comment-tabs"+(i.isUpload||i.isPaste?" comment-tabs-upload":"")),onTabClick:u.clickTab},{default:(0,n.k6)((()=>[(0,n.bF)(g,{label:"默认",name:"default",class:"tab-emotion"}),(0,n.bF)(g,{label:"●ω●",name:"emotion",class:"tab-emotion"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.emotion,(t=>((0,n.uX)(),(0,n.CE)("span",{key:t,class:"tab-emotion-one",onClick:e=>u.insertEmotion(t)},(0,n.v_)(t),9,a)))),128))])),_:1}),(0,n.bF)(g,{label:"阿鲁",name:"alu",class:"tab-emotion"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.alu,(t=>((0,n.uX)(),(0,n.CE)("img",{key:t[0],class:"tab-alu-one",onClick:e=>u.insertAlu(t[0]),src:t[1],alt:""},null,8,o)))),128))])),_:1}),i.isUpload?((0,n.uX)(),(0,n.Wv)(g,{key:0,label:"上传",name:"upload",class:"tab-emotion"},{default:(0,n.k6)((()=>[(0,n.bF)(k,{action:i.uploadUrl,headers:u.getHeader(),"on-preview":u.handlePreview,"on-remove":u.handleRemove,"before-remove":u.beforeRemove,"on-exceed":u.handleExceed,"on-success":u.handleSuccess,"on-progress":u.handleProgress,"show-file-list":!1,onOnError:u.handleError},{default:(0,n.k6)((()=>[(0,n.bF)(f,{type:"warning",disabled:d.isUploading},{default:(0,n.k6)((()=>[(0,n.eW)((0,n.v_)(d.isUploading?"正在上传，请稍后…":"选择图片"),1)])),_:1},8,["disabled"]),(0,n.Q3)("",!0)])),_:1},8,["action","headers","on-preview","on-remove","before-remove","on-exceed","on-success","on-progress","onOnError"])])),_:1})):(0,n.Q3)("",!0),i.isPaste?((0,n.uX)(),(0,n.Wv)(g,{key:1,label:"粘贴",name:"paste",class:"tab-emotion"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",s,(0,n.v_)(d.isUploading?"正在上传，请稍后…":"在这里 ctrl + v 粘贴截图"),1)])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["modelValue","class","onTabClick"])])),_:1},8,["size","error"]),d.image&&d.image.url?((0,n.uX)(),(0,n.Wv)(p,{key:3,label:""},{default:(0,n.k6)((()=>[d.image&&d.image.url?((0,n.uX)(),(0,n.Wv)(C,{key:0,fit:"cover",src:d.image.url,class:"form-comment-item-image","preview-src-list":[d.image.url]},null,8,["src","preview-src-list"])):(0,n.Q3)("",!0),(0,n.Lk)("span",{class:"form-comment-item-image-delete ml-10 cursor-pointer",onClick:e[5]||(e[5]=t=>u.removeImage(d.image.name))},e[17]||(e[17]=[(0,n.Lk)("i",{class:"ri-delete-bin-line"},null,-1)]))])),_:1})):(0,n.Q3)("",!0),(0,n.bF)(p,{label:""},{default:(0,n.k6)((()=>[(0,n.bF)(f,{class:"tag-block tag-skin left mr-15",onClick:e[6]||(e[6]=t=>u.postComment()),disabled:!d.isDisplayButton},{default:(0,n.k6)((()=>[e[18]||(e[18]=(0,n.Lk)("i",{class:"fa fa-fw fa-send"},null,-1)),(0,n.eW)(" "+(0,n.v_)(d.postButton),1)])),_:1},8,["disabled"]),i.isCancelButton?((0,n.uX)(),(0,n.Wv)(f,{key:0,class:"left tag-radius tag-skin-light",onClick:e[7]||(e[7]=t=>u.finishForm())},{default:(0,n.k6)((()=>[e[19]||(e[19]=(0,n.Lk)("i",{class:"fa fa-fw fa-remove"},null,-1)),(0,n.eW)(" "+(0,n.v_)(d.cancelButtonText),1)])),_:1})):(0,n.Q3)("",!0)])),_:1})])),_:1},8,["model"])):(0,n.Q3)("",!0),(0,n.Lk)("div",l,[(0,n.bF)(b,{modelValue:d.dialogVisible,"onUpdate:modelValue":e[16]||(e[16]=t=>d.dialogVisible=t),title:"输入验证码"},{footer:(0,n.k6)((()=>[(0,n.Lk)("span",c,[(0,n.bF)(f,{onClick:e[14]||(e[14]=t=>d.dialogVisible=!1),size:"small"},{default:(0,n.k6)((()=>e[20]||(e[20]=[(0,n.eW)("取消")]))),_:1}),(0,n.bF)(f,{type:"primary",onClick:e[15]||(e[15]=t=>u.postComment())},{default:(0,n.k6)((()=>e[21]||(e[21]=[(0,n.eW)(" 确定 ")]))),_:1})])])),default:(0,n.k6)((()=>[(0,n.bF)(y,{model:d.formCaptcha,"label-width":80,onSubmit:e[13]||(e[13]=(0,n.D$)((()=>{}),["prevent"]))},{default:(0,n.k6)((()=>[(0,n.bF)(p,{label:"验证码"},{default:(0,n.k6)((()=>[d.imageUrl?((0,n.uX)(),(0,n.CE)("img",{key:0,src:d.imageUrl,alt:"验证码",onClick:e[9]||(e[9]=t=>{u.getCaptchaUrl()})},null,8,r)):(0,n.Q3)("",!0)])),_:1}),(0,n.bF)(p,{label:"输入",prop:"captcha"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:d.comment.captcha,"onUpdate:modelValue":e[10]||(e[10]=t=>d.comment.captcha=t),class:"input-tag width-100",maxlength:"2",onKeyup:[e[11]||(e[11]=t=>u.checkCaptchaLength()),e[12]||(e[12]=(0,n.jR)((t=>u.postComment()),["enter","native"]))],ref:"captcha"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])])}},91418:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(52004),o=i(78947),s=i(37490),l=i(13255),r=i(54554),c=i(2824),m=i(29236),d=i(40874),u=i(13751),h=i(1009),p=i(36798),g=i(93893),f=t([a,h]);[a,h]=f.then?(await f)():f,e.A={props:["isCancelButton","isUpload","isPaste","uploadUrl","defaultPlaceholder","isHideContentWhenUpload"],data(){return{formVisible:!1,postButtonText:"发表",editButtonText:"保存修改",replyButtonText:"回复评论",cancelButtonText:"取消",postButton:this.postButtonText,activeTab:"default",isDisplayButton:!1,placeholder:"",token:"",isReply:!1,isEdit:!1,emotion:[],alu:[],contentDisable:!1,isUploading:!1,formComment:{},comment:{name:"",email:"",url:"",content:"",replyCommentId:0,commentId:0,captcha:""},error:{name:"",email:"",url:"",content:""},image:{},rulesComment:(0,c.Kh)({content:[{required:!0,message:"请输入内容",trigger:"blur"},{max:500,message:"内容长度在 1 到 500 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入昵称",trigger:"blur"},{max:20,message:"昵称长度在 1 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{max:500,message:"邮箱长度在 1 到 20 个字符",trigger:"blur"},{validator:l.Hu.isEmail}],url:[{max:50,message:"url长度在 1 到 50 个字符",trigger:"blur"},{validator:l.Hu.isUrl}]}),inputIndex:0,isInPaste:!1,idRandom:(0,d.D)(8),dialogVisible:!1,formCaptcha:{},config:{},imageUrl:""}},created(){this.getStorage()},mounted(){u.A.on(o.A.BUS_FINIS_COMMENT,this.finishForm),u.A.on(o.A.BUS_COMMENT_STORAGE_CLEAR,this.storageContentClear);let t=this;u.A.on(o.A.BUS_LISTEN_CONFIG,(function(e){t.config=e})),this.comment.content||(this.comment.content=this.storageContentLoad()),setInterval((function(){t.storageContentSave()}),2e3),(0,c.wB)((()=>this.isReply),(t=>{t?(this.isEdit=!1,this.postButton=this.replyButtonText,this.formVisible=!0):this.isEdit||(this.postButton=this.postButtonText)}),{immediate:!0,deep:!0}),(0,c.wB)((()=>this.isEdit),(t=>{t?(this.isReply=!1,this.postButton=this.editButtonText,this.formVisible=!0):this.isReply||(this.postButton=this.postButtonText)}),{immediate:!0,deep:!0}),(0,c.wB)((()=>this.comment.content),(t=>{this.isDisplayButton=!!t}),{immediate:!0,deep:!0})},setup(t,e){return{emitComment:t=>{e.emit("emitComment",t)},emitUpdate:t=>{e.emit("emitUpdate",t)}}},methods:{checkCaptchaLength(){this.comment.captcha=this.comment.captcha.trim(),2===this.comment.captcha.length&&this.postComment()},postComment(){if(this.config&&this.config.user.isCommentCaptcha&&!this.token&&!this.comment.captcha){this.getCaptchaUrl();let t=this;return setInterval((function(){t.getCaptchaUrl()}),6e4),this.dialogVisible=!0,void this.$nextTick((()=>{setTimeout((function(){t.$refs.captcha.focus()}),500)}))}this.setStorage(this.comment.name,this.comment.email,this.comment.url);const t=(0,c.Kh)(new r.A(this.rulesComment));if(this.postButton="发送中…",this.token){if(!this.comment.content)return void(this.error.content="评论内容必须填写");this.emitPost()}else{t.validate(this.comment,{firstFields:!0}).then((()=>{this.emitPost()})).catch((({errors:t})=>{this.isEdit?this.postButton=this.editButtonText:this.postButton=this.postButtonText;let e=!1;if(t.length>0)for(let i in t)e||((0,p.z3)(t[i].message),e=!0),this.error[t[i].field]=t[i].message}));let e=this;setTimeout((function(){e.getCaptchaUrl(),e.comment.captcha=""}),800)}},showComment(t,e,i){this.formVisible=t,this.comment.replyCommentId=i,i>0&&(this.isReply=!0)},editForm(t,e){this.isEdit=!0,this.comment.content=t,this.comment.commentId=e},errorForm(t){this.error=t},finishForm(){this.isCancelButton&&(this.formVisible=!1),this.contentDisable=!1,this.comment.content="",this.postButton=this.postButtonText,this.isReply=!1,this.isEdit=!1,this.error={}},clickTab(){switch(this.activeTab){case"emotion":(0,a.ns)().then((t=>{this.emotion=t.data.data.emotion})),this.contentDisable=!1;break;case"alu":(0,a.AR)().then((t=>{this.alu=t.data.data.alu})),this.contentDisable=!1;break;case"upload":this.getImageList(),this.contentDisable=!0;break;case"paste":this.readyPaste(),this.getImageList(),this.contentDisable=!0;break;default:this.contentDisable=!1}},clearInput(){this.comment.content="",this.comment.image="",this.image="",this.formVisible=!1,this.dialogVisible=!1},recordPosition(t){this.inputIndex=t.srcElement.selectionStart},insertInput(t){if(this.comment.content){let e=this.getSelection(),i=this.comment.content;this.comment.content=i.slice(0,e)+" "+t+" "+i.slice(e)}else this.comment.content=t;document.getElementById(this.getId()).value=this.comment.content},emitPost(){this.isEdit?this.emitUpdate(this.comment):this.emitComment(this.comment),this.isEdit?this.postButton=this.editButtonText:this.isReply?this.postButton=this.replyButtonText:this.postButton=this.postButtonText},removeImage(t){this.$emit("removeImage",t)},insertEmotion(t){let e=this.getSelection();this.insertInput(t),this.setSelection(e+t.length+2),this.changeContent(),this.activeTab="default",this.$emit("clickEmotion",!1)},insertAlu(t){let e=this.getSelection();this.insertInput(t),this.setSelection(e+t.length+2),this.changeContent(),this.activeTab="default",this.$emit("clickEmotion",!1)},getId(){return"comment-textarea-"+this.idRandom},getSelection(){return document.getElementById(this.getId()).selectionEnd},setSelection(t){document.getElementById(this.getId()).setSelectionRange(t,t)},changeContent(){},handleRemove(t,e){console.log(t,e)},handlePreview(t){console.log(t)},handleExceed(t,e){console.log(t,e),this.$notify({title:"报告",message:"上传文件数量超出限制",type:"warning",duration:3e3})},handleError(t){(0,p.R8)(t)},beforeRemove(t,e){return console.log(t,e),this.$confirm(`确定移除 ${t.name}？`)},readyPaste(){s.X.getInstance().sharePasteInstance.removeListener(),this.isInPaste=!0;const t=this.uploadUrl;let e=this;s.X.getInstance().sharePasteInstance.init("form-paste-area","file",t,(function(){0===s.X.getInstance().code?(e.getImageList(),this.contentDisable=!0):e.$notify({title:"报告",message:"上传截图失败",type:"warning",duration:3e3})}))},handleProgress(){this.isUploading=!0},handleSuccess(t){t.code>0?(0,p.R8)(t.msg):(this.isUploading=!1,this.contentDisable=!0,this.getImageList())},getImageList(){this.$emit("getImageList")},getHeader(){return{}},getStorage(){this.comment.email=(0,m.KA)({name:o.A.SESSION_EMAIL}),this.comment.name=(0,m.KA)({name:o.A.SESSION_NAME}),this.comment.url=(0,m.KA)({name:o.A.SESSION_URL}),this.token=(0,m.KA)({name:o.A.SESSION_TOKEN}),this.config=(0,m.KA)({name:o.A.STORAGE_CONFIG})},storageContentSave(){let t=document.getElementById(this.getId());t&&(0,m.k3)({name:o.A.STORAGE_COMMENT,content:t.value})},storageUserSave(){this.setStorage(this.comment.name,this.comment.email,this.comment.url)},storageContentLoad(){return(0,m.KA)({name:o.A.STORAGE_COMMENT})},storageContentClear(){this.comment.content="",this.dialogVisible=!1,(0,m.aZ)({name:o.A.STORAGE_COMMENT})},setStorage(t,e,i){(0,m.k3)({name:o.A.SESSION_EMAIL,content:e}),(0,m.k3)({name:o.A.SESSION_NAME,content:t}),(0,m.k3)({name:o.A.SESSION_URL,content:i})},getCaptchaUrl(){let t=Math.random();this.imageUrl=(0,h.DU)()+"?user="+this.comment.email+"&d="+t},isPcWidth(){return(0,g.C)()}}},n()}catch(t){n(t)}}))},92143:function(t,e,i){i.a(t,(async function(t,n){try{var a=i(22183),o=i(83050),s=i(66262),l=t([o]);o=(l.then?(await l)():l)[0];const r=(0,s.A)(o.A,[["render",a.X]]);e.A=r,n()}catch(t){n(t)}}))},93946:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{A:function(){return a.A}});var a=i(46605),o=t([a]);a=(o.then?(await o)():o)[0],n()}catch(t){n(t)}}))}}]);